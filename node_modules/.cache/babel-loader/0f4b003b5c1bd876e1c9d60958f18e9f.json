{"ast":null,"code":"import _objectSpread from\"C:/Users/King/Desktop/batcave/super/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/King/Desktop/batcave/super/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,useEffect}from\"react\";import{ArrowBillboard}from\"./ArrowBillboard\";import{matchPc}from\"../DetectDevice\";import{Grid}from\"@material-ui/core\";import{animated,useTransition}from\"react-spring\";import{useSelector}from\"react-redux\";import{DotsBillboard}from\"./DotsBillboard\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SliderBillboardx(_ref){var slides=_ref.slides,billboardDynamicHeight=_ref.billboardDynamicHeight,ClickBillboardClose=_ref.ClickBillboardClose,ShowBillboard=_ref.ShowBillboard;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),sliderIndex=_useState2[0],setSliderIndex=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),allowAutoPlay=_useState4[0],setAllowAutoPlay=_useState4[1];var _useState5=useState(2000),_useState6=_slicedToArray(_useState5,2),sliderDuration=_useState6[0],setsliderDuration=_useState6[1];var _useState7=useState(2500),_useState8=_slicedToArray(_useState7,1),autoSlideDuration=_useState8[0];/// const getWidth = () => window.innerWidth;\n///var newGetWidth = getWidth() * slides.length;\nvar handleTouchMoveTimer=useRef(null);var cancelAutoBillboardTimer=useRef(null);var changeBillboardAutoSlideDurationTimer=useRef(null);var autoPlayTimer=useRef(null);var SlideimageRef=useRef(null);var SlideimageRefthumb=useRef(null);var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),imageHeight=_useState10[0],setImageHeight=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),touchPosition=_useState12[0],setTouchPosition=_useState12[1];///\n///\n///\n/// GET DARKMODE FROM REDUX STORE\nvar _useSelector=useSelector(function(state){return _objectSpread({},state.GlobalReducer);}),darkmode=_useSelector.darkmode;var darkmodeReducer=darkmode;///\n///\n///\n/// SPRING TRANSITION WITH INDEX\nvar transitions=useTransition(sliderIndex,{key:sliderIndex,from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:{duration:sliderDuration-50}});///\n///\n///\n/// PROVIDES DYNAMIC HEIGHT FOR SLIDER CONTENT FROM IMAGE\nvar sliderFirstImageOnLoad=function sliderFirstImageOnLoad(item){if(item===0){if(SlideimageRef.current&&SlideimageRef.current.clientHeight){setImageHeight(SlideimageRef.current.clientHeight);}}};///\n///\n///\n/// PROVIDES DYNAMIC HEIGHT FOR SLIDER CONTENT FROM IMAGE THUMBS IF IMAGE DOES NOT LOAD\nvar sliderFirstImageOnLoadthumb=function sliderFirstImageOnLoadthumb(item){if(item===0&&imageHeight===0){if(SlideimageRefthumb.current&&SlideimageRefthumb.current.clientHeight){setImageHeight(SlideimageRefthumb.current.clientHeight);}}};///\n///\n///\n/// HANDLE TOUCH START EVENT\nvar handleTouchStart=function handleTouchStart(e){////onMouseDown onMouseMove\n////touchDown = e.clientX\nvar touchDown=e.touches[0].clientX;setTouchPosition(touchDown);};///\n///\n///\n/// HANDLE TOUCH MOVE EVENT\nvar handleTouchMove=function handleTouchMove(e){if(handleTouchMoveTimer.current){clearTimeout(handleTouchMoveTimer.current);}handleTouchMoveTimer.current=setTimeout(function(){var touchDown=touchPosition;if(touchDown===null){return;}////currentTouch = e.clientX\nvar currentTouch=e.touches[0].clientX;var diff=touchDown-currentTouch;if(diff>40){nextSlide();}else if(diff<-40){prevSlide();}else{}setTouchPosition(null);return false;},200);return false;};///\n///\n///\n/// NEXT SLIDE\nvar nextSlide=function nextSlide(){if(allowAutoPlay){}else{if(autoPlayTimer.current){clearTimeout(autoPlayTimer.current);}}///set((state) => (state + 1) % slides.length);\nif(sliderIndex===slides.length-1){setSliderIndex(function(sliderIndex){return 0;});}else{setSliderIndex(function(sliderIndex){return sliderIndex+1;});}};///\n///\n///\n/// PREV SLIDE\nvar prevSlide=function prevSlide(){if(allowAutoPlay){}else{if(autoPlayTimer.current){clearTimeout(autoPlayTimer.current);}}if(sliderIndex===0){setSliderIndex(function(sliderIndex){return slides.length-1;});}else{setSliderIndex(function(sliderIndex){return sliderIndex-1;});}};///\n///\n///\n/// AUTO PLAY SLIDER DEPENDENT FUNCTION\nvar startSlider=function startSlider(){setAllowAutoPlay(false);autoPlayTimer.current=setInterval(function(){setSliderIndex(function(state){return(state+1)%slides.length;});},autoSlideDuration);};///\n///\n///\n/// AUTO PLAY SLIDER START\nvar SliderAutoPlay=function SliderAutoPlay(){if(allowAutoPlay){startSlider();}else{setAllowAutoPlay(true);if(autoPlayTimer.current){clearInterval(autoPlayTimer.current);}}};///\n///\n///\n/// UPDATE AUTO  PLAY  DURATION  AFTER INITIAL QUICK SLIDE\nvar callNewAutoBillboard=function callNewAutoBillboard(){if(autoPlayTimer.current){clearInterval(autoPlayTimer.current);}autoPlayTimer.current=setInterval(function(){setSliderIndex(function(state){return(state+1)%slides.length;});},16000);if(cancelAutoBillboardTimer.current){clearTimeout(cancelAutoBillboardTimer.current);}cancelAutoBillboardTimer.current=setTimeout(function(){if(autoPlayTimer.current){clearInterval(autoPlayTimer.current);}},192000);};///\n///\n///START AUTOPLAY ON PAGE LOAD\nuseEffect(function(){if(slides[1]){SliderAutoPlay();changeBillboardAutoSlideDurationTimer.current=setTimeout(function(){setsliderDuration(2000);callNewAutoBillboard();},6000);}},[slides]);///\n///\n/// WATCH FOR CHANGE IN [ShowBillboard] AND USE THAT CONTROL SLIDER DURATION(ON VIEW) AND CLEAR AUTOPLAY TIMER\nuseEffect(function(){if(ShowBillboard){setsliderDuration(2000);if(allowAutoPlay){}else{if(autoPlayTimer.current){clearInterval(autoPlayTimer.current);}}}else{}},[ShowBillboard]);///\n///\n///  CHANGE [showBillboard == close]  EXTEND SLIDER DURATION(ON VIEW) AND  START AUTOPLAY\nvar ClickBillboardCloseStart=function ClickBillboardCloseStart(){ClickBillboardClose();setsliderDuration(2000);if(allowAutoPlay){}else{callNewAutoBillboard();}};///\n///\n///\n/// CHANGE SLIDER CONTENT USING  DOTS\nvar GotoDots=function GotoDots(clickedDot){setSliderIndex(function(sliderIndex){return clickedDot;});};///\n///\n///\nreturn/*#__PURE__*/_jsxs(Grid,{item:true,onTouchStart:handleTouchStart,onTouchMove:handleTouchMove,xs:12,style:{position:\"relative\",height:\"\".concat(imageHeight,\"px\"),opacity:imageHeight===0?0:1},children:[/*#__PURE__*/_jsx(ArrowBillboard,{ShowBillboard:ShowBillboard,direction:\"left\",clickSlideprev:prevSlide,clickSlidenext:nextSlide,imageHeight:imageHeight}),transitions(function(style,i){return/*#__PURE__*/_jsx(Grid,{xs:12,item:true,children:/*#__PURE__*/_jsx(animated.img,{ref:SlideimageRef,onClick:ClickBillboardCloseStart,onLoad:function onLoad(){sliderFirstImageOnLoad(i);},style:_objectSpread(_objectSpread({},style),{},{cursor:\"pointer\",width:\"100%\",objectFit:\"cover\",position:\"absolute\",height:billboardDynamicHeight,borderRadius:\"0px\",borderBottomLeftRadius:ShowBillboard?\"0px\":matchPc?\"7px\":\"0px\",borderBottomRightRadius:ShowBillboard?\"0px\":matchPc?\"7px\":\"0px\",left:\"0\",zIndex:2}),src:\"/billboard_upload/\".concat(slides[i])})},i);}),\" \",/*#__PURE__*/_jsx(DotsBillboard,{ShowBillboard:ShowBillboard,GotoDots:GotoDots,slides:slides,activeSlide:sliderIndex})]});}export var SliderBillboard=/*#__PURE__*/React.memo(SliderBillboardx);","map":{"version":3,"sources":["C:/Users/King/Desktop/batcave/super/src/profile/SliderBillboard.tsx"],"names":["React","useState","useRef","useEffect","ArrowBillboard","matchPc","Grid","animated","useTransition","useSelector","DotsBillboard","SliderBillboardx","slides","billboardDynamicHeight","ClickBillboardClose","ShowBillboard","sliderIndex","setSliderIndex","allowAutoPlay","setAllowAutoPlay","sliderDuration","setsliderDuration","autoSlideDuration","handleTouchMoveTimer","cancelAutoBillboardTimer","changeBillboardAutoSlideDurationTimer","autoPlayTimer","SlideimageRef","SlideimageRefthumb","imageHeight","setImageHeight","touchPosition","setTouchPosition","state","GlobalReducer","darkmode","darkmodeReducer","transitions","key","from","opacity","enter","leave","config","duration","sliderFirstImageOnLoad","item","current","clientHeight","sliderFirstImageOnLoadthumb","handleTouchStart","e","touchDown","touches","clientX","handleTouchMove","clearTimeout","setTimeout","currentTouch","diff","nextSlide","prevSlide","length","startSlider","setInterval","SliderAutoPlay","clearInterval","callNewAutoBillboard","ClickBillboardCloseStart","GotoDots","clickedDot","position","height","style","i","cursor","width","objectFit","borderRadius","borderBottomLeftRadius","borderBottomRightRadius","left","zIndex","SliderBillboard","memo"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { ArrowBillboard } from \"./ArrowBillboard\";\r\nimport { matchPc } from \"../DetectDevice\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport { animated, useTransition } from \"react-spring\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { DotsBillboard } from \"./DotsBillboard\";\r\n\r\nfunction SliderBillboardx({\r\n  slides,\r\n  billboardDynamicHeight,\r\n  ClickBillboardClose,\r\n  ShowBillboard,\r\n}: any): JSX.Element {\r\n  const [sliderIndex, setSliderIndex] = useState(0);\r\n\r\n  const [allowAutoPlay, setAllowAutoPlay] = useState(true);\r\n\r\n  const [sliderDuration, setsliderDuration] = useState(2000);\r\n  const [autoSlideDuration] = useState(2500);\r\n\r\n  /// const getWidth = () => window.innerWidth;\r\n  ///var newGetWidth = getWidth() * slides.length;\r\n\r\n  const handleTouchMoveTimer = useRef<ReturnType<typeof setTimeout> | null>(\r\n    null\r\n  );\r\n\r\n  const cancelAutoBillboardTimer = useRef<ReturnType<typeof setTimeout> | null>(\r\n    null\r\n  );\r\n\r\n  const changeBillboardAutoSlideDurationTimer = useRef<ReturnType<\r\n    typeof setTimeout\r\n  > | null>(null);\r\n\r\n  const autoPlayTimer = useRef<ReturnType<typeof setInterval> | null>(null);\r\n\r\n  const SlideimageRef = useRef<HTMLImageElement>(null);\r\n  const SlideimageRefthumb = useRef<HTMLImageElement>(null);\r\n\r\n  const [imageHeight, setImageHeight] = useState(0);\r\n  const [touchPosition, setTouchPosition] = useState(null);\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// GET DARKMODE FROM REDUX STORE\r\n  interface RootStateGlobalReducer {\r\n    GlobalReducer: {\r\n      darkmode: boolean;\r\n    };\r\n  }\r\n  const { darkmode } = useSelector((state: RootStateGlobalReducer) => ({\r\n    ...state.GlobalReducer,\r\n  }));\r\n  const darkmodeReducer = darkmode;\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// SPRING TRANSITION WITH INDEX\r\n  const transitions = useTransition(sliderIndex, {\r\n    key: sliderIndex,\r\n    from: { opacity: 0 },\r\n    enter: { opacity: 1 },\r\n    leave: { opacity: 0 },\r\n    config: { duration: sliderDuration - 50 },\r\n  });\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// PROVIDES DYNAMIC HEIGHT FOR SLIDER CONTENT FROM IMAGE\r\n  const sliderFirstImageOnLoad = (item: number) => {\r\n    if (item === 0) {\r\n      if (SlideimageRef.current && SlideimageRef.current.clientHeight) {\r\n        setImageHeight(SlideimageRef.current.clientHeight);\r\n      }\r\n    }\r\n  };\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// PROVIDES DYNAMIC HEIGHT FOR SLIDER CONTENT FROM IMAGE THUMBS IF IMAGE DOES NOT LOAD\r\n  const sliderFirstImageOnLoadthumb = (item: number) => {\r\n    if (item === 0 && imageHeight === 0) {\r\n      if (\r\n        SlideimageRefthumb.current &&\r\n        SlideimageRefthumb.current.clientHeight\r\n      ) {\r\n        setImageHeight(SlideimageRefthumb.current.clientHeight);\r\n      }\r\n    }\r\n  };\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// HANDLE TOUCH START EVENT\r\n  const handleTouchStart = (e: any) => {\r\n    ////onMouseDown onMouseMove\r\n    ////touchDown = e.clientX\r\n    const touchDown = e.touches[0].clientX;\r\n    setTouchPosition(touchDown);\r\n  };\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// HANDLE TOUCH MOVE EVENT\r\n  const handleTouchMove = (e: any) => {\r\n    if (handleTouchMoveTimer.current) {\r\n      clearTimeout(handleTouchMoveTimer.current);\r\n    }\r\n    handleTouchMoveTimer.current = setTimeout(function () {\r\n      const touchDown = touchPosition;\r\n\r\n      if (touchDown === null) {\r\n        return;\r\n      }\r\n      ////currentTouch = e.clientX\r\n      const currentTouch = e.touches[0].clientX;\r\n      const diff = touchDown - currentTouch;\r\n\r\n      if (diff > 40) {\r\n        nextSlide();\r\n      } else if (diff < -40) {\r\n        prevSlide();\r\n      } else {\r\n      }\r\n\r\n      setTouchPosition(null);\r\n      return false;\r\n    }, 200);\r\n\r\n    return false;\r\n  };\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// NEXT SLIDE\r\n  const nextSlide = () => {\r\n    if (allowAutoPlay) {\r\n    } else {\r\n      if (autoPlayTimer.current) {\r\n        clearTimeout(autoPlayTimer.current);\r\n      }\r\n    }\r\n\r\n    ///set((state) => (state + 1) % slides.length);\r\n    if (sliderIndex === slides.length - 1) {\r\n      setSliderIndex((sliderIndex) => 0);\r\n    } else {\r\n      setSliderIndex((sliderIndex) => sliderIndex + 1);\r\n    }\r\n  };\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// PREV SLIDE\r\n  const prevSlide = () => {\r\n    if (allowAutoPlay) {\r\n    } else {\r\n      if (autoPlayTimer.current) {\r\n        clearTimeout(autoPlayTimer.current);\r\n      }\r\n    }\r\n\r\n    if (sliderIndex === 0) {\r\n      setSliderIndex((sliderIndex) => slides.length - 1);\r\n    } else {\r\n      setSliderIndex((sliderIndex) => sliderIndex - 1);\r\n    }\r\n  };\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// AUTO PLAY SLIDER DEPENDENT FUNCTION\r\n  const startSlider = () => {\r\n    setAllowAutoPlay(false);\r\n\r\n    autoPlayTimer.current = setInterval(function () {\r\n      setSliderIndex((state) => (state + 1) % slides.length);\r\n    }, autoSlideDuration);\r\n  };\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// AUTO PLAY SLIDER START\r\n  const SliderAutoPlay = () => {\r\n    if (allowAutoPlay) {\r\n      startSlider();\r\n    } else {\r\n      setAllowAutoPlay(true);\r\n\r\n      if (autoPlayTimer.current) {\r\n        clearInterval(autoPlayTimer.current);\r\n      }\r\n    }\r\n  };\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// UPDATE AUTO  PLAY  DURATION  AFTER INITIAL QUICK SLIDE\r\n  const callNewAutoBillboard = () => {\r\n    if (autoPlayTimer.current) {\r\n      clearInterval(autoPlayTimer.current);\r\n    }\r\n    autoPlayTimer.current = setInterval(function () {\r\n      setSliderIndex((state) => (state + 1) % slides.length);\r\n    }, 16000);\r\n\r\n    if (cancelAutoBillboardTimer.current) {\r\n      clearTimeout(cancelAutoBillboardTimer.current);\r\n    }\r\n    cancelAutoBillboardTimer.current = setTimeout(function () {\r\n      if (autoPlayTimer.current) {\r\n        clearInterval(autoPlayTimer.current);\r\n      }\r\n    }, 192000);\r\n  };\r\n\r\n  ///\r\n  ///\r\n  ///START AUTOPLAY ON PAGE LOAD\r\n  useEffect(() => {\r\n    if (slides[1]) {\r\n      SliderAutoPlay();\r\n      changeBillboardAutoSlideDurationTimer.current = setTimeout(function () {\r\n        setsliderDuration(2000);\r\n        callNewAutoBillboard();\r\n      }, 6000);\r\n    }\r\n  }, [slides]);\r\n\r\n  ///\r\n  ///\r\n  /// WATCH FOR CHANGE IN [ShowBillboard] AND USE THAT CONTROL SLIDER DURATION(ON VIEW) AND CLEAR AUTOPLAY TIMER\r\n  useEffect(() => {\r\n    if (ShowBillboard) {\r\n      setsliderDuration(2000);\r\n      if (allowAutoPlay) {\r\n      } else {\r\n        if (autoPlayTimer.current) {\r\n          clearInterval(autoPlayTimer.current);\r\n        }\r\n      }\r\n    } else {\r\n    }\r\n  }, [ShowBillboard]);\r\n\r\n  ///\r\n  ///\r\n  ///  CHANGE [showBillboard == close]  EXTEND SLIDER DURATION(ON VIEW) AND  START AUTOPLAY\r\n  const ClickBillboardCloseStart = () => {\r\n    ClickBillboardClose();\r\n    setsliderDuration(2000);\r\n    if (allowAutoPlay) {\r\n    } else {\r\n      callNewAutoBillboard();\r\n    }\r\n  };\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// CHANGE SLIDER CONTENT USING  DOTS\r\n  const GotoDots = (clickedDot: number) => {\r\n    setSliderIndex((sliderIndex) => clickedDot);\r\n  };\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  return (\r\n    <Grid\r\n      item\r\n      onTouchStart={handleTouchStart}\r\n      onTouchMove={handleTouchMove}\r\n      xs={12}\r\n      style={{\r\n        position: \"relative\",\r\n        height: `${imageHeight}px`,\r\n        opacity: imageHeight === 0 ? 0 : 1,\r\n      }}\r\n    >\r\n      <ArrowBillboard\r\n        ShowBillboard={ShowBillboard}\r\n        direction=\"left\"\r\n        clickSlideprev={prevSlide}\r\n        clickSlidenext={nextSlide}\r\n        imageHeight={imageHeight}\r\n      />\r\n      {transitions((style, i) => (\r\n        <Grid key={i} xs={12} item>\r\n          <animated.img\r\n            ref={SlideimageRef}\r\n            onClick={ClickBillboardCloseStart}\r\n            onLoad={() => {\r\n              sliderFirstImageOnLoad(i);\r\n            }}\r\n            style={{\r\n              ...style,\r\n              cursor: \"pointer\",\r\n              width: \"100%\",\r\n              objectFit: \"cover\",\r\n              position: \"absolute\",\r\n              height: billboardDynamicHeight,\r\n              borderRadius: \"0px\",\r\n              borderBottomLeftRadius: ShowBillboard\r\n                ? \"0px\"\r\n                : matchPc\r\n                ? \"7px\"\r\n                : \"0px\",\r\n              borderBottomRightRadius: ShowBillboard\r\n                ? \"0px\"\r\n                : matchPc\r\n                ? \"7px\"\r\n                : \"0px\",\r\n              left: \"0\",\r\n              zIndex: 2,\r\n            }}\r\n            src={`/billboard_upload/${slides[i]}`}\r\n          />\r\n        </Grid>\r\n      ))}{\" \"}\r\n      <DotsBillboard\r\n        ShowBillboard={ShowBillboard}\r\n        GotoDots={GotoDots}\r\n        slides={slides}\r\n        activeSlide={sliderIndex}\r\n      />\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport const SliderBillboard = React.memo(SliderBillboardx);\r\n"]},"metadata":{},"sourceType":"module"}