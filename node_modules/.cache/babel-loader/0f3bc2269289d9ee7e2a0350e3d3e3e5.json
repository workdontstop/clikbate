{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\King\\\\Desktop\\\\batcave\\\\superstarztype\\\\src\\\\upload\\\\ImageTobeFiltered.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ImageTobeFilteredx({\n  filterImage,\n  index,\n  itemUploadRef,\n  setActivatefilterImage\n}) {\n  _s();\n\n  ///\n  ///\n  ///\n  const filterbaseimageRef = useRef(null);\n  const canvasRef = useRef(null);\n  const canvasRefdummy = useRef(null);\n\n  const closegate = () => {\n    if (index === 0) {////\n      ///addfilter();\n    } else {\n      setActivatefilterImage(false);\n    }\n  };\n\n  function blend(background, foreground, width, height, transform) {\n    var bottom = background.getImageData(0, 0, width, height);\n    var top = foreground.getImageData(0, 0, width, height);\n\n    for (var i = 0, size = top.data.length; i < size; i += 4) {\n      // red\n      top.data[i + 0] = transform(bottom.data[i + 0], top.data[i + 0]); // green\n\n      top.data[i + 1] = transform(bottom.data[i + 1], top.data[i + 1]); // blue\n\n      top.data[i + 2] = transform(bottom.data[i + 2], top.data[i + 2]); // the fourth slot is alpha. We don't need that (so skip by 4)\n    }\n\n    return top;\n  }\n\n  function FilterGradient(width, height, type) {\n    var ctx = canvasRefdummy.current.getContext(\"2d\");\n    canvasRefdummy.current.height = height;\n    canvasRefdummy.current.width = width;\n\n    if (type === \"jentle\") {\n      var gradient = ctx.createRadialGradient(width / 2, height / 2, 0, width / 2, height / 2, width * 0.8);\n    } else if (type === \"mint\") {\n      var gradient = ctx.createRadialGradient(width / 2, height / 43, 0, width / 33, height / 2, width * 0.6);\n    } else if (type === \"tentacion\") {\n      var gradient = ctx.createLinearGradient(width / 2, height / 2, 0, width / 2, height / 2, width * 0.4);\n    } else if (type === \"nebula\") {\n      var gradient = ctx.createRadialGradient(width / 2, height / 2, 0, width / 2, height / 2, width * 0.5);\n    } else if (type === \"juice\") {\n      var gradient = ctx.createRadialGradient(width / 2, height / 2, 0, width / 2, height / 2, width * 0.7);\n    } else if (type === \"futurama\" || type === \"kemi\") {\n      var gradient = ctx.createLinearGradient(width / 73.6, height / 33.4, 0, width / 2, height / 2, width * 0.6);\n    } else {}\n\n    if (type === \"jentle\") {\n      gradient.addColorStop(0, \"#2c1f1f\");\n      gradient.addColorStop(1, \"#272122\");\n    } else if (type === \"mint\") {\n      gradient.addColorStop(0, \"#315248\");\n      gradient.addColorStop(1, \"#212e2b\");\n    } else if (type === \"nebula\") {\n      gradient.addColorStop(0, \"#231f29\");\n      gradient.addColorStop(1, \"#15151d\");\n    } else if (type === \"juice\") {\n      gradient.addColorStop(0, \"#242424\");\n      gradient.addColorStop(1, \"#313131\");\n    } else if (type === \"futurama\") {\n      gradient.addColorStop(0.25, \"  #2b2127\");\n      gradient.addColorStop(0.5, \"#4e3457\");\n      gradient.addColorStop(0.75, \"#2e473c\");\n      gradient.addColorStop(1, \" #212527\");\n    } else if (type === \"kemi\") {\n      gradient.addColorStop(0, \"#214478\");\n      gradient.addColorStop(1, \"#28170b\");\n    } else if (type === \"tentacion\") {\n      gradient.addColorStop(0, \"#c5952d\");\n      gradient.addColorStop(1, \"#84e613\");\n    } else {}\n\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, 0, width, height);\n    return ctx;\n  }\n\n  const ApplyImageFilter = type => {\n    //////////////////INITIALIZE  CANVAS\n    const previewFileReadimage = new Image();\n    previewFileReadimage.src = itemUploadRef.current[index].src;\n\n    previewFileReadimage.onload = function () {\n      const ctx = canvasRef.current.getContext(\"2d\");\n\n      if (previewFileReadimage.naturalWidth > previewFileReadimage.naturalHeight) {\n        var widthx = window.innerWidth / 2.2;\n        var scalex = widthx / previewFileReadimage.naturalWidth;\n        var heightx = previewFileReadimage.naturalHeight * scalex;\n        var width = window.innerWidth * 3;\n        var scale = width / previewFileReadimage.naturalWidth;\n        var height = previewFileReadimage.naturalHeight * scale;\n      } else {\n        var heightx = window.innerHeight / 1.2;\n        var scalex = heightx / previewFileReadimage.naturalHeight;\n        var widthx = previewFileReadimage.naturalWidth * scalex;\n        var height = window.innerHeight * 3;\n        var scale = height / previewFileReadimage.naturalHeight;\n        var width = previewFileReadimage.naturalWidth * scale;\n      }\n\n      canvasRef.current.height = height;\n      canvasRef.current.width = width; //////////////////INITIALIZE  CANVAS\n\n      requestAnimationFrame(() => {\n        //////////////////CSS EDIT IMAGE WITH CTX.FILTER\n        if (type === \"lift\") {\n          ctx.filter = \"contrast(1.1) brightness(1.04) blur(0px) saturate(120%)\";\n        } else if (type === \"floyd\") {\n          ctx.filter = \"contrast(1.4) brightness(1.04) saturate(108%)\";\n        } else if (type === \"jentle\") {\n          ctx.filter = \"contrast(1.2) brightness(0.85) hue-rotate(20deg) saturate(110%) \";\n        } else if (type === \"mint\") {\n          ctx.filter = \"contrast(1.2) brightness(1.05)  \";\n        } else if (type === \"nebula\") {\n          ctx.filter = \"contrast(1.3) brightness(1.15)\";\n        } else if (type === \"juice\") {\n          ctx.filter = \"contrast(1.22) brightness(1) saturate(180%) blur(2px)\";\n        } else if (type === \"futurama\") {\n          ctx.filter = \"contrast(1.2) brightness(1) saturate(140%) \";\n        } else if (type === \"kemi\") {\n          ctx.filter = \"contrast(1.1) brightness(1.05) saturate(105%)  hue-rotate(2deg)\";\n        } else if (type === \"tentacion\") {\n          ctx.filter = \"contrast(1.3) brightness(1.04) saturate(108%)\";\n        } else {} //////////////////CSS EDIT IMAGE WITH CTX.FILTER\n\n\n        ctx.drawImage(previewFileReadimage, 0, 0, canvasRef.current.width, canvasRef.current.height); //////////////////////VIGNETTE\n\n        var w = canvasRef.current.width;\n        var h = canvasRef.current.height;\n\n        if (type === \"floyd\") {\n          var gradient = ctx.createRadialGradient(w / 2, h / 3, 0, w / 2, h / 3, w * 0.6);\n          gradient.addColorStop(0, \"rgba(255, 255, 255,0.0)\");\n          gradient.addColorStop(1, \"rgba(100,100,100,0.2)\");\n          ctx.fillStyle = gradient;\n          ctx.fillRect(0, 0, width, height);\n        } else if (type === \"lift\" || type === \"mint\" || type === \"juice\") {\n          var gradient = ctx.createRadialGradient(w / 2, h / 3, 0, w / 2, h / 3, w * 0.66);\n          gradient.addColorStop(0, \"rgba(255, 255, 255,0.05)\");\n          gradient.addColorStop(1, \"rgba(255, 255, 255,0.05)\");\n          ctx.fillStyle = gradient;\n          ctx.fillRect(0, 0, width, height);\n        } else if (type === \"nebula\") {\n          var gradient = ctx.createRadialGradient(w / 2, h / 2, 0, w / 2, h / 2, w * 0.8);\n          gradient.addColorStop(0, \"rgba(255, 255, 255,0.02)\");\n          gradient.addColorStop(1, \"rgba(0,0,0,0.3)\");\n          ctx.fillStyle = gradient;\n          ctx.fillRect(0, 0, width, height);\n        } else if (type === \"futurama\") {\n          var gradient = ctx.createRadialGradient(w / 2, h / 2, 0, w / 2, h / 2, w * 0.68);\n          gradient.addColorStop(0, \"rgb(163, 218, 37,0.08)\");\n          gradient.addColorStop(1, \"rgb(27, 194, 236,0.08)\");\n          ctx.fillStyle = gradient;\n          ctx.fillRect(0, 0, width, height);\n        } else if (type === \"tentacion\") {\n          var gradient = ctx.createRadialGradient(w / 2, h / 2, 0, w / 2, h / 2, w * 0.68);\n          gradient.addColorStop(0, \"#cdd4bb56\");\n          gradient.addColorStop(1, \"#c5c0b82e\");\n          ctx.fillStyle = gradient;\n          ctx.fillRect(0, 0, width, height);\n        } else {} //////////////////////VIGNETTE\n        ////////////////// /////// GLOBALCOMPOSITEOPERATION\n\n\n        if (type === \"lift\") {\n          ////////////composition\n          ctx.globalCompositeOperation = \"overlay\";\n          ctx.fillStyle = \"rgba(100, 100, 100,0.07)\";\n          ctx.fillRect(0, 0, width, height); ////////////composition\n        } else if (type === \"floyd\") {\n          ////////////composition\n          ctx.globalCompositeOperation = \"overlay\";\n          ctx.fillStyle = \"rgba(110,93,90,0.8)\";\n          ctx.fillRect(0, 0, width, height); ////////////composition\n        } else if (type === \"jentle\") {\n          ////////////composition\n          ctx.globalCompositeOperation = \"overlay\";\n          ctx.fillStyle = \"#d3b5b5\";\n          ctx.fillRect(0, 0, width, height); ////////////composition\n        } else if (type === \"mint\") {\n          ////////////composition\n          ctx.globalCompositeOperation = \"overlay\";\n          ctx.fillStyle = \"#3b474619\";\n          ctx.fillRect(0, 0, width, height); ////////////composition\n        } else if (type === \"nebula\") {\n          ////////////composition\n          ctx.globalCompositeOperation = \"soft-light\";\n          ctx.fillStyle = \"#6e5a6acc\";\n          ctx.fillRect(0, 0, width, height); ////////////composition\n        } else if (type === \"juice\") {\n          ////////////composition\n          ctx.globalCompositeOperation = \"overlay\";\n          ctx.fillStyle = \"#dcecf02b\";\n          ctx.fillRect(0, 0, width, height); ////////////composition\n        } else if (type === \"futurama\") {\n          ////////////composition\n          ctx.globalCompositeOperation = \"screen\";\n          ctx.fillStyle = \"#275fa021\";\n          ctx.fillRect(0, 0, width, height); ////////////composition\n        } else if (type === \"kemi\") {\n          ////////////composition\n          ctx.globalCompositeOperation = \"screen\";\n          ctx.fillStyle = \"#9eaebe1f\";\n          ctx.fillRect(0, 0, width, height); ////////////composition\n        } else if (type === \"tentacion\") {\n          ////////////composition\n          ctx.globalCompositeOperation = \"screen\";\n          ctx.fillStyle = \"#ebf5601f\";\n          ctx.fillRect(0, 0, width, height); ////////////composition\n        } else {} ////////////////// /////// GLOBALCOMPOSITEOPERATION\n        ////////////////////GRADIENT BLENDING\n\n\n        if (type === \"jentle\" || type === \"mint\" || type === \"nebula\" || type === \"juice\" || type === \"futurama\" || type === \"kemi\") {\n          var gradient = FilterGradient(width, height, type);\n          var screen = blend(ctx, gradient, width, height, function (bottomPixel, topPixel) {\n            return 255 - (255 - topPixel) * (255 - bottomPixel) / 255;\n          });\n          ctx.putImageData(screen, 0, 0);\n        } ////////////////////GRADIENT BLENDING\n\n      });\n      canvasRef.current.style.width = `${widthx}px`;\n      canvasRef.current.style.height = `${heightx}px`;\n    };\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: itemUploadRef.current[index] ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          ApplyImageFilter(\"lift\");\n        },\n        children: \"lift\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          ApplyImageFilter(\"floyd\");\n        },\n        children: [\" \", \"floyd\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          ApplyImageFilter(\"jentle\");\n        },\n        children: [\" \", \"jentle\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          ApplyImageFilter(\"mint\");\n        },\n        children: [\" \", \"mint\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          ApplyImageFilter(\"nebula\");\n        },\n        children: [\" \", \"nebula\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          ApplyImageFilter(\"juice\");\n        },\n        children: [\" \", \"juice\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          ApplyImageFilter(\"futurama\");\n        },\n        children: [\" \", \"futurama\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          ApplyImageFilter(\"kemi\");\n        },\n        children: [\" \", \"kemi\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          ApplyImageFilter(\"tentacion\");\n        },\n        children: [\" \", \"tentacion\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        id: itemUploadRef.current[index],\n        ref: filterbaseimageRef,\n        onClick: closegate,\n        src: itemUploadRef.current ? itemUploadRef.current[index].src : null,\n        style: {\n          width: \"30%\",\n          height: \"auto\",\n          position: \"relative\",\n          margin: \"auto\",\n          marginRight: index === 0 ? \"20px\" : \"0px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          padding: \"0px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRefdummy,\n        style: {\n          padding: \"0px\",\n          display: \"none\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : null\n  }, void 0, false);\n}\n\n_s(ImageTobeFilteredx, \"ZWhJm1DdZVPEYmfxvg5uQgXY6wQ=\");\n\n_c = ImageTobeFilteredx;\nexport const ImageTobeFiltered = /*#__PURE__*/React.memo(ImageTobeFilteredx);\n_c2 = ImageTobeFiltered;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ImageTobeFilteredx\");\n$RefreshReg$(_c2, \"ImageTobeFiltered\");","map":{"version":3,"sources":["C:/Users/King/Desktop/batcave/superstarztype/src/upload/ImageTobeFiltered.tsx"],"names":["React","useRef","ImageTobeFilteredx","filterImage","index","itemUploadRef","setActivatefilterImage","filterbaseimageRef","canvasRef","canvasRefdummy","closegate","blend","background","foreground","width","height","transform","bottom","getImageData","top","i","size","data","length","FilterGradient","type","ctx","current","getContext","gradient","createRadialGradient","createLinearGradient","addColorStop","fillStyle","fillRect","ApplyImageFilter","previewFileReadimage","Image","src","onload","naturalWidth","naturalHeight","widthx","window","innerWidth","scalex","heightx","scale","innerHeight","requestAnimationFrame","filter","drawImage","w","h","globalCompositeOperation","screen","bottomPixel","topPixel","putImageData","style","position","margin","marginRight","padding","display","ImageTobeFiltered","memo"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\r\n\r\nfunction ImageTobeFilteredx({\r\n  filterImage,\r\n  index,\r\n  itemUploadRef,\r\n  setActivatefilterImage,\r\n}: any): JSX.Element {\r\n  ///\r\n  ///\r\n  ///\r\n  const filterbaseimageRef: any = useRef(null);\r\n\r\n  const canvasRef: any = useRef(null);\r\n\r\n  const canvasRefdummy: any = useRef(null);\r\n\r\n  const closegate = () => {\r\n    if (index === 0) {\r\n      ////\r\n      ///addfilter();\r\n    } else {\r\n      setActivatefilterImage(false);\r\n    }\r\n  };\r\n\r\n  function blend(\r\n    background: any,\r\n    foreground: any,\r\n    width: any,\r\n    height: any,\r\n    transform: any\r\n  ) {\r\n    var bottom = background.getImageData(0, 0, width, height);\r\n    var top = foreground.getImageData(0, 0, width, height);\r\n    for (var i = 0, size = top.data.length; i < size; i += 4) {\r\n      // red\r\n      top.data[i + 0] = transform(bottom.data[i + 0], top.data[i + 0]);\r\n      // green\r\n      top.data[i + 1] = transform(bottom.data[i + 1], top.data[i + 1]);\r\n      // blue\r\n      top.data[i + 2] = transform(bottom.data[i + 2], top.data[i + 2]);\r\n      // the fourth slot is alpha. We don't need that (so skip by 4)\r\n    }\r\n\r\n    return top;\r\n  }\r\n\r\n  function FilterGradient(width: any, height: any, type: string) {\r\n    var ctx = canvasRefdummy.current.getContext(\"2d\");\r\n    canvasRefdummy.current.height = height;\r\n    canvasRefdummy.current.width = width;\r\n\r\n    if (type === \"jentle\") {\r\n      var gradient = ctx.createRadialGradient(\r\n        width / 2,\r\n        height / 2,\r\n        0,\r\n        width / 2,\r\n        height / 2,\r\n        width * 0.8\r\n      );\r\n    } else if (type === \"mint\") {\r\n      var gradient = ctx.createRadialGradient(\r\n        width / 2,\r\n        height / 43,\r\n        0,\r\n        width / 33,\r\n        height / 2,\r\n        width * 0.6\r\n      );\r\n    } else if (type === \"tentacion\") {\r\n      var gradient = ctx.createLinearGradient(\r\n        width / 2,\r\n        height / 2,\r\n        0,\r\n        width / 2,\r\n        height / 2,\r\n        width * 0.4\r\n      );\r\n    } else if (type === \"nebula\") {\r\n      var gradient = ctx.createRadialGradient(\r\n        width / 2,\r\n        height / 2,\r\n        0,\r\n        width / 2,\r\n        height / 2,\r\n        width * 0.5\r\n      );\r\n    } else if (type === \"juice\") {\r\n      var gradient = ctx.createRadialGradient(\r\n        width / 2,\r\n        height / 2,\r\n        0,\r\n        width / 2,\r\n        height / 2,\r\n        width * 0.7\r\n      );\r\n    } else if (type === \"futurama\" || type === \"kemi\") {\r\n      var gradient = ctx.createLinearGradient(\r\n        width / 73.6,\r\n        height / 33.4,\r\n        0,\r\n        width / 2,\r\n        height / 2,\r\n        width * 0.6\r\n      );\r\n    } else {\r\n    }\r\n\r\n    if (type === \"jentle\") {\r\n      gradient.addColorStop(0, \"#2c1f1f\");\r\n      gradient.addColorStop(1, \"#272122\");\r\n    } else if (type === \"mint\") {\r\n      gradient.addColorStop(0, \"#315248\");\r\n      gradient.addColorStop(1, \"#212e2b\");\r\n    } else if (type === \"nebula\") {\r\n      gradient.addColorStop(0, \"#231f29\");\r\n      gradient.addColorStop(1, \"#15151d\");\r\n    } else if (type === \"juice\") {\r\n      gradient.addColorStop(0, \"#242424\");\r\n      gradient.addColorStop(1, \"#313131\");\r\n    } else if (type === \"futurama\") {\r\n      gradient.addColorStop(0.25, \"  #2b2127\");\r\n      gradient.addColorStop(0.5, \"#4e3457\");\r\n      gradient.addColorStop(0.75, \"#2e473c\");\r\n      gradient.addColorStop(1, \" #212527\");\r\n    } else if (type === \"kemi\") {\r\n      gradient.addColorStop(0, \"#214478\");\r\n      gradient.addColorStop(1, \"#28170b\");\r\n    } else if (type === \"tentacion\") {\r\n      gradient.addColorStop(0, \"#c5952d\");\r\n      gradient.addColorStop(1, \"#84e613\");\r\n    } else {\r\n    }\r\n\r\n    ctx.fillStyle = gradient;\r\n\r\n    ctx.fillRect(0, 0, width, height);\r\n\r\n    return ctx;\r\n  }\r\n\r\n  const ApplyImageFilter = (type: string) => {\r\n    //////////////////INITIALIZE  CANVAS\r\n    const previewFileReadimage = new Image();\r\n    previewFileReadimage.src = itemUploadRef.current[index].src;\r\n    previewFileReadimage.onload = function () {\r\n      const ctx = canvasRef.current.getContext(\"2d\");\r\n      if (\r\n        previewFileReadimage.naturalWidth > previewFileReadimage.naturalHeight\r\n      ) {\r\n        var widthx = window.innerWidth / 2.2;\r\n        var scalex = widthx / previewFileReadimage.naturalWidth;\r\n        var heightx = previewFileReadimage.naturalHeight * scalex;\r\n        var width = window.innerWidth * 3;\r\n        var scale = width / previewFileReadimage.naturalWidth;\r\n        var height = previewFileReadimage.naturalHeight * scale;\r\n      } else {\r\n        var heightx = window.innerHeight / 1.2;\r\n        var scalex = heightx / previewFileReadimage.naturalHeight;\r\n        var widthx = previewFileReadimage.naturalWidth * scalex;\r\n        var height = window.innerHeight * 3;\r\n        var scale = height / previewFileReadimage.naturalHeight;\r\n        var width = previewFileReadimage.naturalWidth * scale;\r\n      }\r\n\r\n      canvasRef.current.height = height;\r\n      canvasRef.current.width = width;\r\n      //////////////////INITIALIZE  CANVAS\r\n\r\n      requestAnimationFrame(() => {\r\n        //////////////////CSS EDIT IMAGE WITH CTX.FILTER\r\n        if (type === \"lift\") {\r\n          ctx.filter =\r\n            \"contrast(1.1) brightness(1.04) blur(0px) saturate(120%)\";\r\n        } else if (type === \"floyd\") {\r\n          ctx.filter = \"contrast(1.4) brightness(1.04) saturate(108%)\";\r\n        } else if (type === \"jentle\") {\r\n          ctx.filter =\r\n            \"contrast(1.2) brightness(0.85) hue-rotate(20deg) saturate(110%) \";\r\n        } else if (type === \"mint\") {\r\n          ctx.filter = \"contrast(1.2) brightness(1.05)  \";\r\n        } else if (type === \"nebula\") {\r\n          ctx.filter = \"contrast(1.3) brightness(1.15)\";\r\n        } else if (type === \"juice\") {\r\n          ctx.filter = \"contrast(1.22) brightness(1) saturate(180%) blur(2px)\";\r\n        } else if (type === \"futurama\") {\r\n          ctx.filter = \"contrast(1.2) brightness(1) saturate(140%) \";\r\n        } else if (type === \"kemi\") {\r\n          ctx.filter =\r\n            \"contrast(1.1) brightness(1.05) saturate(105%)  hue-rotate(2deg)\";\r\n        } else if (type === \"tentacion\") {\r\n          ctx.filter = \"contrast(1.3) brightness(1.04) saturate(108%)\";\r\n        } else {\r\n        }\r\n        //////////////////CSS EDIT IMAGE WITH CTX.FILTER\r\n\r\n        ctx.drawImage(\r\n          previewFileReadimage,\r\n          0,\r\n          0,\r\n          canvasRef.current.width,\r\n          canvasRef.current.height\r\n        );\r\n\r\n        //////////////////////VIGNETTE\r\n        var w = canvasRef.current.width;\r\n        var h = canvasRef.current.height;\r\n        if (type === \"floyd\") {\r\n          var gradient = ctx.createRadialGradient(\r\n            w / 2,\r\n            h / 3,\r\n            0,\r\n            w / 2,\r\n            h / 3,\r\n            w * 0.6\r\n          );\r\n\r\n          gradient.addColorStop(0, \"rgba(255, 255, 255,0.0)\");\r\n          gradient.addColorStop(1, \"rgba(100,100,100,0.2)\");\r\n\r\n          ctx.fillStyle = gradient;\r\n          ctx.fillRect(0, 0, width, height);\r\n        } else if (type === \"lift\" || type === \"mint\" || type === \"juice\") {\r\n          var gradient = ctx.createRadialGradient(\r\n            w / 2,\r\n            h / 3,\r\n            0,\r\n            w / 2,\r\n            h / 3,\r\n            w * 0.66\r\n          );\r\n\r\n          gradient.addColorStop(0, \"rgba(255, 255, 255,0.05)\");\r\n          gradient.addColorStop(1, \"rgba(255, 255, 255,0.05)\");\r\n\r\n          ctx.fillStyle = gradient;\r\n          ctx.fillRect(0, 0, width, height);\r\n        } else if (type === \"nebula\") {\r\n          var gradient = ctx.createRadialGradient(\r\n            w / 2,\r\n            h / 2,\r\n            0,\r\n            w / 2,\r\n            h / 2,\r\n            w * 0.8\r\n          );\r\n\r\n          gradient.addColorStop(0, \"rgba(255, 255, 255,0.02)\");\r\n          gradient.addColorStop(1, \"rgba(0,0,0,0.3)\");\r\n\r\n          ctx.fillStyle = gradient;\r\n          ctx.fillRect(0, 0, width, height);\r\n        } else if (type === \"futurama\") {\r\n          var gradient = ctx.createRadialGradient(\r\n            w / 2,\r\n            h / 2,\r\n            0,\r\n            w / 2,\r\n            h / 2,\r\n            w * 0.68\r\n          );\r\n\r\n          gradient.addColorStop(0, \"rgb(163, 218, 37,0.08)\");\r\n          gradient.addColorStop(1, \"rgb(27, 194, 236,0.08)\");\r\n\r\n          ctx.fillStyle = gradient;\r\n          ctx.fillRect(0, 0, width, height);\r\n        } else if (type === \"tentacion\") {\r\n          var gradient = ctx.createRadialGradient(\r\n            w / 2,\r\n            h / 2,\r\n            0,\r\n            w / 2,\r\n            h / 2,\r\n            w * 0.68\r\n          );\r\n\r\n          gradient.addColorStop(0, \"#cdd4bb56\");\r\n          gradient.addColorStop(1, \"#c5c0b82e\");\r\n\r\n          ctx.fillStyle = gradient;\r\n          ctx.fillRect(0, 0, width, height);\r\n        } else {\r\n        }\r\n        //////////////////////VIGNETTE\r\n\r\n        ////////////////// /////// GLOBALCOMPOSITEOPERATION\r\n        if (type === \"lift\") {\r\n          ////////////composition\r\n          ctx.globalCompositeOperation = \"overlay\";\r\n          ctx.fillStyle = \"rgba(100, 100, 100,0.07)\";\r\n          ctx.fillRect(0, 0, width, height);\r\n          ////////////composition\r\n        } else if (type === \"floyd\") {\r\n          ////////////composition\r\n          ctx.globalCompositeOperation = \"overlay\";\r\n          ctx.fillStyle = \"rgba(110,93,90,0.8)\";\r\n          ctx.fillRect(0, 0, width, height);\r\n          ////////////composition\r\n        } else if (type === \"jentle\") {\r\n          ////////////composition\r\n          ctx.globalCompositeOperation = \"overlay\";\r\n          ctx.fillStyle = \"#d3b5b5\";\r\n          ctx.fillRect(0, 0, width, height);\r\n          ////////////composition\r\n        } else if (type === \"mint\") {\r\n          ////////////composition\r\n          ctx.globalCompositeOperation = \"overlay\";\r\n          ctx.fillStyle = \"#3b474619\";\r\n          ctx.fillRect(0, 0, width, height);\r\n          ////////////composition\r\n        } else if (type === \"nebula\") {\r\n          ////////////composition\r\n          ctx.globalCompositeOperation = \"soft-light\";\r\n          ctx.fillStyle = \"#6e5a6acc\";\r\n          ctx.fillRect(0, 0, width, height);\r\n          ////////////composition\r\n        } else if (type === \"juice\") {\r\n          ////////////composition\r\n          ctx.globalCompositeOperation = \"overlay\";\r\n          ctx.fillStyle = \"#dcecf02b\";\r\n          ctx.fillRect(0, 0, width, height);\r\n          ////////////composition\r\n        } else if (type === \"futurama\") {\r\n          ////////////composition\r\n          ctx.globalCompositeOperation = \"screen\";\r\n          ctx.fillStyle = \"#275fa021\";\r\n          ctx.fillRect(0, 0, width, height);\r\n          ////////////composition\r\n        } else if (type === \"kemi\") {\r\n          ////////////composition\r\n          ctx.globalCompositeOperation = \"screen\";\r\n          ctx.fillStyle = \"#9eaebe1f\";\r\n          ctx.fillRect(0, 0, width, height);\r\n          ////////////composition\r\n        } else if (type === \"tentacion\") {\r\n          ////////////composition\r\n          ctx.globalCompositeOperation = \"screen\";\r\n          ctx.fillStyle = \"#ebf5601f\";\r\n          ctx.fillRect(0, 0, width, height);\r\n          ////////////composition\r\n        } else {\r\n        }\r\n        ////////////////// /////// GLOBALCOMPOSITEOPERATION\r\n\r\n        ////////////////////GRADIENT BLENDING\r\n        if (\r\n          type === \"jentle\" ||\r\n          type === \"mint\" ||\r\n          type === \"nebula\" ||\r\n          type === \"juice\" ||\r\n          type === \"futurama\" ||\r\n          type === \"kemi\"\r\n        ) {\r\n          var gradient = FilterGradient(width, height, type);\r\n          var screen = blend(\r\n            ctx,\r\n            gradient,\r\n            width,\r\n            height,\r\n            function (bottomPixel: any, topPixel: any) {\r\n              return 255 - ((255 - topPixel) * (255 - bottomPixel)) / 255;\r\n            }\r\n          );\r\n          ctx.putImageData(screen, 0, 0);\r\n        }\r\n        ////////////////////GRADIENT BLENDING\r\n      });\r\n\r\n      canvasRef.current.style.width = `${widthx}px`;\r\n      canvasRef.current.style.height = `${heightx}px`;\r\n    };\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {itemUploadRef.current[index] ? (\r\n        <>\r\n          {\" \"}\r\n          <button\r\n            onClick={() => {\r\n              ApplyImageFilter(\"lift\");\r\n            }}\r\n          >\r\n            lift\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              ApplyImageFilter(\"floyd\");\r\n            }}\r\n          >\r\n            {\" \"}\r\n            floyd{\" \"}\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              ApplyImageFilter(\"jentle\");\r\n            }}\r\n          >\r\n            {\" \"}\r\n            jentle{\" \"}\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              ApplyImageFilter(\"mint\");\r\n            }}\r\n          >\r\n            {\" \"}\r\n            mint{\" \"}\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              ApplyImageFilter(\"nebula\");\r\n            }}\r\n          >\r\n            {\" \"}\r\n            nebula{\" \"}\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              ApplyImageFilter(\"juice\");\r\n            }}\r\n          >\r\n            {\" \"}\r\n            juice{\" \"}\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              ApplyImageFilter(\"futurama\");\r\n            }}\r\n          >\r\n            {\" \"}\r\n            futurama{\" \"}\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              ApplyImageFilter(\"kemi\");\r\n            }}\r\n          >\r\n            {\" \"}\r\n            kemi{\" \"}\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              ApplyImageFilter(\"tentacion\");\r\n            }}\r\n          >\r\n            {\" \"}\r\n            tentacion{\" \"}\r\n          </button>\r\n          <img\r\n            id={itemUploadRef.current[index]}\r\n            ref={filterbaseimageRef}\r\n            onClick={closegate}\r\n            src={\r\n              itemUploadRef.current ? itemUploadRef.current[index].src : null\r\n            }\r\n            style={{\r\n              width: \"30%\",\r\n              height: \"auto\",\r\n              position: \"relative\",\r\n              margin: \"auto\",\r\n              marginRight: index === 0 ? \"20px\" : \"0px\",\r\n            }}\r\n          />\r\n          <canvas\r\n            ref={canvasRef}\r\n            style={{\r\n              padding: \"0px\",\r\n            }}\r\n          />\r\n          <canvas\r\n            ref={canvasRefdummy}\r\n            style={{\r\n              padding: \"0px\",\r\n              display: \"none\",\r\n            }}\r\n          />\r\n        </>\r\n      ) : null}\r\n    </>\r\n  );\r\n}\r\n\r\nexport const ImageTobeFiltered = React.memo(ImageTobeFilteredx);\r\n"]},"metadata":{},"sourceType":"module"}