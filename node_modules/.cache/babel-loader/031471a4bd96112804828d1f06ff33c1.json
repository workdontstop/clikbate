{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/King/Desktop/batcave/super/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/King/Desktop/batcave/super/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"C:/Users/King/Desktop/batcave/super/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/King/Desktop/batcave/super/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"C:/Users/King/Desktop/batcave/super/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useRef,useState,useEffect,useLayoutEffect,useCallback}from\"react\";import{matchTablet,matchMobile}from\"../DetectDevice\";import{Grid}from\"@material-ui/core\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PreviewCanvasCropAllx(_ref){var setwaitONLOAD=_ref.setwaitONLOAD,cropCanvasRef=_ref.cropCanvasRef,image=_ref.image,getpreviewFixedWidth=_ref.getpreviewFixedWidth,index=_ref.index,CropImageHolder=_ref.CropImageHolder,cropheight=_ref.cropheight,cropwidth=_ref.cropwidth,BoxCropActivated=_ref.BoxCropActivated,hdcanvasvalue=_ref.hdcanvasvalue,SourceWidthForCropX=_ref.SourceWidthForCropX,SourceWidthForCropY=_ref.SourceWidthForCropY,WideImageCheck=_ref.WideImageCheck,crop=_ref.crop,getCropHeight=_ref.getCropHeight,canvasToimage=_ref.canvasToimage,refWithimageData=_ref.refWithimageData,addUploadItemsRef=_ref.addUploadItemsRef,itemUploadRef=_ref.itemUploadRef,itemUploadRefThumb=_ref.itemUploadRefThumb,itemUploadRefSD=_ref.itemUploadRefSD,setsuperCropLoadFade=_ref.setsuperCropLoadFade,length=_ref.length,filterImage=_ref.filterImage,setfilterImage=_ref.setfilterImage,setallowFilters=_ref.setallowFilters,allowCropAllCanvas=_ref.allowCropAllCanvas,cutOffLoader=_ref.cutOffLoader,setcutOffLoader=_ref.setcutOffLoader,addUploadItemsRefThumb=_ref.addUploadItemsRefThumb,addUploadItemsRefSD=_ref.addUploadItemsRefSD,zoom=_ref.zoom,type=_ref.type,setwaitcropall=_ref.setwaitcropall,waitcropall=_ref.waitcropall;var _useSelector=useSelector(function(state){return _objectSpread({},state.GlobalReducer);}),darkmode=_useSelector.darkmode;var darkmodeReducer=darkmode;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),SDquality=_useState2[0],setSDquality=_useState2[1];var canvasRef=useRef(null);var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),previewFilehold=_useState4[0],setpreviewFilehold=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),previewCSSHeight=_useState6[0],setpreviewCSSHeight=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),cropCanvasWidth=_useState8[0],setcropCanvasWidth=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),cropCanvasHeight=_useState10[0],setcropCanvasHeight=_useState10[1];var Timer1=useRef(null);var Timer2=useRef(null);var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),imageWidthWithAspectRatio=_useState12[0],setimageWidthWithAspectRatio=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),imageWidthWithAspectRatioxx=_useState14[0],setimageWidthWithAspectRatioxx=_useState14[1];var getSDquality=useRef(null);useEffect(function(){if(getSDquality.current){if(matchTablet||matchMobile){setSDquality(getSDquality.current.clientWidth);}else{setSDquality(getSDquality.current.clientHeight);}}},[]);useLayoutEffect(function(){var previewFileReadimage=new Image();previewFileReadimage.src=image;previewFileReadimage.onload=function(){if(cropCanvasRef.current){setpreviewFilehold(previewFileReadimage);var cropH,cropW;if(CropImageHolder){cropW=cropCanvasRef.current.width;cropH=cropCanvasRef.current.height;}else{cropW=previewFileReadimage.naturalWidth;cropH=previewFileReadimage.naturalHeight;}var quality;type==1?quality=1024:type==2?quality=750:quality=matchMobile?150:300;if(cropW>cropH){var Ratio1500=cropW/quality;var height1500=cropH/Ratio1500;setcropCanvasWidth(quality);setcropCanvasHeight(height1500);}else{if(cropW*2>cropH){}else{if(matchMobile){quality=quality*2;}}var Ratio1500=cropH/quality;var width1500=cropW/Ratio1500;setcropCanvasWidth(width1500);setcropCanvasHeight(quality);}var CropAspectRatio=cropwidth/cropheight;var newheight=getpreviewFixedWidth/CropAspectRatio;setpreviewCSSHeight(newheight);var AspectRatioPrevHeightandWidth=previewFileReadimage.naturalHeight/previewFileReadimage.naturalWidth;var newWidth=cropCanvasHeight/AspectRatioPrevHeightandWidth;setimageWidthWithAspectRatio(newWidth);var AspectRatioPrevHeightandWidthx=cropCanvasWidth/cropCanvasHeight;var newWidthx=getpreviewFixedWidth/AspectRatioPrevHeightandWidthx;setimageWidthWithAspectRatioxx(newWidthx);}};},[SDquality,image,BoxCropActivated,previewCSSHeight,getpreviewFixedWidth,cropCanvasRef,CropImageHolder,cropwidth,cropheight,crop]);///\n///\n///\n///\nvar wait=useCallback(function(){setwaitONLOAD(false);setsuperCropLoadFade(false);setallowFilters(true);},[]);///\n///\n///\n///  CROPED CANVAS CONVER TO IMAGE\nvar convertCroppedCanvasToImage=useCallback(function(){setsuperCropLoadFade(true);if(type===1){itemUploadRef.current[index].src=canvasRef.current.toDataURL();///////////////////////////////\nvar newArraa=_toConsumableArray(filterImage);newArraa[index]=canvasRef.current.toDataURL();setfilterImage(newArraa);///////////////////////////////\nif(length-1===index){wait();}}else if(type===2){itemUploadRefSD.current[index].src=canvasRef.current.toDataURL();if(length-1===index){wait();}}else{itemUploadRefThumb.current[index].src=canvasRef.current.toDataURL();if(length-1===index){wait();}}},[canvasToimage,itemUploadRef,itemUploadRefThumb,itemUploadRefSD,canvasRef]);///\n///\n///\n///  DRAW CANVAS ON CROP COMPLETE CLICK\nvar drawcrop=useCallback(function(){if(previewFilehold&&canvasRef.current){var ctx=canvasRef.current.getContext(\"2d\");canvasRef.current.height=cropCanvasHeight;canvasRef.current.width=cropCanvasWidth;if(BoxCropActivated){var CropAspectRatio=cropCanvasWidth/cropCanvasHeight;var newheightq=getpreviewFixedWidth/CropAspectRatio;if(previewFilehold.naturalWidth>previewFilehold.naturalHeight){var zoomINBOXWide=previewFilehold.naturalWidth/previewFilehold.naturalHeight;var AspectRatioPrevHeightandWidthxWideCRop=previewFilehold.naturalWidth/previewFilehold.naturalHeight;var boxWIDEheight=cropCanvasWidth*zoomINBOXWide/AspectRatioPrevHeightandWidthxWideCRop;var centerpreview=canvasRef.current.width/2-cropCanvasWidth*zoomINBOXWide/2;var RatiofromOriginalandfixedHeight=previewFilehold.naturalHeight/cropCanvasWidth*zoomINBOXWide;var SourceWidthForCropXx=previewFilehold.naturalWidth/RatiofromOriginalandfixedHeight;var dragDistanceX=cropCanvasWidth*zoomINBOXWide*zoom-cropCanvasWidth;var AspectRatioPrevHeightandWidthxWideCRopx=previewFilehold.naturalWidth/previewFilehold.naturalHeight;var boxWIDEheightx=cropCanvasWidth*zoomINBOXWide*zoom/AspectRatioPrevHeightandWidthxWideCRopx;var dragDistanceY=boxWIDEheightx-cropCanvasHeight;var cropXprev=crop.x;cropXprev=cropXprev*cropCanvasWidth*zoomINBOXWide/SourceWidthForCropX;if(cropXprev<-dragDistanceX){cropXprev=-dragDistanceX;}else if(cropXprev>0){cropXprev=0;}else{}var cropYprev=crop.y;cropYprev=cropYprev*cropCanvasWidth*zoomINBOXWide/SourceWidthForCropX;if(cropYprev<-dragDistanceY){cropYprev=-dragDistanceY;}else if(cropYprev>0){cropYprev=0;}else{}////////////////////\nrequestAnimationFrame(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:ctx.drawImage(previewFilehold,WideImageCheck?cropXprev:0,WideImageCheck?cropYprev:0,cropCanvasWidth*zoomINBOXWide*zoom,boxWIDEheight*zoom);try{convertCroppedCanvasToImage();}catch(_unused){console.log(\"previewcanvascropall cropper  error\");}case 2:case\"end\":return _context.stop();}}},_callee);})));////////////////////\n}else{var AspectRatioPrevHeightandWidthxBox=previewFilehold.naturalWidth/previewFilehold.naturalHeight;var boxedHeight=cropCanvasWidth/AspectRatioPrevHeightandWidthxBox;var AspectRatioPrevHeightandWidthxBoxx=previewFilehold.naturalWidth/previewFilehold.naturalHeight;var boxedHeightx=cropCanvasWidth*zoom/AspectRatioPrevHeightandWidthxBoxx;var dragDistanceX=cropCanvasWidth*zoom-cropCanvasWidth;var dragDistanceY=boxedHeightx-cropCanvasHeight;var cropYprev=crop.y;cropYprev=cropYprev*boxedHeight/SourceWidthForCropY;if(cropYprev<-dragDistanceY){cropYprev=-dragDistanceY;}else if(cropYprev>0){cropYprev=0;}else{}var cropXprev=crop.x;cropXprev=cropXprev*boxedHeight/SourceWidthForCropY;if(cropXprev<-dragDistanceX){cropXprev=-dragDistanceX;}else if(cropXprev>0){cropXprev=0;}else{}////////////////////\nrequestAnimationFrame(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:ctx.drawImage(previewFilehold,WideImageCheck?0:cropXprev,WideImageCheck?0:cropYprev,cropCanvasWidth*zoom,boxedHeight*zoom);try{convertCroppedCanvasToImage();}catch(_unused2){console.log(\"previewcanvascropall cropper  error\");}case 2:case\"end\":return _context2.stop();}}},_callee2);})));////////////////////\n}canvasRef.current.style.width=\"\".concat(getpreviewFixedWidth,\"px\");canvasRef.current.style.height=\"\".concat(newheightq,\"px\");}else{var xtraZoom=cropCanvasWidth/imageWidthWithAspectRatio;var centerpreview=canvasRef.current.width/2-imageWidthWithAspectRatio/2;var centerpreview2=canvasRef.current.height/3-cropCanvasHeight*xtraZoom/3;if(imageWidthWithAspectRatio<cropCanvasWidth){if(cropCanvasWidth>cropCanvasHeight){////WIDE IMAGE SOURCE NOT PROPERLY FITTED\n////////////////////\nrequestAnimationFrame(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:ctx.drawImage(previewFilehold,0,centerpreview2,imageWidthWithAspectRatio*xtraZoom,cropCanvasHeight*xtraZoom);try{convertCroppedCanvasToImage();}catch(_unused3){console.log(\"previewcanvascropall cropper  error\");}case 2:case\"end\":return _context3.stop();}}},_callee3);})));////////////////////\n}else{////LONG IMAGE SOURCE NOT PROPERLY FITTED\n////////////////////\nrequestAnimationFrame(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:ctx.drawImage(previewFilehold,0,0,imageWidthWithAspectRatio*xtraZoom,cropCanvasHeight*xtraZoom);try{convertCroppedCanvasToImage();}catch(_unused4){console.log(\"previewcanvascropall cropper  error\");}case 2:case\"end\":return _context4.stop();}}},_callee4);})));////////////////////\n}}else{////////LONG IMAGE SOURCE WIDE IMAGE SOURCE\nrequestAnimationFrame(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:ctx.drawImage(previewFilehold,centerpreview,0,imageWidthWithAspectRatio,cropCanvasHeight);try{convertCroppedCanvasToImage();}catch(_unused5){console.log(\"previewcanvascropall cropper  error\");}case 2:case\"end\":return _context5.stop();}}},_callee5);})));////////////////////\n}canvasRef.current.style.width=\"\".concat(getpreviewFixedWidth,\"px\");canvasRef.current.style.height=\"\".concat(previewCSSHeight,\"px\");}}},[previewFilehold,canvasRef,CropImageHolder,cropCanvasWidth,cropCanvasHeight,imageWidthWithAspectRatio,WideImageCheck,zoom]);var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),callLayoutoNCE=_useState16[0],setcallLayoutoNCE=_useState16[1];useLayoutEffect(function(){if(canvasToimage&&callLayoutoNCE&&canvasRef.current){drawcrop();setcallLayoutoNCE(false);}},[canvasToimage,callLayoutoNCE,canvasRef]);return/*#__PURE__*/_jsxs(_Fragment,{children:[type===1?/*#__PURE__*/_jsx(_Fragment,{children:length===1?/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(Grid,{xs:12,item:true,children:/*#__PURE__*/_jsx(\"img\",{ref:addUploadItemsRef,style:{width:\"auto\",height:WideImageCheck?\"70%\":\"50%\",position:\"relative\",margin:\"auto\",display:callLayoutoNCE?\"none\":\"block\"}})})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"img\",{ref:addUploadItemsRef,style:{width:\"100%\",height:\"auto\",position:\"relative\",margin:\"auto\",display:callLayoutoNCE?\"none\":\"block\"}})})}):null,/*#__PURE__*/_jsxs(Grid,{container:true,style:{height:\"100%\",position:\"fixed\",top:\"-800vh\",margin:\"auto\"},children:[/*#__PURE__*/_jsx(Grid,{item:true,ref:getSDquality,xs:12,style:{width:\"100vw\",padding:\"0px\",height:\"100vh\"}}),type===2?/*#__PURE__*/_jsx(\"img\",{ref:addUploadItemsRefSD,style:{width:\"100%\",height:\"auto\",margin:\"auto\"}}):null,type===3?/*#__PURE__*/_jsx(\"img\",{ref:addUploadItemsRefThumb,style:{width:\"100%\",height:\"auto\",margin:\"auto\"}}):null,allowCropAllCanvas?/*#__PURE__*/_jsx(\"canvas\",{className:darkmodeReducer?\"turlightpostdarkx\":\"turlightpostlightx\",ref:canvasRef,style:{padding:\"0px\",display:callLayoutoNCE?\"block\":\"none\",marginTop:index===0||index===1||index===2?\"0px\":\"-5px\"}}):null]})]});}export var PreviewCanvasCropAll=/*#__PURE__*/React.memo(PreviewCanvasCropAllx);","map":{"version":3,"sources":["C:/Users/King/Desktop/batcave/super/src/upload/PreviewCanvasCropAll.tsx"],"names":["React","useRef","useState","useEffect","useLayoutEffect","useCallback","matchTablet","matchMobile","Grid","useSelector","PreviewCanvasCropAllx","setwaitONLOAD","cropCanvasRef","image","getpreviewFixedWidth","index","CropImageHolder","cropheight","cropwidth","BoxCropActivated","hdcanvasvalue","SourceWidthForCropX","SourceWidthForCropY","WideImageCheck","crop","getCropHeight","canvasToimage","refWithimageData","addUploadItemsRef","itemUploadRef","itemUploadRefThumb","itemUploadRefSD","setsuperCropLoadFade","length","filterImage","setfilterImage","setallowFilters","allowCropAllCanvas","cutOffLoader","setcutOffLoader","addUploadItemsRefThumb","addUploadItemsRefSD","zoom","type","setwaitcropall","waitcropall","state","GlobalReducer","darkmode","darkmodeReducer","SDquality","setSDquality","canvasRef","previewFilehold","setpreviewFilehold","previewCSSHeight","setpreviewCSSHeight","cropCanvasWidth","setcropCanvasWidth","cropCanvasHeight","setcropCanvasHeight","Timer1","Timer2","imageWidthWithAspectRatio","setimageWidthWithAspectRatio","imageWidthWithAspectRatioxx","setimageWidthWithAspectRatioxx","getSDquality","current","clientWidth","clientHeight","previewFileReadimage","Image","src","onload","cropH","cropW","width","height","naturalWidth","naturalHeight","quality","Ratio1500","height1500","width1500","CropAspectRatio","newheight","AspectRatioPrevHeightandWidth","newWidth","AspectRatioPrevHeightandWidthx","newWidthx","wait","convertCroppedCanvasToImage","toDataURL","newArraa","drawcrop","ctx","getContext","newheightq","zoomINBOXWide","AspectRatioPrevHeightandWidthxWideCRop","boxWIDEheight","centerpreview","RatiofromOriginalandfixedHeight","SourceWidthForCropXx","dragDistanceX","AspectRatioPrevHeightandWidthxWideCRopx","boxWIDEheightx","dragDistanceY","cropXprev","x","cropYprev","y","requestAnimationFrame","drawImage","console","log","AspectRatioPrevHeightandWidthxBox","boxedHeight","AspectRatioPrevHeightandWidthxBoxx","boxedHeightx","style","xtraZoom","centerpreview2","callLayoutoNCE","setcallLayoutoNCE","position","margin","display","top","padding","marginTop","PreviewCanvasCropAll","memo"],"mappings":"swBAAA,MAAOA,CAAAA,KAAP,EACEC,MADF,CAEEC,QAFF,CAGEC,SAHF,CAIEC,eAJF,CAKEC,WALF,KAMO,OANP,CAOA,OAAkBC,WAAlB,CAA+BC,WAA/B,KAAkD,iBAAlD,CACA,OAASC,IAAT,KAAqB,mBAArB,CAEA,OAASC,WAAT,KAAyC,aAAzC,C,6IAYA,QAASC,CAAAA,qBAAT,MAoCqB,IAnCnBC,CAAAA,aAmCmB,MAnCnBA,aAmCmB,CAlCnBC,aAkCmB,MAlCnBA,aAkCmB,CAjCnBC,KAiCmB,MAjCnBA,KAiCmB,CAhCnBC,oBAgCmB,MAhCnBA,oBAgCmB,CA/BnBC,KA+BmB,MA/BnBA,KA+BmB,CA9BnBC,eA8BmB,MA9BnBA,eA8BmB,CA7BnBC,UA6BmB,MA7BnBA,UA6BmB,CA5BnBC,SA4BmB,MA5BnBA,SA4BmB,CA3BnBC,gBA2BmB,MA3BnBA,gBA2BmB,CA1BnBC,aA0BmB,MA1BnBA,aA0BmB,CAzBnBC,mBAyBmB,MAzBnBA,mBAyBmB,CAxBnBC,mBAwBmB,MAxBnBA,mBAwBmB,CAvBnBC,cAuBmB,MAvBnBA,cAuBmB,CAtBnBC,IAsBmB,MAtBnBA,IAsBmB,CArBnBC,aAqBmB,MArBnBA,aAqBmB,CApBnBC,aAoBmB,MApBnBA,aAoBmB,CAnBnBC,gBAmBmB,MAnBnBA,gBAmBmB,CAlBnBC,iBAkBmB,MAlBnBA,iBAkBmB,CAjBnBC,aAiBmB,MAjBnBA,aAiBmB,CAhBnBC,kBAgBmB,MAhBnBA,kBAgBmB,CAfnBC,eAemB,MAfnBA,eAemB,CAdnBC,oBAcmB,MAdnBA,oBAcmB,CAbnBC,MAamB,MAbnBA,MAamB,CAZnBC,WAYmB,MAZnBA,WAYmB,CAXnBC,cAWmB,MAXnBA,cAWmB,CAVnBC,eAUmB,MAVnBA,eAUmB,CATnBC,kBASmB,MATnBA,kBASmB,CARnBC,YAQmB,MARnBA,YAQmB,CAPnBC,eAOmB,MAPnBA,eAOmB,CANnBC,sBAMmB,MANnBA,sBAMmB,CALnBC,mBAKmB,MALnBA,mBAKmB,CAJnBC,IAImB,MAJnBA,IAImB,CAHnBC,IAGmB,MAHnBA,IAGmB,CAFnBC,cAEmB,MAFnBA,cAEmB,CADnBC,WACmB,MADnBA,WACmB,kBASEpC,WAAW,CAAC,SAACqC,KAAD,0BAC5BA,KAAK,CAACC,aADsB,GAAD,CATb,CASXC,QATW,cASXA,QATW,CAanB,GAAMC,CAAAA,eAAe,CAAGD,QAAxB,CAbmB,cAee9C,QAAQ,CAAS,CAAT,CAfvB,wCAeZgD,SAfY,eAeDC,YAfC,eAiBnB,GAAMC,CAAAA,SAAc,CAAGnD,MAAM,CAAC,IAAD,CAA7B,CAjBmB,eAmB2BC,QAAQ,CAAM,IAAN,CAnBnC,yCAmBZmD,eAnBY,eAmBKC,kBAnBL,8BAqB6BpD,QAAQ,CAAM,IAAN,CArBrC,yCAqBZqD,gBArBY,eAqBMC,mBArBN,8BAuB2BtD,QAAQ,CAAM,IAAN,CAvBnC,yCAuBZuD,eAvBY,eAuBKC,kBAvBL,8BAyB6BxD,QAAQ,CAAM,IAAN,CAzBrC,0CAyBZyD,gBAzBY,gBAyBMC,mBAzBN,gBA2BnB,GAAMC,CAAAA,MAAM,CAAG5D,MAAM,CAAuC,IAAvC,CAArB,CAEA,GAAM6D,CAAAA,MAAM,CAAG7D,MAAM,CAAuC,IAAvC,CAArB,CA7BmB,gBAgCjBC,QAAQ,CAAM,IAAN,CAhCS,2CA+BZ6D,yBA/BY,gBA+BeC,4BA/Bf,gCAmCjB9D,QAAQ,CAAM,IAAN,CAnCS,2CAkCZ+D,2BAlCY,gBAkCiBC,8BAlCjB,gBAqCnB,GAAMC,CAAAA,YAAiB,CAAGlE,MAAM,CAAiB,IAAjB,CAAhC,CAEAE,SAAS,CAAC,UAAM,CACd,GAAIgE,YAAY,CAACC,OAAjB,CAA0B,CACxB,GAAI9D,WAAW,EAAIC,WAAnB,CAAgC,CAC9B4C,YAAY,CAACgB,YAAY,CAACC,OAAb,CAAqBC,WAAtB,CAAZ,CACD,CAFD,IAEO,CACLlB,YAAY,CAACgB,YAAY,CAACC,OAAb,CAAqBE,YAAtB,CAAZ,CACD,CACF,CACF,CARQ,CAQN,EARM,CAAT,CAUAlE,eAAe,CAAC,UAAM,CACpB,GAAMmE,CAAAA,oBAAoB,CAAG,GAAIC,CAAAA,KAAJ,EAA7B,CACAD,oBAAoB,CAACE,GAArB,CAA2B5D,KAA3B,CACA0D,oBAAoB,CAACG,MAArB,CAA8B,UAAY,CACxC,GAAI9D,aAAa,CAACwD,OAAlB,CAA2B,CACzBd,kBAAkB,CAACiB,oBAAD,CAAlB,CACA,GAAII,CAAAA,KAAJ,CAAWC,KAAX,CACA,GAAI5D,eAAJ,CAAqB,CACnB4D,KAAK,CAAGhE,aAAa,CAACwD,OAAd,CAAsBS,KAA9B,CACAF,KAAK,CAAG/D,aAAa,CAACwD,OAAd,CAAsBU,MAA9B,CACD,CAHD,IAGO,CACLF,KAAK,CAAGL,oBAAoB,CAACQ,YAA7B,CACAJ,KAAK,CAAGJ,oBAAoB,CAACS,aAA7B,CACD,CACD,GAAIC,CAAAA,OAAJ,CACAtC,IAAI,EAAI,CAAR,CACKsC,OAAO,CAAG,IADf,CAEItC,IAAI,EAAI,CAAR,CACCsC,OAAO,CAAE,GADV,CAECA,OAAO,CAAG1E,WAAW,CAAG,GAAH,CAAS,GAJnC,CAMA,GAAIqE,KAAK,CAAGD,KAAZ,CAAmB,CACjB,GAAIO,CAAAA,SAAS,CAAGN,KAAK,CAAGK,OAAxB,CACA,GAAIE,CAAAA,UAAU,CAAGR,KAAK,CAAGO,SAAzB,CAEAxB,kBAAkB,CAACuB,OAAD,CAAlB,CACArB,mBAAmB,CAACuB,UAAD,CAAnB,CACD,CAND,IAMO,CACL,GAAIP,KAAK,CAAG,CAAR,CAAYD,KAAhB,CAAuB,CACtB,CADD,IACO,CACL,GAAIpE,WAAJ,CAAiB,CACf0E,OAAO,CAAGA,OAAO,CAAG,CAApB,CACD,CACF,CACD,GAAIC,CAAAA,SAAS,CAAGP,KAAK,CAAGM,OAAxB,CACA,GAAIG,CAAAA,SAAS,CAAGR,KAAK,CAAGM,SAAxB,CAEAxB,kBAAkB,CAAC0B,SAAD,CAAlB,CACAxB,mBAAmB,CAACqB,OAAD,CAAnB,CACD,CAED,GAAII,CAAAA,eAAe,CAAGnE,SAAS,CAAGD,UAAlC,CACA,GAAIqE,CAAAA,SAAS,CAAGxE,oBAAoB,CAAGuE,eAAvC,CACA7B,mBAAmB,CAAC8B,SAAD,CAAnB,CAEA,GAAIC,CAAAA,6BAA6B,CAC/BhB,oBAAoB,CAACS,aAArB,CACAT,oBAAoB,CAACQ,YAFvB,CAGA,GAAIS,CAAAA,QAAQ,CAAG7B,gBAAgB,CAAG4B,6BAAlC,CACAvB,4BAA4B,CAACwB,QAAD,CAA5B,CAEA,GAAIC,CAAAA,8BAA8B,CAAGhC,eAAe,CAAGE,gBAAvD,CACA,GAAI+B,CAAAA,SAAS,CAAG5E,oBAAoB,CAAG2E,8BAAvC,CACAvB,8BAA8B,CAACwB,SAAD,CAA9B,CACD,CACF,CApDD,CAqDD,CAxDc,CAwDZ,CACDxC,SADC,CAEDrC,KAFC,CAGDM,gBAHC,CAIDoC,gBAJC,CAKDzC,oBALC,CAMDF,aANC,CAODI,eAPC,CAQDE,SARC,CASDD,UATC,CAUDO,IAVC,CAxDY,CAAf,CAqEA;AACA;AACA;AACA;AACA,GAAMmE,CAAAA,IAAI,CAAGtF,WAAW,CAAC,UAAM,CAC7BM,aAAa,CAAC,KAAD,CAAb,CACAqB,oBAAoB,CAAC,KAAD,CAApB,CACAI,eAAe,CAAC,IAAD,CAAf,CACD,CAJuB,CAIrB,EAJqB,CAAxB,CAMA;AACA;AACA;AACA;AACA,GAAMwD,CAAAA,2BAA2B,CAAGvF,WAAW,CAAC,UAAM,CACpD2B,oBAAoB,CAAC,IAAD,CAApB,CACA,GAAIW,IAAI,GAAK,CAAb,CAAgB,CACdd,aAAa,CAACuC,OAAd,CAAsBrD,KAAtB,EAA6B0D,GAA7B,CAAmCrB,SAAS,CAACgB,OAAV,CAAkByB,SAAlB,EAAnC,CACA;AACA,GAAMC,CAAAA,QAAQ,oBAAO5D,WAAP,CAAd,CACA4D,QAAQ,CAAC/E,KAAD,CAAR,CAAkBqC,SAAS,CAACgB,OAAV,CAAkByB,SAAlB,EAAlB,CACA1D,cAAc,CAAC2D,QAAD,CAAd,CACA;AACA,GAAI7D,MAAM,CAAG,CAAT,GAAelB,KAAnB,CAA0B,CACxB4E,IAAI,GACL,CACF,CAVD,IAUO,IAAIhD,IAAI,GAAK,CAAb,CAAgB,CACrBZ,eAAe,CAACqC,OAAhB,CAAwBrD,KAAxB,EAA+B0D,GAA/B,CAAqCrB,SAAS,CAACgB,OAAV,CAAkByB,SAAlB,EAArC,CAEA,GAAI5D,MAAM,CAAG,CAAT,GAAelB,KAAnB,CAA0B,CACxB4E,IAAI,GACL,CACF,CANM,IAMA,CACL7D,kBAAkB,CAACsC,OAAnB,CAA2BrD,KAA3B,EAAkC0D,GAAlC,CAAwCrB,SAAS,CAACgB,OAAV,CAAkByB,SAAlB,EAAxC,CACA,GAAI5D,MAAM,CAAG,CAAT,GAAelB,KAAnB,CAA0B,CACxB4E,IAAI,GACL,CACF,CACF,CAxB8C,CAwB5C,CACDjE,aADC,CAEDG,aAFC,CAGDC,kBAHC,CAIDC,eAJC,CAKDqB,SALC,CAxB4C,CAA/C,CAgCA;AACA;AACA;AACA;AACA,GAAM2C,CAAAA,QAAQ,CAAG1F,WAAW,CAAC,UAAM,CACjC,GAAIgD,eAAe,EAAID,SAAS,CAACgB,OAAjC,CAA0C,CACxC,GAAM4B,CAAAA,GAAG,CAAG5C,SAAS,CAACgB,OAAV,CAAkB6B,UAAlB,CAA6B,IAA7B,CAAZ,CAEA7C,SAAS,CAACgB,OAAV,CAAkBU,MAAlB,CAA2BnB,gBAA3B,CACAP,SAAS,CAACgB,OAAV,CAAkBS,KAAlB,CAA0BpB,eAA1B,CAEA,GAAItC,gBAAJ,CAAsB,CACpB,GAAIkE,CAAAA,eAAe,CAAG5B,eAAe,CAAGE,gBAAxC,CACA,GAAIuC,CAAAA,UAAU,CAAGpF,oBAAoB,CAAGuE,eAAxC,CAEA,GAAIhC,eAAe,CAAC0B,YAAhB,CAA+B1B,eAAe,CAAC2B,aAAnD,CAAkE,CAChE,GAAImB,CAAAA,aAAa,CACf9C,eAAe,CAAC0B,YAAhB,CAA+B1B,eAAe,CAAC2B,aADjD,CAGA,GAAIoB,CAAAA,sCAAsC,CACxC/C,eAAe,CAAC0B,YAAhB,CAA+B1B,eAAe,CAAC2B,aADjD,CAEA,GAAIqB,CAAAA,aAAa,CACd5C,eAAe,CAAG0C,aAAnB,CACAC,sCAFF,CAIA,GAAIE,CAAAA,aAAa,CACflD,SAAS,CAACgB,OAAV,CAAkBS,KAAlB,CAA0B,CAA1B,CAA+BpB,eAAe,CAAG0C,aAAnB,CAAoC,CADpE,CAGA,GAAII,CAAAA,+BAA+B,CAChClD,eAAe,CAAC2B,aAAhB,CAAgCvB,eAAjC,CAAoD0C,aADtD,CAEA,GAAIK,CAAAA,oBAAoB,CACtBnD,eAAe,CAAC0B,YAAhB,CAA+BwB,+BADjC,CAGA,GAAIE,CAAAA,aAAa,CACfhD,eAAe,CAAG0C,aAAlB,CAAkCzD,IAAlC,CAAyCe,eAD3C,CAGA,GAAIiD,CAAAA,uCAAuC,CACzCrD,eAAe,CAAC0B,YAAhB,CAA+B1B,eAAe,CAAC2B,aADjD,CAEA,GAAI2B,CAAAA,cAAc,CACflD,eAAe,CAAG0C,aAAlB,CAAkCzD,IAAnC,CACAgE,uCAFF,CAIA,GAAIE,CAAAA,aAAa,CAAGD,cAAc,CAAGhD,gBAArC,CAEA,GAAIkD,CAAAA,SAAS,CAAGrF,IAAI,CAACsF,CAArB,CACAD,SAAS,CACNA,SAAS,CAAGpD,eAAZ,CAA8B0C,aAA/B,CAAgD9E,mBADlD,CAGA,GAAIwF,SAAS,CAAG,CAACJ,aAAjB,CAAgC,CAC9BI,SAAS,CAAG,CAACJ,aAAb,CACD,CAFD,IAEO,IAAII,SAAS,CAAG,CAAhB,CAAmB,CACxBA,SAAS,CAAG,CAAZ,CACD,CAFM,IAEA,CACN,CAED,GAAIE,CAAAA,SAAS,CAAGvF,IAAI,CAACwF,CAArB,CAEAD,SAAS,CACNA,SAAS,CAAGtD,eAAZ,CAA8B0C,aAA/B,CAAgD9E,mBADlD,CAGA,GAAI0F,SAAS,CAAG,CAACH,aAAjB,CAAgC,CAC9BG,SAAS,CAAG,CAACH,aAAb,CACD,CAFD,IAEO,IAAIG,SAAS,CAAG,CAAhB,CAAmB,CACxBA,SAAS,CAAG,CAAZ,CACD,CAFM,IAEA,CACN,CACD;AAEAE,qBAAqB,sEAAC,mIACpBjB,GAAG,CAACkB,SAAJ,CACE7D,eADF,CAEE9B,cAAc,CAAGsF,SAAH,CAAe,CAF/B,CAGEtF,cAAc,CAAGwF,SAAH,CAAe,CAH/B,CAIEtD,eAAe,CAAG0C,aAAlB,CAAkCzD,IAJpC,CAKE2D,aAAa,CAAG3D,IALlB,EAOA,GAAI,CACFkD,2BAA2B,GAC5B,CAAC,cAAM,CACNuB,OAAO,CAACC,GAAR,CAAY,qCAAZ,EACD,CAZmB,sDAAD,GAArB,CAeA;AACD,CArED,IAqEO,CACL,GAAIC,CAAAA,iCAAiC,CACnChE,eAAe,CAAC0B,YAAhB,CAA+B1B,eAAe,CAAC2B,aADjD,CAEA,GAAIsC,CAAAA,WAAW,CAAG7D,eAAe,CAAG4D,iCAApC,CAEA,GAAIE,CAAAA,kCAAkC,CACpClE,eAAe,CAAC0B,YAAhB,CAA+B1B,eAAe,CAAC2B,aADjD,CAEA,GAAIwC,CAAAA,YAAY,CACb/D,eAAe,CAAGf,IAAnB,CAA2B6E,kCAD7B,CAGA,GAAId,CAAAA,aAAa,CAAGhD,eAAe,CAAGf,IAAlB,CAAyBe,eAA7C,CACA,GAAImD,CAAAA,aAAa,CAAGY,YAAY,CAAG7D,gBAAnC,CAEA,GAAIoD,CAAAA,SAAS,CAAGvF,IAAI,CAACwF,CAArB,CAEAD,SAAS,CAAIA,SAAS,CAAGO,WAAb,CAA4BhG,mBAAxC,CAEA,GAAIyF,SAAS,CAAG,CAACH,aAAjB,CAAgC,CAC9BG,SAAS,CAAG,CAACH,aAAb,CACD,CAFD,IAEO,IAAIG,SAAS,CAAG,CAAhB,CAAmB,CACxBA,SAAS,CAAG,CAAZ,CACD,CAFM,IAEA,CACN,CAED,GAAIF,CAAAA,SAAS,CAAGrF,IAAI,CAACsF,CAArB,CACAD,SAAS,CAAIA,SAAS,CAAGS,WAAb,CAA4BhG,mBAAxC,CACA,GAAIuF,SAAS,CAAG,CAACJ,aAAjB,CAAgC,CAC9BI,SAAS,CAAG,CAACJ,aAAb,CACD,CAFD,IAEO,IAAII,SAAS,CAAG,CAAhB,CAAmB,CACxBA,SAAS,CAAG,CAAZ,CACD,CAFM,IAEA,CACN,CAED;AAEAI,qBAAqB,sEAAC,wIACpBjB,GAAG,CAACkB,SAAJ,CACE7D,eADF,CAEE9B,cAAc,CAAG,CAAH,CAAOsF,SAFvB,CAGEtF,cAAc,CAAG,CAAH,CAAOwF,SAHvB,CAIEtD,eAAe,CAAGf,IAJpB,CAKE4E,WAAW,CAAG5E,IALhB,EAOA,GAAI,CACFkD,2BAA2B,GAC5B,CAAC,eAAM,CACNuB,OAAO,CAACC,GAAR,CAAY,qCAAZ,EACD,CAZmB,wDAAD,GAArB,CAeA;AACD,CAEDhE,SAAS,CAACgB,OAAV,CAAkBqD,KAAlB,CAAwB5C,KAAxB,WAAmC/D,oBAAnC,OACAsC,SAAS,CAACgB,OAAV,CAAkBqD,KAAlB,CAAwB3C,MAAxB,WAAoCoB,UAApC,OACD,CAhID,IAgIO,CACL,GAAIwB,CAAAA,QAAQ,CAAGjE,eAAe,CAAGM,yBAAjC,CAEA,GAAIuC,CAAAA,aAAa,CACflD,SAAS,CAACgB,OAAV,CAAkBS,KAAlB,CAA0B,CAA1B,CAA8Bd,yBAAyB,CAAG,CAD5D,CAGA,GAAI4D,CAAAA,cAAc,CAChBvE,SAAS,CAACgB,OAAV,CAAkBU,MAAlB,CAA2B,CAA3B,CAAgCnB,gBAAgB,CAAG+D,QAApB,CAAgC,CADjE,CAGA,GAAI3D,yBAAyB,CAAGN,eAAhC,CAAiD,CAC/C,GAAIA,eAAe,CAAGE,gBAAtB,CAAwC,CACtC;AAEA;AAEAsD,qBAAqB,sEAAC,wIACpBjB,GAAG,CAACkB,SAAJ,CACE7D,eADF,CAEE,CAFF,CAGEsE,cAHF,CAIE5D,yBAAyB,CAAG2D,QAJ9B,CAKE/D,gBAAgB,CAAG+D,QALrB,EAOA,GAAI,CACF9B,2BAA2B,GAC5B,CAAC,eAAM,CACNuB,OAAO,CAACC,GAAR,CAAY,qCAAZ,EACD,CAZmB,wDAAD,GAArB,CAeA;AACD,CArBD,IAqBO,CACL;AAEA;AAEAH,qBAAqB,sEAAC,wIACpBjB,GAAG,CAACkB,SAAJ,CACE7D,eADF,CAEE,CAFF,CAGE,CAHF,CAIEU,yBAAyB,CAAG2D,QAJ9B,CAKE/D,gBAAgB,CAAG+D,QALrB,EAOA,GAAI,CACF9B,2BAA2B,GAC5B,CAAC,eAAM,CACNuB,OAAO,CAACC,GAAR,CAAY,qCAAZ,EACD,CAZmB,wDAAD,GAArB,CAeA;AACD,CACF,CA5CD,IA4CO,CACL;AAEAH,qBAAqB,sEAAC,wIACpBjB,GAAG,CAACkB,SAAJ,CACE7D,eADF,CAEEiD,aAFF,CAGE,CAHF,CAIEvC,yBAJF,CAKEJ,gBALF,EAOA,GAAI,CACFiC,2BAA2B,GAC5B,CAAC,eAAM,CACNuB,OAAO,CAACC,GAAR,CAAY,qCAAZ,EACD,CAZmB,wDAAD,GAArB,CAeA;AACD,CACDhE,SAAS,CAACgB,OAAV,CAAkBqD,KAAlB,CAAwB5C,KAAxB,WAAmC/D,oBAAnC,OACAsC,SAAS,CAACgB,OAAV,CAAkBqD,KAAlB,CAAwB3C,MAAxB,WAAoCvB,gBAApC,OACD,CACF,CACF,CApN2B,CAoNzB,CACDF,eADC,CAEDD,SAFC,CAGDpC,eAHC,CAIDyC,eAJC,CAKDE,gBALC,CAMDI,yBANC,CAODxC,cAPC,CAQDmB,IARC,CApNyB,CAA5B,CAxKmB,gBAuYyBxC,QAAQ,CAAM,IAAN,CAvYjC,2CAuYZ0H,cAvYY,gBAuYIC,iBAvYJ,gBAyYnBzH,eAAe,CAAC,UAAM,CACpB,GAAIsB,aAAa,EAAIkG,cAAjB,EAAmCxE,SAAS,CAACgB,OAAjD,CAA0D,CACxD2B,QAAQ,GACR8B,iBAAiB,CAAC,KAAD,CAAjB,CACD,CACF,CALc,CAKZ,CAACnG,aAAD,CAAgBkG,cAAhB,CAAgCxE,SAAhC,CALY,CAAf,CAOA,mBACE,2BAECT,IAAI,GAAK,CAAT,cAAc,yBAEjBV,MAAM,GAAK,CAAX,cAAe,4CAAG,KAAC,IAAD,EAAM,EAAE,CAAE,EAAV,CAAc,IAAI,KAAlB,uBACV,YACE,GAAG,CAAEL,iBADP,CAEE,KAAK,CAAE,CACLiD,KAAK,CAAG,MADH,CAELC,MAAM,CAAGvD,cAAc,CAAE,KAAF,CAAU,KAF5B,CAGLuG,QAAQ,CAAE,UAHL,CAILC,MAAM,CAAE,MAJH,CAKLC,OAAO,CAAEJ,cAAc,CAAG,MAAH,CAAY,OAL9B,CAFT,EADU,EAAH,GAAf,cAYM,sCAEE,YACE,GAAG,CAAEhG,iBADP,CAEE,KAAK,CAAE,CACLiD,KAAK,CAAE,MADF,CAELC,MAAM,CAAG,MAFJ,CAGLgD,QAAQ,CAAE,UAHL,CAILC,MAAM,CAAE,MAJH,CAKLC,OAAO,CAAEJ,cAAc,CAAG,MAAH,CAAY,OAL9B,CAFT,EAFF,EAdW,EAAd,CA8BM,IAhCP,cAmCE,MAAC,IAAD,EACE,SAAS,KADX,CAEE,KAAK,CAAE,CACL9C,MAAM,CAAE,MADH,CAELgD,QAAQ,CAAE,OAFL,CAGLG,GAAG,CAAE,QAHA,CAILF,MAAM,CAAE,MAJH,CAFT,wBASE,KAAC,IAAD,EACE,IAAI,KADN,CAEE,GAAG,CAAE5D,YAFP,CAGE,EAAE,CAAE,EAHN,CAIE,KAAK,CAAE,CAAEU,KAAK,CAAE,OAAT,CAAkBqD,OAAO,CAAE,KAA3B,CAAkCpD,MAAM,CAAE,OAA1C,CAJT,EATF,CAiBJnC,IAAI,GAAK,CAAT,cACM,YACE,GAAG,CAAEF,mBADP,CAEE,KAAK,CAAE,CACLoC,KAAK,CAAE,MADF,CAELC,MAAM,CAAE,MAFH,CAGLiD,MAAM,CAAE,MAHH,CAFT,EADN,CAQU,IAzBN,CA2BHpF,IAAI,GAAK,CAAT,cAAe,YACR,GAAG,CAAEH,sBADG,CAER,KAAK,CAAE,CACLqC,KAAK,CAAE,MADF,CAELC,MAAM,CAAE,MAFH,CAGLiD,MAAM,CAAE,MAHH,CAFC,EAAf,CAOS,IAlCN,CAsCG1F,kBAAkB,cACjB,eACE,SAAS,CACPY,eAAe,CAAG,mBAAH,CAAyB,oBAF5C,CAIE,GAAG,CAAEG,SAJP,CAKE,KAAK,CAAE,CACL8E,OAAO,CAAE,KADJ,CAELF,OAAO,CAAEJ,cAAc,CAAG,OAAH,CAAa,MAF/B,CAGLO,SAAS,CACPpH,KAAK,GAAK,CAAV,EAAeA,KAAK,GAAK,CAAzB,EAA8BA,KAAK,GAAK,CAAxC,CAA4C,KAA5C,CAAoD,MAJjD,CALT,EADiB,CAaf,IAnDN,GAnCF,GADF,CA2FD,CAED,MAAO,IAAMqH,CAAAA,oBAAoB,cAAGpI,KAAK,CAACqI,IAAN,CAAW3H,qBAAX,CAA7B","sourcesContent":["import React, {\r\n  useRef,\r\n  useState,\r\n  useEffect,\r\n  useLayoutEffect,\r\n  useCallback,\r\n} from \"react\";\r\nimport { matchPc, matchTablet, matchMobile } from \"../DetectDevice\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport MoreHorizIcon from \"@material-ui/icons/MoreHoriz\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useSpring, animated } from \"react-spring\";\r\nimport Masonry from \"@mui/lab/Masonry\";\r\nimport CircleIcon from \"@mui/icons-material/Circle\";\r\nimport Cropper from \"react-easy-crop\";\r\nimport MusicNoteIcon from \"@mui/icons-material/MusicNote\";\r\nimport PhotoIcon from \"@mui/icons-material/Photo\";\r\nimport GifIcon from \"@mui/icons-material/Gif\";\r\nimport ChevronRightIcon from \"@mui/icons-material/ChevronRight\";\r\nimport Slider from \"@mui/material/Slider\";\r\nimport { AnySoaRecord } from \"dns\";\r\n\r\nfunction PreviewCanvasCropAllx({\r\n  setwaitONLOAD,\r\n  cropCanvasRef,\r\n  image,\r\n  getpreviewFixedWidth,\r\n  index,\r\n  CropImageHolder,\r\n  cropheight,\r\n  cropwidth,\r\n  BoxCropActivated,\r\n  hdcanvasvalue,\r\n  SourceWidthForCropX,\r\n  SourceWidthForCropY,\r\n  WideImageCheck,\r\n  crop,\r\n  getCropHeight,\r\n  canvasToimage,\r\n  refWithimageData,\r\n  addUploadItemsRef,\r\n  itemUploadRef,\r\n  itemUploadRefThumb,\r\n  itemUploadRefSD,\r\n  setsuperCropLoadFade,\r\n  length,\r\n  filterImage,\r\n  setfilterImage,\r\n  setallowFilters,\r\n  allowCropAllCanvas,\r\n  cutOffLoader,\r\n  setcutOffLoader,\r\n  addUploadItemsRefThumb,\r\n  addUploadItemsRefSD,\r\n  zoom,\r\n  type,\r\n  setwaitcropall,\r\n  waitcropall,\r\n}: any): JSX.Element {\r\n  ///\r\n  ///\r\n  ///DARKMODE FROM REDUX\r\n  interface RootStateGlobalReducer {\r\n    GlobalReducer: {\r\n      darkmode: boolean;\r\n    };\r\n  }\r\n  const { darkmode } = useSelector((state: RootStateGlobalReducer) => ({\r\n    ...state.GlobalReducer,\r\n  }));\r\n\r\n  const darkmodeReducer = darkmode;\r\n\r\n  const [SDquality, setSDquality] = useState<number>(0);\r\n\r\n  const canvasRef: any = useRef(null);\r\n\r\n  const [previewFilehold, setpreviewFilehold] = useState<any>(null);\r\n\r\n  const [previewCSSHeight, setpreviewCSSHeight] = useState<any>(null);\r\n\r\n  const [cropCanvasWidth, setcropCanvasWidth] = useState<any>(null);\r\n\r\n  const [cropCanvasHeight, setcropCanvasHeight] = useState<any>(null);\r\n\r\n  const Timer1 = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n  const Timer2 = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n  const [imageWidthWithAspectRatio, setimageWidthWithAspectRatio] =\r\n    useState<any>(null);\r\n\r\n  const [imageWidthWithAspectRatioxx, setimageWidthWithAspectRatioxx] =\r\n    useState<any>(null);\r\n\r\n  const getSDquality: any = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (getSDquality.current) {\r\n      if (matchTablet || matchMobile) {\r\n        setSDquality(getSDquality.current.clientWidth);\r\n      } else {\r\n        setSDquality(getSDquality.current.clientHeight);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  useLayoutEffect(() => {\r\n    const previewFileReadimage = new Image();\r\n    previewFileReadimage.src = image;\r\n    previewFileReadimage.onload = function () {\r\n      if (cropCanvasRef.current) {\r\n        setpreviewFilehold(previewFileReadimage);\r\n        var cropH, cropW;\r\n        if (CropImageHolder) {\r\n          cropW = cropCanvasRef.current.width;\r\n          cropH = cropCanvasRef.current.height;\r\n        } else {\r\n          cropW = previewFileReadimage.naturalWidth;\r\n          cropH = previewFileReadimage.naturalHeight;\r\n        }\r\n        var quality;\r\n        type == 1\r\n          ? (quality = 1024)\r\n          : type == 2\r\n          ? (quality =750)\r\n          : (quality = matchMobile ? 150 : 300);\r\n\r\n        if (cropW > cropH) {\r\n          var Ratio1500 = cropW / quality;\r\n          var height1500 = cropH / Ratio1500;\r\n\r\n          setcropCanvasWidth(quality);\r\n          setcropCanvasHeight(height1500);\r\n        } else {\r\n          if (cropW * 2 > cropH) {\r\n          } else {\r\n            if (matchMobile) {\r\n              quality = quality * 2;\r\n            }\r\n          }\r\n          var Ratio1500 = cropH / quality;\r\n          var width1500 = cropW / Ratio1500;\r\n\r\n          setcropCanvasWidth(width1500);\r\n          setcropCanvasHeight(quality);\r\n        }\r\n\r\n        let CropAspectRatio = cropwidth / cropheight;\r\n        let newheight = getpreviewFixedWidth / CropAspectRatio;\r\n        setpreviewCSSHeight(newheight);\r\n\r\n        let AspectRatioPrevHeightandWidth =\r\n          previewFileReadimage.naturalHeight /\r\n          previewFileReadimage.naturalWidth;\r\n        let newWidth = cropCanvasHeight / AspectRatioPrevHeightandWidth;\r\n        setimageWidthWithAspectRatio(newWidth);\r\n\r\n        let AspectRatioPrevHeightandWidthx = cropCanvasWidth / cropCanvasHeight;\r\n        let newWidthx = getpreviewFixedWidth / AspectRatioPrevHeightandWidthx;\r\n        setimageWidthWithAspectRatioxx(newWidthx);\r\n      }\r\n    };\r\n  }, [\r\n    SDquality,\r\n    image,\r\n    BoxCropActivated,\r\n    previewCSSHeight,\r\n    getpreviewFixedWidth,\r\n    cropCanvasRef,\r\n    CropImageHolder,\r\n    cropwidth,\r\n    cropheight,\r\n    crop,\r\n  ]);\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  ///\r\n  const wait = useCallback(() => {\r\n    setwaitONLOAD(false);\r\n    setsuperCropLoadFade(false);\r\n    setallowFilters(true);\r\n  }, []);\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  ///  CROPED CANVAS CONVER TO IMAGE\r\n  const convertCroppedCanvasToImage = useCallback(() => {\r\n    setsuperCropLoadFade(true);\r\n    if (type === 1) {\r\n      itemUploadRef.current[index].src = canvasRef.current.toDataURL();\r\n      ///////////////////////////////\r\n      const newArraa = [...filterImage];\r\n      newArraa[index] = canvasRef.current.toDataURL();\r\n      setfilterImage(newArraa);\r\n      ///////////////////////////////\r\n      if (length - 1 === index) {\r\n        wait();\r\n      }\r\n    } else if (type === 2) {\r\n      itemUploadRefSD.current[index].src = canvasRef.current.toDataURL();\r\n\r\n      if (length - 1 === index) {\r\n        wait();\r\n      }\r\n    } else {\r\n      itemUploadRefThumb.current[index].src = canvasRef.current.toDataURL();\r\n      if (length - 1 === index) {\r\n        wait();\r\n      }\r\n    }\r\n  }, [\r\n    canvasToimage,\r\n    itemUploadRef,\r\n    itemUploadRefThumb,\r\n    itemUploadRefSD,\r\n    canvasRef,\r\n  ]);\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  ///  DRAW CANVAS ON CROP COMPLETE CLICK\r\n  const drawcrop = useCallback(() => {\r\n    if (previewFilehold && canvasRef.current) {\r\n      const ctx = canvasRef.current.getContext(\"2d\");\r\n\r\n      canvasRef.current.height = cropCanvasHeight;\r\n      canvasRef.current.width = cropCanvasWidth;\r\n\r\n      if (BoxCropActivated) {\r\n        var CropAspectRatio = cropCanvasWidth / cropCanvasHeight;\r\n        var newheightq = getpreviewFixedWidth / CropAspectRatio;\r\n\r\n        if (previewFilehold.naturalWidth > previewFilehold.naturalHeight) {\r\n          var zoomINBOXWide =\r\n            previewFilehold.naturalWidth / previewFilehold.naturalHeight;\r\n\r\n          let AspectRatioPrevHeightandWidthxWideCRop =\r\n            previewFilehold.naturalWidth / previewFilehold.naturalHeight;\r\n          let boxWIDEheight =\r\n            (cropCanvasWidth * zoomINBOXWide) /\r\n            AspectRatioPrevHeightandWidthxWideCRop;\r\n\r\n          var centerpreview =\r\n            canvasRef.current.width / 2 - (cropCanvasWidth * zoomINBOXWide) / 2;\r\n\r\n          var RatiofromOriginalandfixedHeight =\r\n            (previewFilehold.naturalHeight / cropCanvasWidth) * zoomINBOXWide;\r\n          var SourceWidthForCropXx =\r\n            previewFilehold.naturalWidth / RatiofromOriginalandfixedHeight;\r\n\r\n          var dragDistanceX =\r\n            cropCanvasWidth * zoomINBOXWide * zoom - cropCanvasWidth;\r\n\r\n          let AspectRatioPrevHeightandWidthxWideCRopx =\r\n            previewFilehold.naturalWidth / previewFilehold.naturalHeight;\r\n          let boxWIDEheightx =\r\n            (cropCanvasWidth * zoomINBOXWide * zoom) /\r\n            AspectRatioPrevHeightandWidthxWideCRopx;\r\n\r\n          var dragDistanceY = boxWIDEheightx - cropCanvasHeight;\r\n\r\n          var cropXprev = crop.x;\r\n          cropXprev =\r\n            (cropXprev * cropCanvasWidth * zoomINBOXWide) / SourceWidthForCropX;\r\n\r\n          if (cropXprev < -dragDistanceX) {\r\n            cropXprev = -dragDistanceX;\r\n          } else if (cropXprev > 0) {\r\n            cropXprev = 0;\r\n          } else {\r\n          }\r\n\r\n          var cropYprev = crop.y;\r\n\r\n          cropYprev =\r\n            (cropYprev * cropCanvasWidth * zoomINBOXWide) / SourceWidthForCropX;\r\n\r\n          if (cropYprev < -dragDistanceY) {\r\n            cropYprev = -dragDistanceY;\r\n          } else if (cropYprev > 0) {\r\n            cropYprev = 0;\r\n          } else {\r\n          }\r\n          ////////////////////\r\n\r\n          requestAnimationFrame(async () => {\r\n            ctx.drawImage(\r\n              previewFilehold,\r\n              WideImageCheck ? cropXprev : 0,\r\n              WideImageCheck ? cropYprev : 0,\r\n              cropCanvasWidth * zoomINBOXWide * zoom,\r\n              boxWIDEheight * zoom\r\n            );\r\n            try {\r\n              convertCroppedCanvasToImage();\r\n            } catch {\r\n              console.log(\"previewcanvascropall cropper  error\");\r\n            }\r\n          });\r\n\r\n          ////////////////////\r\n        } else {\r\n          let AspectRatioPrevHeightandWidthxBox =\r\n            previewFilehold.naturalWidth / previewFilehold.naturalHeight;\r\n          let boxedHeight = cropCanvasWidth / AspectRatioPrevHeightandWidthxBox;\r\n\r\n          let AspectRatioPrevHeightandWidthxBoxx =\r\n            previewFilehold.naturalWidth / previewFilehold.naturalHeight;\r\n          let boxedHeightx =\r\n            (cropCanvasWidth * zoom) / AspectRatioPrevHeightandWidthxBoxx;\r\n\r\n          var dragDistanceX = cropCanvasWidth * zoom - cropCanvasWidth;\r\n          var dragDistanceY = boxedHeightx - cropCanvasHeight;\r\n\r\n          var cropYprev = crop.y;\r\n\r\n          cropYprev = (cropYprev * boxedHeight) / SourceWidthForCropY;\r\n\r\n          if (cropYprev < -dragDistanceY) {\r\n            cropYprev = -dragDistanceY;\r\n          } else if (cropYprev > 0) {\r\n            cropYprev = 0;\r\n          } else {\r\n          }\r\n\r\n          var cropXprev = crop.x;\r\n          cropXprev = (cropXprev * boxedHeight) / SourceWidthForCropY;\r\n          if (cropXprev < -dragDistanceX) {\r\n            cropXprev = -dragDistanceX;\r\n          } else if (cropXprev > 0) {\r\n            cropXprev = 0;\r\n          } else {\r\n          }\r\n\r\n          ////////////////////\r\n\r\n          requestAnimationFrame(async () => {\r\n            ctx.drawImage(\r\n              previewFilehold,\r\n              WideImageCheck ? 0 : cropXprev,\r\n              WideImageCheck ? 0 : cropYprev,\r\n              cropCanvasWidth * zoom,\r\n              boxedHeight * zoom\r\n            );\r\n            try {\r\n              convertCroppedCanvasToImage();\r\n            } catch {\r\n              console.log(\"previewcanvascropall cropper  error\");\r\n            }\r\n          });\r\n\r\n          ////////////////////\r\n        }\r\n\r\n        canvasRef.current.style.width = `${getpreviewFixedWidth}px`;\r\n        canvasRef.current.style.height = `${newheightq}px`;\r\n      } else {\r\n        var xtraZoom = cropCanvasWidth / imageWidthWithAspectRatio;\r\n\r\n        var centerpreview =\r\n          canvasRef.current.width / 2 - imageWidthWithAspectRatio / 2;\r\n\r\n        var centerpreview2 =\r\n          canvasRef.current.height / 3 - (cropCanvasHeight * xtraZoom) / 3;\r\n\r\n        if (imageWidthWithAspectRatio < cropCanvasWidth) {\r\n          if (cropCanvasWidth > cropCanvasHeight) {\r\n            ////WIDE IMAGE SOURCE NOT PROPERLY FITTED\r\n\r\n            ////////////////////\r\n\r\n            requestAnimationFrame(async () => {\r\n              ctx.drawImage(\r\n                previewFilehold,\r\n                0,\r\n                centerpreview2,\r\n                imageWidthWithAspectRatio * xtraZoom,\r\n                cropCanvasHeight * xtraZoom\r\n              );\r\n              try {\r\n                convertCroppedCanvasToImage();\r\n              } catch {\r\n                console.log(\"previewcanvascropall cropper  error\");\r\n              }\r\n            });\r\n\r\n            ////////////////////\r\n          } else {\r\n            ////LONG IMAGE SOURCE NOT PROPERLY FITTED\r\n\r\n            ////////////////////\r\n\r\n            requestAnimationFrame(async () => {\r\n              ctx.drawImage(\r\n                previewFilehold,\r\n                0,\r\n                0,\r\n                imageWidthWithAspectRatio * xtraZoom,\r\n                cropCanvasHeight * xtraZoom\r\n              );\r\n              try {\r\n                convertCroppedCanvasToImage();\r\n              } catch {\r\n                console.log(\"previewcanvascropall cropper  error\");\r\n              }\r\n            });\r\n\r\n            ////////////////////\r\n          }\r\n        } else {\r\n          ////////LONG IMAGE SOURCE WIDE IMAGE SOURCE\r\n\r\n          requestAnimationFrame(async () => {\r\n            ctx.drawImage(\r\n              previewFilehold,\r\n              centerpreview,\r\n              0,\r\n              imageWidthWithAspectRatio,\r\n              cropCanvasHeight\r\n            );\r\n            try {\r\n              convertCroppedCanvasToImage();\r\n            } catch {\r\n              console.log(\"previewcanvascropall cropper  error\");\r\n            }\r\n          });\r\n\r\n          ////////////////////\r\n        }\r\n        canvasRef.current.style.width = `${getpreviewFixedWidth}px`;\r\n        canvasRef.current.style.height = `${previewCSSHeight}px`;\r\n      }\r\n    }\r\n  }, [\r\n    previewFilehold,\r\n    canvasRef,\r\n    CropImageHolder,\r\n    cropCanvasWidth,\r\n    cropCanvasHeight,\r\n    imageWidthWithAspectRatio,\r\n    WideImageCheck,\r\n    zoom,\r\n  ]);\r\n\r\n  const [callLayoutoNCE, setcallLayoutoNCE] = useState<any>(true);\r\n\r\n  useLayoutEffect(() => {\r\n    if (canvasToimage && callLayoutoNCE && canvasRef.current) {\r\n      drawcrop();\r\n      setcallLayoutoNCE(false);\r\n    }\r\n  }, [canvasToimage, callLayoutoNCE, canvasRef]);\r\n\r\n  return (\r\n    <>\r\n\r\n    {type === 1 ?  <>\r\n\r\n{ length === 1 ? <> <Grid xs={12} item>\r\n          <img\r\n            ref={addUploadItemsRef}\r\n            style={{\r\n              width:  \"auto\",\r\n              height:  WideImageCheck? \"70%\" : \"50%\",\r\n              position: \"relative\",\r\n              margin: \"auto\",\r\n              display: callLayoutoNCE ? \"none\" : \"block\",\r\n            }}\r\n          />\r\n        </Grid></>  : \r\n        <> \r\n      \r\n          <img\r\n            ref={addUploadItemsRef}\r\n            style={{\r\n              width: \"100%\",\r\n              height:  \"auto\",\r\n              position: \"relative\",\r\n              margin: \"auto\",\r\n              display: callLayoutoNCE ? \"none\" : \"block\",\r\n            }}\r\n          />\r\n          </> \r\n       }\r\n\r\n       \r\n      </>: null}\r\n     \r\n\r\n      <Grid\r\n        container\r\n        style={{\r\n          height: \"100%\",\r\n          position: \"fixed\",\r\n          top: \"-800vh\",\r\n          margin: \"auto\",\r\n        }}\r\n      >\r\n        <Grid\r\n          item\r\n          ref={getSDquality}\r\n          xs={12}\r\n          style={{ width: \"100vw\", padding: \"0px\", height: \"100vh\" }}\r\n        ></Grid>\r\n\r\n        \r\n {type === 2 ? \r\n        <img\r\n          ref={addUploadItemsRefSD}\r\n          style={{\r\n            width: \"100%\",\r\n            height: \"auto\",\r\n            margin: \"auto\",\r\n          }}\r\n        />: null}\r\n        \r\n  {type === 3 ?   <img\r\n          ref={addUploadItemsRefThumb}\r\n          style={{\r\n            width: \"100%\",\r\n            height: \"auto\",\r\n            margin: \"auto\",\r\n          }}\r\n        />: null}\r\n      \r\n\r\n\r\n        {allowCropAllCanvas ? (\r\n          <canvas\r\n            className={\r\n              darkmodeReducer ? \"turlightpostdarkx\" : \"turlightpostlightx\"\r\n            }\r\n            ref={canvasRef}\r\n            style={{\r\n              padding: \"0px\",\r\n              display: callLayoutoNCE ? \"block\" : \"none\",\r\n              marginTop:\r\n                index === 0 || index === 1 || index === 2 ? \"0px\" : \"-5px\",\r\n            }}\r\n          />\r\n        ) : null}\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n\r\nexport const PreviewCanvasCropAll = React.memo(PreviewCanvasCropAllx);\r\n"]},"metadata":{},"sourceType":"module"}