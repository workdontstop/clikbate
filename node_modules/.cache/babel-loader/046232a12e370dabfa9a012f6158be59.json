{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\oghen\\\\OneDrive\\\\Documents\\\\ClikBate\\\\Clikbate\\\\src\\\\upload\\\\VideoEditor.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback } from \"react\";\nimport { Grid } from \"@material-ui/core\";\nimport { useSelector } from \"react-redux\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport { matchMobile } from \"../DetectDevice\"; //import { createFFmpeg, fetchFile } from '@ffmpeg/ffmpeg';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst {\n  createFFmpeg,\n  fetchFile\n} = require('@ffmpeg/ffmpeg');\n\nfunction VideoEditorx({\n  VideoUrl,\n  VideoUrl2,\n  ShowVideo2,\n  ShowVideo,\n  setShowVideo2,\n  setShowVideo\n}) {\n  _s();\n\n  ///\n  ///\n  ///DARKMODE FROM REDUX\n  const {\n    darkmode\n  } = useSelector(state => ({ ...state.GlobalReducer\n  }));\n  const darkmodeReducer = darkmode;\n  const [Trim, setTrim] = useState(null);\n  const ffmpeg = createFFmpeg({\n    log: true\n  });\n  const go = useCallback(async videoUrl => {\n    try {\n      ///console.log(ffmpeg);\n      await ffmpeg.load(); // Writing the file to FFmpeg filesystem\n\n      const fetchedVideo = await fetchFile(videoUrl);\n      ffmpeg.FS('writeFile', 'input.mp4', fetchedVideo); // Execute the FFmpeg command\n      // -ss for start time, -t for duration\n\n      await ffmpeg.run('-i', 'input.mp4', '-ss', '00:01:00', '-t', '10', 'output.mp4'); // Reading the result\n\n      const output = ffmpeg.FS('readFile', 'output.mp4'); // Create a Blob URL\n\n      const videoBlob = new Blob([output.buffer], {\n        type: 'video/mp4'\n      });\n      const trimmedVideoUrl = URL.createObjectURL(videoBlob); // Use trimmedVideoUrl as the source for your video player\n\n      setTrim(trimmedVideoUrl); ///return trimmedVideoUrl;\n    } catch (error) {\n      console.error('Error processing video with FFmpeg:', error);\n    }\n  }, [ffmpeg, createFFmpeg, fetchFile]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      xs: 12,\n      style: {\n        display: ShowVideo || ShowVideo2 ? 'block' : 'none',\n        position: 'fixed',\n        top: '0vh',\n        height: '100vh',\n        backgroundColor: '#555555',\n        width: '100%',\n        margin: 'auto',\n        textAlign: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        style: {\n          margin: \"auto\",\n          textAlign: \"right\",\n          left: '5px',\n          height: \"20px\",\n          position: 'fixed',\n          top: '3vh',\n          right: '3vw'\n        },\n        children: /*#__PURE__*/_jsxDEV(CloseIcon, {\n          onClick: () => {\n            setShowVideo(false);\n            setShowVideo2(false);\n          },\n          className: darkmodeReducer ? \"make-small-icons-clickable-lightCrop dontallowhighlighting zuperkingIcon \" : \"make-small-icons-clickable-darkCrop dontallowhighlighting zuperkingIcon  \",\n          style: {\n            margin: \"auto\",\n            color: \"#ffffff\",\n            fontSize: matchMobile ? `3vh` : `2.5vw`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          go(VideoUrl);\n        },\n        style: {\n          padding: '8vh'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 7\n      }, this), Trim && /*#__PURE__*/_jsxDEV(\"video\", {\n        src: Trim,\n        controls: true,\n        style: {\n          width: '40%',\n          margin: 'auto'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this), ShowVideo && /*#__PURE__*/_jsxDEV(\"video\", {\n        src: VideoUrl,\n        controls: true,\n        style: {\n          width: '40%',\n          margin: 'auto'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }, this), ShowVideo2 && /*#__PURE__*/_jsxDEV(\"video\", {\n        src: VideoUrl2,\n        controls: true,\n        style: {\n          width: '40%',\n          margin: 'auto'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n}\n\n_s(VideoEditorx, \"lRs00XFTZ/XDUbyuICEjv//CruM=\", false, function () {\n  return [useSelector];\n});\n\n_c = VideoEditorx;\nexport const VideoEditor = /*#__PURE__*/React.memo(VideoEditorx);\n_c2 = VideoEditor;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"VideoEditorx\");\n$RefreshReg$(_c2, \"VideoEditor\");","map":{"version":3,"sources":["C:/Users/oghen/OneDrive/Documents/ClikBate/Clikbate/src/upload/VideoEditor.tsx"],"names":["React","useState","useCallback","Grid","useSelector","CloseIcon","matchMobile","createFFmpeg","fetchFile","require","VideoEditorx","VideoUrl","VideoUrl2","ShowVideo2","ShowVideo","setShowVideo2","setShowVideo","darkmode","state","GlobalReducer","darkmodeReducer","Trim","setTrim","ffmpeg","log","go","videoUrl","load","fetchedVideo","FS","run","output","videoBlob","Blob","buffer","type","trimmedVideoUrl","URL","createObjectURL","error","console","display","position","top","height","backgroundColor","width","margin","textAlign","left","right","color","fontSize","padding","VideoEditor","memo"],"mappings":"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","sourcesContent":["import React, {\r\n  useRef,\r\n  useState,\r\n  useEffect,\r\n  useLayoutEffect,\r\n  useCallback,\r\n} from \"react\";\r\n\r\nimport { Grid } from \"@material-ui/core\";\r\nimport MoreHorizIcon from \"@material-ui/icons/MoreHoriz\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useSpring, animated } from \"react-spring\";\r\nimport Masonry from \"@mui/lab/Masonry\";\r\nimport CircleIcon from \"@mui/icons-material/Circle\";\r\nimport Cropper from \"react-easy-crop\";\r\nimport MusicNoteIcon from \"@mui/icons-material/MusicNote\";\r\nimport PhotoIcon from \"@mui/icons-material/Photo\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport GifIcon from \"@mui/icons-material/Gif\";\r\nimport ChevronRightIcon from \"@mui/icons-material/ChevronRight\";\r\nimport Slider from \"@mui/material/Slider\";\r\nimport { AnySoaRecord } from \"dns\";\r\nimport { PreviewCanvas } from \"./PreviewCanvas\";\r\nimport { PreviewCanvasCropAll } from \"./PreviewCanvasCropAll\";\r\nimport CropIcon from \"@mui/icons-material/Crop\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport { matchPc, matchTablet, matchMobile } from \"../DetectDevice\";\r\n\r\n\r\n//import { createFFmpeg, fetchFile } from '@ffmpeg/ffmpeg';\r\nconst { createFFmpeg, fetchFile } = require('@ffmpeg/ffmpeg');\r\n\r\nfunction VideoEditorx({ VideoUrl, VideoUrl2, ShowVideo2, ShowVideo, setShowVideo2, setShowVideo }: any): JSX.Element {\r\n\r\n  ///\r\n  ///\r\n  ///DARKMODE FROM REDUX\r\n  interface RootStateGlobalReducer {\r\n    GlobalReducer: {\r\n      darkmode: boolean;\r\n    };\r\n  }\r\n  const { darkmode } = useSelector((state: RootStateGlobalReducer) => ({\r\n    ...state.GlobalReducer,\r\n  }));\r\n\r\n  const darkmodeReducer = darkmode;\r\n\r\n  const [Trim, setTrim] = useState<any>(null);\r\n\r\n  const ffmpeg = createFFmpeg({ log: true });\r\n\r\n  const go = useCallback(async (videoUrl: any) => {\r\n\r\n\r\n    try {\r\n\r\n      ///console.log(ffmpeg);\r\n\r\n      await ffmpeg.load();\r\n\r\n\r\n\r\n      // Writing the file to FFmpeg filesystem\r\n      const fetchedVideo = await fetchFile(videoUrl);\r\n      ffmpeg.FS('writeFile', 'input.mp4', fetchedVideo);\r\n\r\n      // Execute the FFmpeg command\r\n      // -ss for start time, -t for duration\r\n      await ffmpeg.run('-i', 'input.mp4', '-ss', '00:01:00', '-t', '10', 'output.mp4');\r\n\r\n      // Reading the result\r\n      const output = ffmpeg.FS('readFile', 'output.mp4');\r\n\r\n      // Create a Blob URL\r\n      const videoBlob = new Blob([output.buffer], { type: 'video/mp4' });\r\n      const trimmedVideoUrl = URL.createObjectURL(videoBlob);\r\n\r\n\r\n      // Use trimmedVideoUrl as the source for your video player\r\n      setTrim(trimmedVideoUrl);\r\n\r\n\r\n\r\n      ///return trimmedVideoUrl;\r\n\r\n    } catch (error) {\r\n\r\n\r\n\r\n\r\n      console.error('Error processing video with FFmpeg:', error);\r\n    }\r\n  }, [ffmpeg, createFFmpeg, fetchFile])\r\n\r\n\r\n\r\n  return <>\r\n\r\n    <Grid xs={12} style={{ display: ShowVideo || ShowVideo2 ? 'block' : 'none', position: 'fixed', top: '0vh', height: '100vh', backgroundColor: '#555555', width: '100%', margin: 'auto', textAlign: 'center' }} >\r\n\r\n      <Grid\r\n        item\r\n        xs={12}\r\n        style={{\r\n          margin: \"auto\",\r\n          textAlign: \"right\",\r\n          left: '5px',\r\n          height: \"20px\",\r\n          position: 'fixed',\r\n          top: '3vh',\r\n          right: '3vw'\r\n        }}\r\n      >\r\n        <CloseIcon\r\n          onClick={() => {\r\n            setShowVideo(false);\r\n            setShowVideo2(false);\r\n\r\n          }}\r\n          className={\r\n            darkmodeReducer\r\n              ? \"make-small-icons-clickable-lightCrop dontallowhighlighting zuperkingIcon \"\r\n              : \"make-small-icons-clickable-darkCrop dontallowhighlighting zuperkingIcon  \"\r\n          }\r\n          style={{\r\n            margin: \"auto\",\r\n            color: \"#ffffff\",\r\n            fontSize: matchMobile\r\n              ? `3vh`\r\n              : `2.5vw`,\r\n\r\n          }}\r\n        />\r\n      </Grid>\r\n\r\n      <button\r\n\r\n        onClick={() => {\r\n\r\n          go(VideoUrl);\r\n\r\n        }} style={{ padding: '8vh' }}></button>\r\n\r\n      {\r\n\r\n\r\n        Trim && <video src={Trim} controls style={{ width: '40%', margin: 'auto' }}></video>}\r\n\r\n\r\n      {ShowVideo && <video src={VideoUrl} controls style={{ width: '40%', margin: 'auto' }}></video>}\r\n\r\n      {ShowVideo2 && <video src={VideoUrl2} controls style={{ width: '40%', margin: 'auto' }}></video>}\r\n\r\n\r\n\r\n\r\n\r\n    </Grid >\r\n\r\n  </>;\r\n}\r\n\r\nexport const VideoEditor = React.memo(VideoEditorx);\r\n"]},"metadata":{},"sourceType":"module"}