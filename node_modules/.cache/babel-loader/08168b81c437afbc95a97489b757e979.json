{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\oghen\\\\OneDrive\\\\Documents\\\\ClikBate\\\\super\\\\src\\\\profile\\\\TaskbarCrop.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useCallback, useState, useLayoutEffect } from \"react\";\nimport { Grid } from \"@material-ui/core\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Masonry from \"@mui/lab/Masonry\";\nimport DoneOutlineIcon from '@mui/icons-material/DoneOutline';\nimport { UpdateUploadData } from \"../GlobalActions\";\nimport CropIcon from '@mui/icons-material/Crop';\nimport Slider from \"@material-ui/core/Slider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction TaskbarCropx({\n  showModalUploadTask,\n  uploadClose,\n  setfinalimage,\n  finalImage,\n  setHidecrop\n}) {\n  _s();\n\n  const dispatch = useDispatch(); ///\n  ///\n  ///\n  /// INTERFACE/TYPES FOR SCREENHEIGHT AND DARKMODE\n\n  ///\n  ///\n  ///\n  /// GET DARKMODE FROM REDUX STORE\n  const {\n    darkmode\n  } = useSelector(state => ({ ...state.GlobalReducer\n  }));\n  const darkmodeReducer = darkmode;\n  const cropCanvasRef = useRef(null);\n  const cropCanvasRefx = useRef(null);\n  const navRef = useRef(null);\n  const IconRef = useRef(null);\n  const IconRef2 = useRef(null);\n  const [allowCropAllCanvas, setallowCropAllCanvas] = useState(true);\n  const [CropImageHolder, setCropImageHolder] = useState(null);\n  const [FinalCropImageHolder, setFinalCropImageHolder] = useState(null);\n  const [imageHeight, setimageHeight] = useState(0);\n  const [imageWidth, setimageWidth] = useState(0);\n  const [Box, setBox] = useState(false);\n  const [final, setFinal] = useState(false);\n  const [cropInitial, setcropInitial] = useState({\n    x: 0,\n    y: 0\n  });\n  const [cropInitialx, setcropInitialx] = useState({\n    x: 0,\n    y: 0\n  });\n  const [cropOffset, setcropOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [Drag, setDrag] = useState(false);\n  const [crop, setcrop] = useState({\n    x: 0,\n    y: 0\n  });\n  const [cropx, setcropx] = useState({\n    x: 0,\n    y: 0\n  });\n  const allowscrolltimer = useRef(null);\n  var extendxy = 3.3;\n  const [allowOverflow, setallowOverflow] = useState(false);\n  const [optionscropshow, setoptionscropshow] = useState(true);\n  const [optionscropshow2, setoptionscropshow2] = useState(true);\n  const [zoom, setzoom] = useState(1);\n  const [multiPost, setmultiPost] = useState(false);\n  const [prevImage, setprevimage] = useState([]);\n  const menuTimer5 = useRef(null);\n  const [NewCanH, setNewCanH] = useState(0);\n  const [NewCanW, setNewCanW] = useState(0);\n\n  const updatezoom = (e, data) => {\n    setoptionscropshow2(false);\n    setzoom(data);\n    handleTouchDrag(null, 1000);\n  };\n\n  const {\n    activatefilterImage,\n    activatecropImage,\n    selectedImage,\n    cropimage\n  } = useSelector(state => ({ ...state.GlobalNavuploadReducer\n  }));\n  const activatefilterImageReducer = activatefilterImage;\n  const activatecropImageReducer = activatecropImage;\n  const selectedImageReducer = selectedImage;\n  const cropimageReducer = cropimage;\n  useEffect(() => {\n    const ctx = cropCanvasRef.current.getContext(\"2d\");\n    ctx.clearRect(0, 0, cropCanvasRef.current.width, cropCanvasRef.current.height);\n    setcrop({ ...crop,\n      x: 0,\n      y: 0\n    });\n\n    if (final) {} else {\n      setzoom(1);\n      setBox(false);\n    }\n  }, [CropImageHolder, showModalUploadTask]);\n  const ray = [...prevImage];\n  useEffect(() => {\n    setBox(false);\n  }, []);\n  useEffect(() => {\n    setprevimage(selectedImageReducer);\n  }, [selectedImageReducer]);\n  useEffect(() => {\n    if (prevImage.length > 1) {\n      setmultiPost(true);\n    } else {\n      setmultiPost(false);\n    }\n  }, [prevImage]);\n  const resizeCanvas = useCallback(() => {\n    var imgAspectRatio = cropCanvasRef.current.width / cropCanvasRef.current.height;\n    var screenW = navRef.current.clientWidth;\n    var screenH = navRef.current.clientHeight;\n    let canvasW = screenW;\n    let canvasH = screenH;\n\n    if (imgAspectRatio >= 2.2 || imgAspectRatio <= 0.464) {\n      ///////////////////////////////\n      if (Box) {} else {\n        setBox(true);\n        setzoom(2);\n      } ////////////////////////////////\n\n    }\n\n    if (imgAspectRatio <= 1.63) {\n      canvasH = screenH;\n      canvasW = canvasH * imgAspectRatio;\n    } else {\n      canvasW = screenW;\n      canvasH = canvasW / imgAspectRatio;\n    }\n\n    cropCanvasRef.current.style.height = `${canvasH}px`;\n    cropCanvasRef.current.style.width = `${canvasW}px`;\n    IconRef.current.style.top = `${canvasH / 1.19}px`;\n    IconRef2.current.style.top = `${canvasH / 1.19}px`;\n  }, [cropCanvasRef, Box]);\n\n  function GiveImageSpecificDimensions(Newcropimage) {\n    const imgAspectRatio = Newcropimage.naturalWidth / Newcropimage.naturalHeight;\n\n    if (final) {\n      setcrop({ ...crop,\n        x: cropx.x,\n        y: cropx.y\n      });\n    }\n\n    var canvasW;\n    var canvasH;\n\n    if (imgAspectRatio <= 1.55) {\n      var screenH = 1920;\n      canvasH = screenH;\n      canvasH = screenH;\n      canvasW = canvasH * imgAspectRatio;\n    } else {\n      var screenW = 2048;\n      canvasW = screenW;\n      canvasW = screenW;\n      canvasH = canvasW / imgAspectRatio;\n    }\n\n    setimageHeight(canvasH);\n    setimageWidth(canvasW);\n  }\n\n  useLayoutEffect(() => {\n    const Newcropimage = new Image();\n    Newcropimage.src = cropimageReducer;\n\n    Newcropimage.onload = function () {\n      if (CropImageHolder === Newcropimage) {} else {\n        //////////////\n        setCropImageHolder(Newcropimage);\n        GiveImageSpecificDimensions(Newcropimage);\n      }\n    };\n  }, [cropimageReducer]);\n  useLayoutEffect(() => {\n    if (CropImageHolder && cropCanvasRef.current) {\n      const ctx = cropCanvasRef.current.getContext(\"2d\");\n      const imgAspectRatio = imageWidth / imageHeight; ////////////////////////\n\n      var a = 1.2;\n      var b = 0.8;\n\n      if (zoom <= 1) {\n        if (Box) {\n          setBox(false);\n        } else {}\n      } else {\n        if (Box) {} else {\n          setBox(true);\n        }\n      }\n\n      if (zoom <= 2) {\n        a = 1.2;\n        b = 0.8;\n      } else if (zoom <= 3) {\n        a = 1;\n        b = 1;\n      } else if (zoom <= 4) {\n        a = 1.2;\n        b = 1.2;\n      } else if (zoom <= 5) {\n        a = 1.4;\n        b = 1.4;\n      } else {}\n\n      if (Box) {\n        if (imgAspectRatio === 1) {\n          if (zoom > 2) {\n            cropCanvasRef.current.width = imageWidth / a;\n            cropCanvasRef.current.height = imageWidth / a;\n          } else {\n            cropCanvasRef.current.width = imageWidth;\n            cropCanvasRef.current.height = imageWidth;\n          }\n        } else if (imgAspectRatio <= 1.2) {\n          if (zoom > 2) {\n            cropCanvasRef.current.width = imageWidth / a;\n            cropCanvasRef.current.height = imageWidth / a;\n          } else {\n            cropCanvasRef.current.width = imageWidth / a;\n            cropCanvasRef.current.height = imageWidth * a;\n          }\n        } else {\n          if (zoom > 2) {\n            cropCanvasRef.current.width = imageHeight / b;\n            cropCanvasRef.current.height = imageHeight / b;\n          } else {\n            cropCanvasRef.current.width = imageHeight / b;\n            cropCanvasRef.current.height = imageHeight;\n          }\n        }\n      } else {\n        cropCanvasRef.current.width = imageWidth;\n        cropCanvasRef.current.height = imageHeight;\n      } ////////////////////////////////\n\n\n      resizeCanvas();\n      const w = imageWidth;\n      const h = imageHeight;\n      requestAnimationFrame(() => {\n        if (Box) {\n          ctx.drawImage(CropImageHolder, crop.x, crop.y, w, h);\n        } else {\n          ctx.drawImage(CropImageHolder, 0, 0, w, h);\n        }\n\n        if (final) {}\n      });\n    }\n  }, [CropImageHolder, imageWidth, imageHeight, Box, crop, cropx, zoom, final, cropCanvasRef]);\n\n  const handleTouchStart = (e, type) => {\n    if (Box) {\n      setoptionscropshow(false);\n\n      if (type === 0) {\n        setcropInitial({ ...cropInitial,\n          x: e.clientX * extendxy - cropOffset.x,\n          y: e.clientY * extendxy - cropOffset.y\n        });\n      } else {\n        setcropInitial({ ...cropInitial,\n          x: e.touches[0].clientX * extendxy - cropOffset.x,\n          y: e.touches[0].clientY * extendxy - cropOffset.y\n        });\n      }\n\n      if (e.target) {\n        setDrag(true);\n      }\n    } else {\n      setBox(true);\n    }\n  };\n\n  const handleTouchEnd = () => {\n    if (allowscrolltimer.current) {\n      clearTimeout(allowscrolltimer.current);\n    }\n\n    allowscrolltimer.current = setTimeout(function () {}, 1200);\n    setoptionscropshow(true);\n    setcropInitial({ ...cropInitial,\n      x: crop.x,\n      y: crop.y\n    });\n    setDrag(false);\n  };\n\n  const handleTouchDrag = (e, type) => {\n    if (Drag || type === 1000) {\n      var xx = cropInitial.x;\n      var yy = cropInitial.y;\n\n      if (e) {\n        if (type === 0) {\n          xx = e.clientX * extendxy - cropInitial.x;\n          yy = e.clientY * extendxy - cropInitial.y;\n        } else {\n          xx = e.touches[0].clientX * extendxy - cropInitial.x;\n          yy = e.touches[0].clientY * extendxy - cropInitial.y;\n        }\n      } ///////////////////////////////////////////////\n\n\n      var fz = imageWidth - cropCanvasRef.current.width;\n      fz *= -1;\n\n      if (xx > 0) {\n        xx = 0;\n      } else if (xx < fz) {\n        xx = fz;\n      } //////////////////////////////\n\n\n      var ff = imageHeight - cropCanvasRef.current.height;\n      ff *= -1;\n\n      if (yy > 0) {\n        yy = 0;\n      } else if (yy < ff) {\n        yy = ff;\n      } //////////////////////////////////\n\n\n      setcrop({ ...crop,\n        x: xx,\n        y: yy\n      });\n      setcropOffset({ ...cropOffset,\n        x: xx,\n        y: yy\n      });\n    }\n  };\n\n  const Done = useCallback(p => {\n    setcropx({ ...cropx,\n      x: crop.x,\n      y: crop.y\n    });\n    setFinal(true);\n    dispatch(UpdateUploadData(prevImage, p));\n    setNewCanH(cropCanvasRef.height);\n    setNewCanW(cropCanvasRef.width);\n    const Newcropimage = new Image();\n    Newcropimage.src = prevImage[0];\n\n    Newcropimage.onload = function () {\n      if (FinalCropImageHolder === Newcropimage) {} else {\n        //////////////\n        setFinalCropImageHolder(Newcropimage); ////GiveImageSpecificDimensions(Newcropimage);\n      }\n    }; /// var lim = prevImage.length - 1\n    ///console.log(finalImage)\n\n  }, [crop, prevImage, cropCanvasRefx]);\n  useLayoutEffect(() => {\n    if (FinalCropImageHolder && cropCanvasRefx.current) {\n      const ctx = cropCanvasRef.current.getContext(\"2d\");\n      const w = imageWidth;\n      const h = imageHeight;\n      requestAnimationFrame(() => {\n        if (Box) {\n          ctx.drawImage(CropImageHolder, crop.x, crop.y, w, h);\n        } else {\n          ctx.drawImage(CropImageHolder, 0, 0, w, h);\n        }\n\n        if (final) {}\n      });\n    }\n  }, [FinalCropImageHolder, imageWidth, imageHeight, cropx, zoom, cropCanvasRefx]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      style: {\n        padding: \"0px\",\n        width: '100%',\n        height: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        ref: navRef,\n        item: true,\n        xs: 12,\n        style: {\n          padding: \"0px\",\n          width: '94%',\n          height: multiPost ? \"80%\" : '100%',\n          position: 'fixed',\n          top: '-20000000000px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 17\n      }, this), optionscropshow ? /*#__PURE__*/_jsxDEV(Slider, {\n        value: zoom,\n        onChange: updatezoom,\n        onChangeCommitted: () => {\n          setoptionscropshow2(true);\n        },\n        defaultValue: 1,\n        max: 5,\n        min: 0,\n        step: 0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001,\n        style: {\n          opacity: optionscropshow2 ? 1 : 0.85,\n          width: '18%',\n          left: '40%',\n          top: '5vh',\n          position: 'fixed'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 36\n      }, this) : null, allowCropAllCanvas ? /*#__PURE__*/_jsxDEV(\"canvas\", {\n        onMouseOver: () => {///mouseover(0);\n        },\n        onMouseUp: e => {\n          handleTouchEnd();\n        },\n        onTouchEnd: e => {\n          handleTouchEnd();\n        },\n        onMouseDown: e => {\n          handleTouchStart(e, 0);\n        },\n        onTouchStart: e => {\n          handleTouchStart(e, 1);\n        },\n        onMouseMove: e => {\n          handleTouchDrag(e, 0);\n        },\n        onTouchMove: e => {\n          handleTouchDrag(e, 1);\n        },\n        ref: cropCanvasRef,\n        style: {\n          padding: \"0px\",\n          margin: \"auto\",\n          cursor: \"pointer\",\n          overflow: 'hidden'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 614,\n        columnNumber: 21\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: cropCanvasRefx,\n        style: {\n          padding: \"0px\",\n          margin: \"auto\",\n          cursor: \"pointer\",\n          overflow: 'hidden',\n          position: 'fixed',\n          top: '0vh'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 648,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DoneOutlineIcon, {\n        onClick: Done,\n        ref: IconRef,\n        className: darkmodeReducer ? \"make-small-icons-clickable-darkab dontallowhighlighting zuperkingIcon \" : \"make-small-icons-clickable-lightab  dontallowhighlighting zuperkingIcon  \",\n        style: {\n          color: \"#ffffff\",\n          fontSize: \"3.8vw\",\n          position: \"absolute\",\n          opacity: optionscropshow2 ? 0.94 : 0,\n          borderRadius: '70%',\n          left: '49%',\n          right: \"\",\n          display: optionscropshow ? 'block' : 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 660,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CropIcon, {\n        onClick: () => {\n          if (Box) {\n            setBox(false);\n          } else {\n            setBox(true);\n          }\n        },\n        ref: IconRef2,\n        className: darkmodeReducer ? \"make-small-icons-clickable-darkab dontallowhighlighting zuperkingIcon \" : \"make-small-icons-clickable-lightab  dontallowhighlighting zuperkingIcon  \",\n        style: {\n          color: \"#ffffff\",\n          fontSize: \"2.9vw\",\n          position: \"absolute\",\n          bottom: '5vh',\n          opacity: optionscropshow2 ? 0.94 : 0,\n          right: '43%',\n          display: optionscropshow ? 'none' : 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 682,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        style: {\n          padding: \"0px\"\n        },\n        children: prevImage.length > 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(Masonry, {\n            columns: 2,\n            spacing: 0,\n            style: {\n              padding: \"0px\",\n              overflow: 'hidden'\n            },\n            children: prevImage.map((picture, index) => /*#__PURE__*/_jsxDEV(\"img\", {\n              onClick: () => {\n                dispatch(UpdateUploadData(prevImage, picture));\n                navRef.current.scrollIntoView({\n                  behavior: \"smooth\",\n                  block: \"start\"\n                });\n              },\n              style: {\n                width: '50%',\n                cursor: 'pointer'\n              },\n              src: picture,\n              alt: `Image ${index}`\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 729,\n              columnNumber: 29\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 47\n          }, this)\n        }, void 0, false) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 709,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s(TaskbarCropx, \"aR6mMmtVCin1s50Uj25JgInvmyA=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = TaskbarCropx;\nexport const TaskbarCrop = /*#__PURE__*/React.memo(TaskbarCropx);\n_c2 = TaskbarCrop;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TaskbarCropx\");\n$RefreshReg$(_c2, \"TaskbarCrop\");","map":{"version":3,"sources":["C:/Users/oghen/OneDrive/Documents/ClikBate/super/src/profile/TaskbarCrop.tsx"],"names":["React","useRef","useEffect","useCallback","useState","useLayoutEffect","Grid","useSelector","useDispatch","Masonry","DoneOutlineIcon","UpdateUploadData","CropIcon","Slider","TaskbarCropx","showModalUploadTask","uploadClose","setfinalimage","finalImage","setHidecrop","dispatch","darkmode","state","GlobalReducer","darkmodeReducer","cropCanvasRef","cropCanvasRefx","navRef","IconRef","IconRef2","allowCropAllCanvas","setallowCropAllCanvas","CropImageHolder","setCropImageHolder","FinalCropImageHolder","setFinalCropImageHolder","imageHeight","setimageHeight","imageWidth","setimageWidth","Box","setBox","final","setFinal","cropInitial","setcropInitial","x","y","cropInitialx","setcropInitialx","cropOffset","setcropOffset","Drag","setDrag","crop","setcrop","cropx","setcropx","allowscrolltimer","extendxy","allowOverflow","setallowOverflow","optionscropshow","setoptionscropshow","optionscropshow2","setoptionscropshow2","zoom","setzoom","multiPost","setmultiPost","prevImage","setprevimage","menuTimer5","NewCanH","setNewCanH","NewCanW","setNewCanW","updatezoom","e","data","handleTouchDrag","activatefilterImage","activatecropImage","selectedImage","cropimage","GlobalNavuploadReducer","activatefilterImageReducer","activatecropImageReducer","selectedImageReducer","cropimageReducer","ctx","current","getContext","clearRect","width","height","ray","length","resizeCanvas","imgAspectRatio","screenW","clientWidth","screenH","clientHeight","canvasW","canvasH","style","top","GiveImageSpecificDimensions","Newcropimage","naturalWidth","naturalHeight","Image","src","onload","a","b","w","h","requestAnimationFrame","drawImage","handleTouchStart","type","clientX","clientY","touches","target","handleTouchEnd","clearTimeout","setTimeout","xx","yy","fz","ff","Done","p","padding","position","opacity","left","margin","cursor","overflow","color","fontSize","borderRadius","right","display","bottom","map","picture","index","scrollIntoView","behavior","block","TaskbarCrop","memo"],"mappings":";;;AAAA,OAAOA,KAAP,IACIC,MADJ,EAEIC,SAFJ,EAGIC,WAHJ,EAIIC,QAJJ,EAKIC,eALJ,QAMO,OANP;AAQA,SAASC,IAAT,QAA4C,mBAA5C;AAIA,SAAyBC,WAAzB,EAAsCC,WAAtC,QAAyD,aAAzD;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,eAAP,MAA4B,iCAA5B;AACA,SAASC,gBAAT,QAAiC,kBAAjC;AAIA,OAAOC,QAAP,MAAqB,0BAArB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;;;;AAGA,SAASC,YAAT,CAAsB;AAClBC,EAAAA,mBADkB;AAElBC,EAAAA,WAFkB;AAGlBC,EAAAA,aAHkB;AAIlBC,EAAAA,UAJkB;AAKlBC,EAAAA;AALkB,CAAtB,EAOqB;AAAA;;AACjB,QAAMC,QAAQ,GAAGZ,WAAW,EAA5B,CADiB,CAMjB;AACA;AACA;AACA;;AAQA;AACA;AACA;AACA;AACA,QAAM;AAAEa,IAAAA;AAAF,MAAed,WAAW,CAAEe,KAAD,KAAoC,EACjE,GAAGA,KAAK,CAACC;AADwD,GAApC,CAAD,CAAhC;AAGA,QAAMC,eAAe,GAAGH,QAAxB;AAKA,QAAMI,aAAkB,GAAGxB,MAAM,CAAC,IAAD,CAAjC;AAEA,QAAMyB,cAAmB,GAAGzB,MAAM,CAAC,IAAD,CAAlC;AAEA,QAAM0B,MAAW,GAAG1B,MAAM,CAAC,IAAD,CAA1B;AAEA,QAAM2B,OAAY,GAAG3B,MAAM,CAAC,IAAD,CAA3B;AAEA,QAAM4B,QAAa,GAAG5B,MAAM,CAAC,IAAD,CAA5B;AAEA,QAAM,CAAC6B,kBAAD,EAAqBC,qBAArB,IAA8C3B,QAAQ,CAAU,IAAV,CAA5D;AAEA,QAAM,CAAC4B,eAAD,EAAkBC,kBAAlB,IAAwC7B,QAAQ,CAAM,IAAN,CAAtD;AAEA,QAAM,CAAC8B,oBAAD,EAAuBC,uBAAvB,IAAkD/B,QAAQ,CAAM,IAAN,CAAhE;AAEA,QAAM,CAACgC,WAAD,EAAcC,cAAd,IAAgCjC,QAAQ,CAAC,CAAD,CAA9C;AACA,QAAM,CAACkC,UAAD,EAAaC,aAAb,IAA8BnC,QAAQ,CAAC,CAAD,CAA5C;AAEA,QAAM,CAACoC,GAAD,EAAMC,MAAN,IAAgBrC,QAAQ,CAAU,KAAV,CAA9B;AAEA,QAAM,CAACsC,KAAD,EAAQC,QAAR,IAAoBvC,QAAQ,CAAU,KAAV,CAAlC;AAGA,QAAM,CAACwC,WAAD,EAAcC,cAAd,IAAgCzC,QAAQ,CAAM;AAAE0C,IAAAA,CAAC,EAAE,CAAL;AAAQC,IAAAA,CAAC,EAAE;AAAX,GAAN,CAA9C;AAEA,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkC7C,QAAQ,CAAM;AAAE0C,IAAAA,CAAC,EAAE,CAAL;AAAQC,IAAAA,CAAC,EAAE;AAAX,GAAN,CAAhD;AAEA,QAAM,CAACG,UAAD,EAAaC,aAAb,IAA8B/C,QAAQ,CAAM;AAAE0C,IAAAA,CAAC,EAAE,CAAL;AAAQC,IAAAA,CAAC,EAAE;AAAX,GAAN,CAA5C;AAEA,QAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBjD,QAAQ,CAAU,KAAV,CAAhC;AAEA,QAAM,CAACkD,IAAD,EAAOC,OAAP,IAAkBnD,QAAQ,CAAM;AAAE0C,IAAAA,CAAC,EAAE,CAAL;AAAQC,IAAAA,CAAC,EAAE;AAAX,GAAN,CAAhC;AAEA,QAAM,CAACS,KAAD,EAAQC,QAAR,IAAoBrD,QAAQ,CAAM;AAAE0C,IAAAA,CAAC,EAAE,CAAL;AAAQC,IAAAA,CAAC,EAAE;AAAX,GAAN,CAAlC;AAEA,QAAMW,gBAAgB,GAAGzD,MAAM,CAAuC,IAAvC,CAA/B;AAEA,MAAI0D,QAAQ,GAAG,GAAf;AAEA,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCzD,QAAQ,CAAU,KAAV,CAAlD;AAEA,QAAM,CAAC0D,eAAD,EAAkBC,kBAAlB,IAAwC3D,QAAQ,CAAU,IAAV,CAAtD;AAEA,QAAM,CAAC4D,gBAAD,EAAmBC,mBAAnB,IAA0C7D,QAAQ,CAAU,IAAV,CAAxD;AAEA,QAAM,CAAC8D,IAAD,EAAOC,OAAP,IAAkB/D,QAAQ,CAAM,CAAN,CAAhC;AAEA,QAAM,CAACgE,SAAD,EAAYC,YAAZ,IAA4BjE,QAAQ,CAAC,KAAD,CAA1C;AAGA,QAAM,CAACkE,SAAD,EAAYC,YAAZ,IAA4BnE,QAAQ,CAAC,EAAD,CAA1C;AAEA,QAAMoE,UAAU,GAAGvE,MAAM,CAAuC,IAAvC,CAAzB;AAGA,QAAM,CAACwE,OAAD,EAAUC,UAAV,IAAwBtE,QAAQ,CAAC,CAAD,CAAtC;AAEA,QAAM,CAACuE,OAAD,EAAUC,UAAV,IAAwBxE,QAAQ,CAAC,CAAD,CAAtC;;AAKA,QAAMyE,UAAU,GAAG,CAACC,CAAD,EAASC,IAAT,KAAuB;AACtCd,IAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACAE,IAAAA,OAAO,CAACY,IAAD,CAAP;AACAC,IAAAA,eAAe,CAAC,IAAD,EAAO,IAAP,CAAf;AACH,GAJD;;AAWA,QAAM;AAAEC,IAAAA,mBAAF;AAAuBC,IAAAA,iBAAvB;AAA0CC,IAAAA,aAA1C;AAAyDC,IAAAA;AAAzD,MAAuE7E,WAAW,CACnFe,KAAD,KAA4B,EACxB,GAAGA,KAAK,CAAC+D;AADe,GAA5B,CADoF,CAAxF;AAKA,QAAMC,0BAA0B,GAAGL,mBAAnC;AACA,QAAMM,wBAAwB,GAAGL,iBAAjC;AACA,QAAMM,oBAAoB,GAAGL,aAA7B;AACA,QAAMM,gBAAgB,GAAGL,SAAzB;AAGAlF,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMwF,GAAG,GAAGjE,aAAa,CAACkE,OAAd,CAAsBC,UAAtB,CAAiC,IAAjC,CAAZ;AACAF,IAAAA,GAAG,CAACG,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBpE,aAAa,CAACkE,OAAd,CAAsBG,KAA1C,EAAiDrE,aAAa,CAACkE,OAAd,CAAsBI,MAAvE;AACAxC,IAAAA,OAAO,CAAC,EACJ,GAAGD,IADC;AAEJR,MAAAA,CAAC,EAAE,CAFC;AAGJC,MAAAA,CAAC,EAAE;AAHC,KAAD,CAAP;;AAMA,QAAIL,KAAJ,EAAW,CAAG,CAAd,MAAoB;AAChByB,MAAAA,OAAO,CAAC,CAAD,CAAP;AACA1B,MAAAA,MAAM,CAAC,KAAD,CAAN;AACH;AAIJ,GAhBQ,EAgBN,CAACT,eAAD,EAAkBjB,mBAAlB,CAhBM,CAAT;AAmBA,QAAMiF,GAAU,GAAG,CAAC,GAAG1B,SAAJ,CAAnB;AAYApE,EAAAA,SAAS,CAAC,MAAM;AACZuC,IAAAA,MAAM,CAAC,KAAD,CAAN;AACH,GAFQ,EAEN,EAFM,CAAT;AAUAvC,EAAAA,SAAS,CAAC,MAAM;AACZqE,IAAAA,YAAY,CAACiB,oBAAD,CAAZ;AAEH,GAHQ,EAGN,CAACA,oBAAD,CAHM,CAAT;AAMAtF,EAAAA,SAAS,CAAC,MAAM;AAEZ,QAAIoE,SAAS,CAAC2B,MAAV,GAAmB,CAAvB,EAA0B;AACtB5B,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACH,KAFD,MAEO;AAAEA,MAAAA,YAAY,CAAC,KAAD,CAAZ;AAAsB;AAElC,GANQ,EAMN,CAACC,SAAD,CANM,CAAT;AAeA,QAAM4B,YAAY,GAAG/F,WAAW,CAAC,MAAM;AACnC,QAAIgG,cAAc,GAAG1E,aAAa,CAACkE,OAAd,CAAsBG,KAAtB,GAA8BrE,aAAa,CAACkE,OAAd,CAAsBI,MAAzE;AAEA,QAAIK,OAAO,GAAGzE,MAAM,CAACgE,OAAP,CAAeU,WAA7B;AACA,QAAIC,OAAO,GAAG3E,MAAM,CAACgE,OAAP,CAAeY,YAA7B;AACA,QAAIC,OAAO,GAAGJ,OAAd;AACA,QAAIK,OAAO,GAAGH,OAAd;;AAEA,QAAIH,cAAc,IAAI,GAAlB,IAAyBA,cAAc,IAAI,KAA/C,EAAsD;AAGlD;AACA,UAAI3D,GAAJ,EAAS,CAAG,CAAZ,MAAkB;AACdC,QAAAA,MAAM,CAAC,IAAD,CAAN;AACA0B,QAAAA,OAAO,CAAC,CAAD,CAAP;AACH,OAPiD,CAUlD;;AACH;;AAED,QAAIgC,cAAc,IAAI,IAAtB,EAA4B;AACxBM,MAAAA,OAAO,GAAGH,OAAV;AACAE,MAAAA,OAAO,GAAGC,OAAO,GAAGN,cAApB;AACH,KAHD,MAGO;AACHK,MAAAA,OAAO,GAAGJ,OAAV;AACAK,MAAAA,OAAO,GAAGD,OAAO,GAAGL,cAApB;AACH;;AACD1E,IAAAA,aAAa,CAACkE,OAAd,CAAsBe,KAAtB,CAA4BX,MAA5B,GAAsC,GAAEU,OAAQ,IAAhD;AACAhF,IAAAA,aAAa,CAACkE,OAAd,CAAsBe,KAAtB,CAA4BZ,KAA5B,GAAqC,GAAEU,OAAQ,IAA/C;AAEA5E,IAAAA,OAAO,CAAC+D,OAAR,CAAgBe,KAAhB,CAAsBC,GAAtB,GAA6B,GAAEF,OAAO,GAAG,IAAK,IAA9C;AACA5E,IAAAA,QAAQ,CAAC8D,OAAT,CAAiBe,KAAjB,CAAuBC,GAAvB,GAA8B,GAAEF,OAAO,GAAG,IAAK,IAA/C;AACH,GAjC+B,EAiC7B,CAAChF,aAAD,EAAgBe,GAAhB,CAjC6B,CAAhC;;AAuCA,WAASoE,2BAAT,CAAqCC,YAArC,EAAwD;AACpD,UAAMV,cAAc,GAAGU,YAAY,CAACC,YAAb,GAA4BD,YAAY,CAACE,aAAhE;;AAEA,QAAIrE,KAAJ,EAAW;AACPa,MAAAA,OAAO,CAAC,EACJ,GAAGD,IADC;AAEJR,QAAAA,CAAC,EAAEU,KAAK,CAACV,CAFL;AAGJC,QAAAA,CAAC,EAAES,KAAK,CAACT;AAHL,OAAD,CAAP;AAKH;;AAGD,QAAIyD,OAAJ;AACA,QAAIC,OAAJ;;AACA,QAAIN,cAAc,IAAI,IAAtB,EAA4B;AACxB,UAAIG,OAAO,GAAG,IAAd;AACAG,MAAAA,OAAO,GAAGH,OAAV;AACAG,MAAAA,OAAO,GAAGH,OAAV;AACAE,MAAAA,OAAO,GAAGC,OAAO,GAAGN,cAApB;AACH,KALD,MAKO;AACH,UAAIC,OAAO,GAAG,IAAd;AACAI,MAAAA,OAAO,GAAGJ,OAAV;AACAI,MAAAA,OAAO,GAAGJ,OAAV;AACAK,MAAAA,OAAO,GAAGD,OAAO,GAAGL,cAApB;AACH;;AACD9D,IAAAA,cAAc,CAACoE,OAAD,CAAd;AACAlE,IAAAA,aAAa,CAACiE,OAAD,CAAb;AACH;;AAGDnG,EAAAA,eAAe,CAAC,MAAM;AAClB,UAAMwG,YAAiB,GAAG,IAAIG,KAAJ,EAA1B;AACAH,IAAAA,YAAY,CAACI,GAAb,GAAmBxB,gBAAnB;;AACAoB,IAAAA,YAAY,CAACK,MAAb,GAAsB,YAAY;AAC9B,UAAIlF,eAAe,KAAK6E,YAAxB,EAAsC,CACrC,CADD,MACO;AAEH;AACA5E,QAAAA,kBAAkB,CAAC4E,YAAD,CAAlB;AACAD,QAAAA,2BAA2B,CAACC,YAAD,CAA3B;AACH;AACJ,KARD;AASH,GAZc,EAYZ,CAACpB,gBAAD,CAZY,CAAf;AAkBApF,EAAAA,eAAe,CAAC,MAAM;AAClB,QAAI2B,eAAe,IAAIP,aAAa,CAACkE,OAArC,EAA8C;AAC1C,YAAMD,GAAG,GAAGjE,aAAa,CAACkE,OAAd,CAAsBC,UAAtB,CAAiC,IAAjC,CAAZ;AAGA,YAAMO,cAAc,GAAG7D,UAAU,GAAGF,WAApC,CAJ0C,CAS1C;;AACA,UAAI+E,CAAC,GAAG,GAAR;AAAa,UAAIC,CAAC,GAAG,GAAR;;AAEb,UAAIlD,IAAI,IAAI,CAAZ,EAAe;AAEX,YAAI1B,GAAJ,EAAS;AAAEC,UAAAA,MAAM,CAAC,KAAD,CAAN;AAAe,SAA1B,MAAgC,CAAG;AAGtC,OALD,MAKO;AACH,YAAID,GAAJ,EAAS,CAAG,CAAZ,MAAkB;AAAEC,UAAAA,MAAM,CAAC,IAAD,CAAN;AAAe;AAGtC;;AAID,UAAIyB,IAAI,IAAI,CAAZ,EAAe;AACXiD,QAAAA,CAAC,GAAG,GAAJ;AAASC,QAAAA,CAAC,GAAG,GAAJ;AACZ,OAFD,MAGK,IAAIlD,IAAI,IAAI,CAAZ,EAAe;AAChBiD,QAAAA,CAAC,GAAG,CAAJ;AAAOC,QAAAA,CAAC,GAAG,CAAJ;AACV,OAFI,MAEE,IAAIlD,IAAI,IAAI,CAAZ,EAAe;AAClBiD,QAAAA,CAAC,GAAG,GAAJ;AAASC,QAAAA,CAAC,GAAG,GAAJ;AACZ,OAFM,MAEA,IAAIlD,IAAI,IAAI,CAAZ,EAAe;AAClBiD,QAAAA,CAAC,GAAG,GAAJ;AAASC,QAAAA,CAAC,GAAG,GAAJ;AACZ,OAFM,MAEA,CAAG;;AAIV,UAAI5E,GAAJ,EAAS;AACL,YAAI2D,cAAc,KAAK,CAAvB,EAA0B;AACtB,cAAIjC,IAAI,GAAG,CAAX,EAAc;AACVzC,YAAAA,aAAa,CAACkE,OAAd,CAAsBG,KAAtB,GAA8BxD,UAAU,GAAG6E,CAA3C;AACA1F,YAAAA,aAAa,CAACkE,OAAd,CAAsBI,MAAtB,GAA+BzD,UAAU,GAAG6E,CAA5C;AACH,WAHD,MAGO;AACH1F,YAAAA,aAAa,CAACkE,OAAd,CAAsBG,KAAtB,GAA8BxD,UAA9B;AACAb,YAAAA,aAAa,CAACkE,OAAd,CAAsBI,MAAtB,GAA+BzD,UAA/B;AACH;AACJ,SARD,MASK,IAAI6D,cAAc,IAAI,GAAtB,EAA2B;AAC5B,cAAIjC,IAAI,GAAG,CAAX,EAAc;AACVzC,YAAAA,aAAa,CAACkE,OAAd,CAAsBG,KAAtB,GAA8BxD,UAAU,GAAG6E,CAA3C;AACA1F,YAAAA,aAAa,CAACkE,OAAd,CAAsBI,MAAtB,GAA+BzD,UAAU,GAAG6E,CAA5C;AACH,WAHD,MAGO;AACH1F,YAAAA,aAAa,CAACkE,OAAd,CAAsBG,KAAtB,GAA8BxD,UAAU,GAAG6E,CAA3C;AACA1F,YAAAA,aAAa,CAACkE,OAAd,CAAsBI,MAAtB,GAA+BzD,UAAU,GAAG6E,CAA5C;AACH;AAEJ,SATI,MASE;AACH,cAAIjD,IAAI,GAAG,CAAX,EAAc;AACVzC,YAAAA,aAAa,CAACkE,OAAd,CAAsBG,KAAtB,GAA8B1D,WAAW,GAAGgF,CAA5C;AACA3F,YAAAA,aAAa,CAACkE,OAAd,CAAsBI,MAAtB,GAA+B3D,WAAW,GAAGgF,CAA7C;AACH,WAHD,MAGO;AACH3F,YAAAA,aAAa,CAACkE,OAAd,CAAsBG,KAAtB,GAA8B1D,WAAW,GAAGgF,CAA5C;AACA3F,YAAAA,aAAa,CAACkE,OAAd,CAAsBI,MAAtB,GAA+B3D,WAA/B;AACH;AAEJ;AACJ,OA7BD,MA6BO;AACHX,QAAAA,aAAa,CAACkE,OAAd,CAAsBG,KAAtB,GAA8BxD,UAA9B;AACAb,QAAAA,aAAa,CAACkE,OAAd,CAAsBI,MAAtB,GAA+B3D,WAA/B;AAGH,OAxEyC,CAyE1C;;;AACA8D,MAAAA,YAAY;AACZ,YAAMmB,CAAC,GAAG/E,UAAV;AACA,YAAMgF,CAAC,GAAGlF,WAAV;AAKAmF,MAAAA,qBAAqB,CAAC,MAAM;AACxB,YAAI/E,GAAJ,EAAS;AACLkD,UAAAA,GAAG,CAAC8B,SAAJ,CAAcxF,eAAd,EAA+BsB,IAAI,CAACR,CAApC,EAAuCQ,IAAI,CAACP,CAA5C,EAA+CsE,CAA/C,EAAkDC,CAAlD;AACH,SAFD,MAEO;AACH5B,UAAAA,GAAG,CAAC8B,SAAJ,CAAcxF,eAAd,EAA+B,CAA/B,EAAkC,CAAlC,EAAqCqF,CAArC,EAAwCC,CAAxC;AACH;;AAED,YAAI5E,KAAJ,EAAW,CAKV;AACJ,OAboB,CAArB;AAmBH;AACJ,GAtGc,EAsGZ,CAACV,eAAD,EAAkBM,UAAlB,EAA8BF,WAA9B,EAA2CI,GAA3C,EAAgDc,IAAhD,EAAsDE,KAAtD,EAA6DU,IAA7D,EAAmExB,KAAnE,EAA0EjB,aAA1E,CAtGY,CAAf;;AAgHA,QAAMgG,gBAAgB,GAAG,CAAC3C,CAAD,EAAS4C,IAAT,KAAuB;AAC5C,QAAIlF,GAAJ,EAAS;AACLuB,MAAAA,kBAAkB,CAAC,KAAD,CAAlB;;AACA,UAAI2D,IAAI,KAAK,CAAb,EAAgB;AACZ7E,QAAAA,cAAc,CAAC,EACX,GAAGD,WADQ;AAEXE,UAAAA,CAAC,EAAEgC,CAAC,CAAC6C,OAAF,GAAYhE,QAAZ,GAAuBT,UAAU,CAACJ,CAF1B;AAGXC,UAAAA,CAAC,EAAE+B,CAAC,CAAC8C,OAAF,GAAYjE,QAAZ,GAAuBT,UAAU,CAACH;AAH1B,SAAD,CAAd;AAKH,OAND,MAMO;AACHF,QAAAA,cAAc,CAAC,EACX,GAAGD,WADQ;AAEXE,UAAAA,CAAC,EAAEgC,CAAC,CAAC+C,OAAF,CAAU,CAAV,EAAaF,OAAb,GAAuBhE,QAAvB,GAAkCT,UAAU,CAACJ,CAFrC;AAGXC,UAAAA,CAAC,EAAE+B,CAAC,CAAC+C,OAAF,CAAU,CAAV,EAAaD,OAAb,GAAuBjE,QAAvB,GAAkCT,UAAU,CAACH;AAHrC,SAAD,CAAd;AAKH;;AACD,UAAI+B,CAAC,CAACgD,MAAN,EAAc;AACVzE,QAAAA,OAAO,CAAC,IAAD,CAAP;AACH;AACJ,KAlBD,MAkBO;AACHZ,MAAAA,MAAM,CAAC,IAAD,CAAN;AACH;AACJ,GAtBD;;AA2BA,QAAMsF,cAAc,GAAG,MAAM;AACzB,QAAIrE,gBAAgB,CAACiC,OAArB,EAA8B;AAC1BqC,MAAAA,YAAY,CAACtE,gBAAgB,CAACiC,OAAlB,CAAZ;AACH;;AACDjC,IAAAA,gBAAgB,CAACiC,OAAjB,GAA2BsC,UAAU,CAAC,YAAY,CAEjD,CAFoC,EAElC,IAFkC,CAArC;AAGAlE,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACAlB,IAAAA,cAAc,CAAC,EACX,GAAGD,WADQ;AAEXE,MAAAA,CAAC,EAAEQ,IAAI,CAACR,CAFG;AAGXC,MAAAA,CAAC,EAAEO,IAAI,CAACP;AAHG,KAAD,CAAd;AAKAM,IAAAA,OAAO,CAAC,KAAD,CAAP;AACH,GAdD;;AAmBA,QAAM2B,eAAe,GAAG,CAACF,CAAD,EAAS4C,IAAT,KAAuB;AAC3C,QAAItE,IAAI,IAAIsE,IAAI,KAAK,IAArB,EAA2B;AACvB,UAAIQ,EAAE,GAAGtF,WAAW,CAACE,CAArB;AACA,UAAIqF,EAAE,GAAGvF,WAAW,CAACG,CAArB;;AAEA,UAAI+B,CAAJ,EAAO;AACH,YAAI4C,IAAI,KAAK,CAAb,EAAgB;AACZQ,UAAAA,EAAE,GAAGpD,CAAC,CAAC6C,OAAF,GAAYhE,QAAZ,GAAuBf,WAAW,CAACE,CAAxC;AACAqF,UAAAA,EAAE,GAAGrD,CAAC,CAAC8C,OAAF,GAAYjE,QAAZ,GAAuBf,WAAW,CAACG,CAAxC;AACH,SAHD,MAGO;AACHmF,UAAAA,EAAE,GAAGpD,CAAC,CAAC+C,OAAF,CAAU,CAAV,EAAaF,OAAb,GAAuBhE,QAAvB,GAAkCf,WAAW,CAACE,CAAnD;AACAqF,UAAAA,EAAE,GAAGrD,CAAC,CAAC+C,OAAF,CAAU,CAAV,EAAaD,OAAb,GAAuBjE,QAAvB,GAAkCf,WAAW,CAACG,CAAnD;AAEH;AACJ,OAbsB,CAevB;;;AACA,UAAIqF,EAAE,GAAG9F,UAAU,GAAGb,aAAa,CAACkE,OAAd,CAAsBG,KAA5C;AACAsC,MAAAA,EAAE,IAAI,CAAC,CAAP;;AACA,UAAIF,EAAE,GAAG,CAAT,EAAY;AACRA,QAAAA,EAAE,GAAG,CAAL;AACH,OAFD,MAEO,IAAIA,EAAE,GAAGE,EAAT,EAAa;AAChBF,QAAAA,EAAE,GAAGE,EAAL;AACH,OAtBsB,CAuBvB;;;AACA,UAAIC,EAAE,GAAGjG,WAAW,GAAGX,aAAa,CAACkE,OAAd,CAAsBI,MAA7C;AACAsC,MAAAA,EAAE,IAAI,CAAC,CAAP;;AACA,UAAIF,EAAE,GAAG,CAAT,EAAY;AACRA,QAAAA,EAAE,GAAG,CAAL;AACH,OAFD,MAEO,IAAIA,EAAE,GAAGE,EAAT,EAAa;AAChBF,QAAAA,EAAE,GAAGE,EAAL;AACH,OA9BsB,CA+BvB;;;AACA9E,MAAAA,OAAO,CAAC,EACJ,GAAGD,IADC;AAEJR,QAAAA,CAAC,EAAEoF,EAFC;AAGJnF,QAAAA,CAAC,EAAEoF;AAHC,OAAD,CAAP;AAKAhF,MAAAA,aAAa,CAAC,EACV,GAAGD,UADO;AAEVJ,QAAAA,CAAC,EAAEoF,EAFO;AAGVnF,QAAAA,CAAC,EAAEoF;AAHO,OAAD,CAAb;AAKH;AACJ,GA5CD;;AAiDA,QAAMG,IAAI,GAAGnI,WAAW,CAAEoI,CAAD,IAAY;AACjC9E,IAAAA,QAAQ,CAAC,EACL,GAAGD,KADE;AAELV,MAAAA,CAAC,EAAEQ,IAAI,CAACR,CAFH;AAGLC,MAAAA,CAAC,EAAEO,IAAI,CAACP;AAHH,KAAD,CAAR;AAMAJ,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACAvB,IAAAA,QAAQ,CAACT,gBAAgB,CAAC2D,SAAD,EAAYiE,CAAZ,CAAjB,CAAR;AAEA7D,IAAAA,UAAU,CAACjD,aAAa,CAACsE,MAAf,CAAV;AACAnB,IAAAA,UAAU,CAACnD,aAAa,CAACqE,KAAf,CAAV;AAGA,UAAMe,YAAiB,GAAG,IAAIG,KAAJ,EAA1B;AACAH,IAAAA,YAAY,CAACI,GAAb,GAAmB3C,SAAS,CAAC,CAAD,CAA5B;;AACAuC,IAAAA,YAAY,CAACK,MAAb,GAAsB,YAAY;AAC9B,UAAIhF,oBAAoB,KAAK2E,YAA7B,EAA2C,CAC1C,CADD,MACO;AACH;AACA1E,QAAAA,uBAAuB,CAAC0E,YAAD,CAAvB,CAFG,CAGH;AACH;AACJ,KAPD,CAhBiC,CAyBjC;AACA;;AAKH,GA/BuB,EA+BrB,CAACvD,IAAD,EAAOgB,SAAP,EAAkB5C,cAAlB,CA/BqB,CAAxB;AAmCArB,EAAAA,eAAe,CAAC,MAAM;AAClB,QAAI6B,oBAAoB,IAAIR,cAAc,CAACiE,OAA3C,EAAoD;AAChD,YAAMD,GAAG,GAAGjE,aAAa,CAACkE,OAAd,CAAsBC,UAAtB,CAAiC,IAAjC,CAAZ;AAGA,YAAMyB,CAAC,GAAG/E,UAAV;AACA,YAAMgF,CAAC,GAAGlF,WAAV;AAKAmF,MAAAA,qBAAqB,CAAC,MAAM;AACxB,YAAI/E,GAAJ,EAAS;AACLkD,UAAAA,GAAG,CAAC8B,SAAJ,CAAcxF,eAAd,EAA+BsB,IAAI,CAACR,CAApC,EAAuCQ,IAAI,CAACP,CAA5C,EAA+CsE,CAA/C,EAAkDC,CAAlD;AACH,SAFD,MAEO;AACH5B,UAAAA,GAAG,CAAC8B,SAAJ,CAAcxF,eAAd,EAA+B,CAA/B,EAAkC,CAAlC,EAAqCqF,CAArC,EAAwCC,CAAxC;AACH;;AAED,YAAI5E,KAAJ,EAAW,CAKV;AACJ,OAboB,CAArB;AAmBH;AACJ,GA/Bc,EA+BZ,CAACR,oBAAD,EAAuBI,UAAvB,EAAmCF,WAAnC,EAAgDoB,KAAhD,EAAuDU,IAAvD,EAA6DxC,cAA7D,CA/BY,CAAf;AAuCA,sBACI;AAAA,2BAII,QAAC,IAAD;AACI,MAAA,SAAS,MADb;AAEI,MAAA,KAAK,EAAE;AACH8G,QAAAA,OAAO,EAAE,KADN;AACa1C,QAAAA,KAAK,EAAE,MADpB;AAC4BC,QAAAA,MAAM,EAAE;AADpC,OAFX;AAAA,8BAOI,QAAC,IAAD;AAAM,QAAA,GAAG,EAAEpE,MAAX;AACI,QAAA,IAAI,MADR;AAEI,QAAA,EAAE,EAAE,EAFR;AAGI,QAAA,KAAK,EAAE;AACH6G,UAAAA,OAAO,EAAE,KADN;AACa1C,UAAAA,KAAK,EAAE,KADpB;AAC2BC,UAAAA,MAAM,EAAE3B,SAAS,GAAG,KAAH,GAAW,MADvD;AAC+DqE,UAAAA,QAAQ,EAAE,OADzE;AACkF9B,UAAAA,GAAG,EAAE;AADvF;AAHX;AAAA;AAAA;AAAA;AAAA,cAPJ,EAkBK7C,eAAe,gBAAG,QAAC,MAAD;AACf,QAAA,KAAK,EAAEI,IADQ;AAEf,QAAA,QAAQ,EAAEW,UAFK;AAGf,QAAA,iBAAiB,EAAE,MAAM;AAAEZ,UAAAA,mBAAmB,CAAC,IAAD,CAAnB;AAA4B,SAHxC;AAIf,QAAA,YAAY,EAAE,CAJC;AAKf,QAAA,GAAG,EAAE,CALU;AAMf,QAAA,GAAG,EAAE,CANU;AAOf,QAAA,IAAI,EAAE,+FAPS;AAQf,QAAA,KAAK,EAAE;AAAEyE,UAAAA,OAAO,EAAE1E,gBAAgB,GAAG,CAAH,GAAO,IAAlC;AAAwC8B,UAAAA,KAAK,EAAE,KAA/C;AAAsD6C,UAAAA,IAAI,EAAE,KAA5D;AAAmEhC,UAAAA,GAAG,EAAE,KAAxE;AAA+E8B,UAAAA,QAAQ,EAAE;AAAzF;AARQ;AAAA;AAAA;AAAA;AAAA,cAAH,GAUV,IA5BV,EAgCK3G,kBAAkB,gBAEf;AACI,QAAA,WAAW,EAAE,MAAM,CACf;AACH,SAHL;AAII,QAAA,SAAS,EAAGgD,CAAD,IAAY;AACnBiD,UAAAA,cAAc;AACjB,SANL;AAOI,QAAA,UAAU,EAAGjD,CAAD,IAAY;AACpBiD,UAAAA,cAAc;AACjB,SATL;AAUI,QAAA,WAAW,EAAGjD,CAAD,IAAY;AACrB2C,UAAAA,gBAAgB,CAAC3C,CAAD,EAAI,CAAJ,CAAhB;AACH,SAZL;AAaI,QAAA,YAAY,EAAGA,CAAD,IAAY;AACtB2C,UAAAA,gBAAgB,CAAC3C,CAAD,EAAI,CAAJ,CAAhB;AACH,SAfL;AAgBI,QAAA,WAAW,EAAGA,CAAD,IAAY;AACrBE,UAAAA,eAAe,CAACF,CAAD,EAAI,CAAJ,CAAf;AACH,SAlBL;AAmBI,QAAA,WAAW,EAAGA,CAAD,IAAY;AACrBE,UAAAA,eAAe,CAACF,CAAD,EAAI,CAAJ,CAAf;AACH,SArBL;AAsBI,QAAA,GAAG,EAAErD,aAtBT;AAuBI,QAAA,KAAK,EAAE;AACH+G,UAAAA,OAAO,EAAE,KADN;AAEHI,UAAAA,MAAM,EAAE,MAFL;AAGHC,UAAAA,MAAM,EAAE,SAHL;AAIHC,UAAAA,QAAQ,EAAE;AAJP;AAvBX;AAAA;AAAA;AAAA;AAAA,cAFe,GA+Bf,IA/DR,eAoEI;AACI,QAAA,GAAG,EAAEpH,cADT;AAEI,QAAA,KAAK,EAAE;AACH8G,UAAAA,OAAO,EAAE,KADN;AAEHI,UAAAA,MAAM,EAAE,MAFL;AAGHC,UAAAA,MAAM,EAAE,SAHL;AAIHC,UAAAA,QAAQ,EAAE,QAJP;AAKHL,UAAAA,QAAQ,EAAE,OALP;AAMH9B,UAAAA,GAAG,EAAE;AANF;AAFX;AAAA;AAAA;AAAA;AAAA,cApEJ,eAgFI,QAAC,eAAD;AACI,QAAA,OAAO,EAAE2B,IADb;AAEI,QAAA,GAAG,EAAE1G,OAFT;AAGI,QAAA,SAAS,EACLJ,eAAe,GACT,wEADS,GAET,2EANd;AAQI,QAAA,KAAK,EAAE;AACHuH,UAAAA,KAAK,EAAE,SADJ;AAEHC,UAAAA,QAAQ,EAAE,OAFP;AAGHP,UAAAA,QAAQ,EAAE,UAHP;AAIHC,UAAAA,OAAO,EAAE1E,gBAAgB,GAAG,IAAH,GAAU,CAJhC;AAKHiF,UAAAA,YAAY,EAAE,KALX;AAMHN,UAAAA,IAAI,EAAE,KANH;AAOHO,UAAAA,KAAK,EAAE,EAPJ;AAQHC,UAAAA,OAAO,EAAErF,eAAe,GAAG,OAAH,GAAa;AARlC;AARX;AAAA;AAAA;AAAA;AAAA,cAhFJ,eAsGI,QAAC,QAAD;AACI,QAAA,OAAO,EAAE,MAAM;AACX,cAAItB,GAAJ,EAAS;AACLC,YAAAA,MAAM,CAAC,KAAD,CAAN;AACH,WAFD,MAEO;AACHA,YAAAA,MAAM,CAAC,IAAD,CAAN;AACH;AACJ,SAPL;AASI,QAAA,GAAG,EAAEZ,QATT;AAUI,QAAA,SAAS,EACLL,eAAe,GACT,wEADS,GAET,2EAbd;AAeI,QAAA,KAAK,EAAE;AACHuH,UAAAA,KAAK,EAAE,SADJ;AAEHC,UAAAA,QAAQ,EAAE,OAFP;AAGHP,UAAAA,QAAQ,EAAE,UAHP;AAIHW,UAAAA,MAAM,EAAE,KAJL;AAKHV,UAAAA,OAAO,EAAE1E,gBAAgB,GAAG,IAAH,GAAU,CALhC;AAMHkF,UAAAA,KAAK,EAAE,KANJ;AAOHC,UAAAA,OAAO,EAAErF,eAAe,GAAG,MAAH,GAAY;AAPjC;AAfX;AAAA;AAAA;AAAA;AAAA,cAtGJ,eAiII,QAAC,IAAD;AACI,QAAA,IAAI,MADR;AAEI,QAAA,EAAE,EAAE,EAFR;AAGI,QAAA,KAAK,EAAE;AACH0E,UAAAA,OAAO,EAAE;AADN,SAHX;AAAA,kBASKlE,SAAS,CAAC2B,MAAV,GAAmB,CAAnB,gBAAuB;AAAA,iCAAE,QAAC,OAAD;AACtB,YAAA,OAAO,EAAE,CADa;AAEtB,YAAA,OAAO,EAAE,CAFa;AAGtB,YAAA,KAAK,EAAE;AACHuC,cAAAA,OAAO,EAAE,KADN;AAEHM,cAAAA,QAAQ,EAAE;AAFP,aAHe;AAAA,sBASrBxE,SAAS,CAAC+E,GAAV,CAAc,CAACC,OAAD,EAAeC,KAAf,kBAEX;AAAK,cAAA,OAAO,EAAE,MAAM;AAChBnI,gBAAAA,QAAQ,CAACT,gBAAgB,CAAC2D,SAAD,EAAYgF,OAAZ,CAAjB,CAAR;AACA3H,gBAAAA,MAAM,CAACgE,OAAP,CAAe6D,cAAf,CAA8B;AAC1BC,kBAAAA,QAAQ,EAAE,QADgB;AAE1BC,kBAAAA,KAAK,EAAE;AAFmB,iBAA9B;AAIH,eAND;AAQgB,cAAA,KAAK,EAAE;AAAE5D,gBAAAA,KAAK,EAAE,KAAT;AAAgB+C,gBAAAA,MAAM,EAAE;AAAxB,eARvB;AAQ4D,cAAA,GAAG,EAAES,OARjE;AAQ0E,cAAA,GAAG,EAAG,SAAQC,KAAM;AAR9F,eAQSA,KART;AAAA;AAAA;AAAA;AAAA,oBAFH;AATqB;AAAA;AAAA;AAAA;AAAA;AAAF,yBAAvB,GAuBgB;AAhCrB;AAAA;AAAA;AAAA;AAAA,cAjIJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAJJ,mBADJ;AAmLH;;GA1tBQzI,Y;UAQYN,W,EAoBID,W,EAkFwDA,W;;;KA9GxEO,Y;AA4tBT,OAAO,MAAM6I,WAAW,gBAAG3J,KAAK,CAAC4J,IAAN,CAAW9I,YAAX,CAApB;MAAM6I,W","sourcesContent":["import React, {\r\n    useRef,\r\n    useEffect,\r\n    useCallback,\r\n    useState,\r\n    useLayoutEffect,\r\n} from \"react\";\r\nimport ControlPointDuplicateIcon from \"@mui/icons-material/ControlPointDuplicate\";\r\nimport { Grid, Switch, DialogContent } from \"@material-ui/core\";\r\nimport { matchPc, matchTablet, matchMobile } from \"../DetectDevice\";\r\nimport { useSpring, animated } from \"react-spring\";\r\nimport { OptionsSlider } from \"../profile/OptionsSlider\";\r\nimport { RootStateOrAny, useSelector, useDispatch } from \"react-redux\";\r\nimport Masonry from \"@mui/lab/Masonry\";\r\nimport DoneOutlineIcon from '@mui/icons-material/DoneOutline';\r\nimport { UpdateUploadData } from \"../GlobalActions\";\r\nimport DoneIcon from '@mui/icons-material/Done';\r\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\r\n\r\nimport CropIcon from '@mui/icons-material/Crop';\r\nimport Slider from \"@material-ui/core/Slider\";\r\n\r\n\r\nfunction TaskbarCropx({\r\n    showModalUploadTask,\r\n    uploadClose,\r\n    setfinalimage,\r\n    finalImage,\r\n    setHidecrop\r\n\r\n}: any): JSX.Element {\r\n    const dispatch = useDispatch();\r\n\r\n\r\n\r\n\r\n    ///\r\n    ///\r\n    ///\r\n    /// INTERFACE/TYPES FOR SCREENHEIGHT AND DARKMODE\r\n    interface RootStateGlobalReducer {\r\n        GlobalReducer: {\r\n            darkmode: boolean;\r\n            screenHeight: number;\r\n        };\r\n    }\r\n\r\n    ///\r\n    ///\r\n    ///\r\n    /// GET DARKMODE FROM REDUX STORE\r\n    const { darkmode } = useSelector((state: RootStateGlobalReducer) => ({\r\n        ...state.GlobalReducer,\r\n    }));\r\n    const darkmodeReducer = darkmode;\r\n\r\n\r\n\r\n\r\n    const cropCanvasRef: any = useRef(null);\r\n\r\n    const cropCanvasRefx: any = useRef(null);\r\n\r\n    const navRef: any = useRef(null);\r\n\r\n    const IconRef: any = useRef(null);\r\n\r\n    const IconRef2: any = useRef(null);\r\n\r\n    const [allowCropAllCanvas, setallowCropAllCanvas] = useState<boolean>(true);\r\n\r\n    const [CropImageHolder, setCropImageHolder] = useState<any>(null);\r\n\r\n    const [FinalCropImageHolder, setFinalCropImageHolder] = useState<any>(null);\r\n\r\n    const [imageHeight, setimageHeight] = useState(0);\r\n    const [imageWidth, setimageWidth] = useState(0);\r\n\r\n    const [Box, setBox] = useState<boolean>(false);\r\n\r\n    const [final, setFinal] = useState<boolean>(false);\r\n\r\n\r\n    const [cropInitial, setcropInitial] = useState<any>({ x: 0, y: 0 });\r\n\r\n    const [cropInitialx, setcropInitialx] = useState<any>({ x: 0, y: 0 });\r\n\r\n    const [cropOffset, setcropOffset] = useState<any>({ x: 0, y: 0 });\r\n\r\n    const [Drag, setDrag] = useState<boolean>(false);\r\n\r\n    const [crop, setcrop] = useState<any>({ x: 0, y: 0 });\r\n\r\n    const [cropx, setcropx] = useState<any>({ x: 0, y: 0 });\r\n\r\n    const allowscrolltimer = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n    var extendxy = 3.3;\r\n\r\n    const [allowOverflow, setallowOverflow] = useState<boolean>(false);\r\n\r\n    const [optionscropshow, setoptionscropshow] = useState<boolean>(true);\r\n\r\n    const [optionscropshow2, setoptionscropshow2] = useState<boolean>(true);\r\n\r\n    const [zoom, setzoom] = useState<any>(1);\r\n\r\n    const [multiPost, setmultiPost] = useState(false);\r\n\r\n\r\n    const [prevImage, setprevimage] = useState([]);\r\n\r\n    const menuTimer5 = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n\r\n    const [NewCanH, setNewCanH] = useState(0);\r\n\r\n    const [NewCanW, setNewCanW] = useState(0);\r\n\r\n\r\n\r\n\r\n    const updatezoom = (e: any, data: any) => {\r\n        setoptionscropshow2(false);\r\n        setzoom(data);\r\n        handleTouchDrag(null, 1000);\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const { activatefilterImage, activatecropImage, selectedImage, cropimage } = useSelector(\r\n        (state: RootStateOrAny) => ({\r\n            ...state.GlobalNavuploadReducer,\r\n        })\r\n    );\r\n    const activatefilterImageReducer = activatefilterImage;\r\n    const activatecropImageReducer = activatecropImage;\r\n    const selectedImageReducer = selectedImage;\r\n    const cropimageReducer = cropimage;\r\n\r\n\r\n    useEffect(() => {\r\n        const ctx = cropCanvasRef.current.getContext(\"2d\");\r\n        ctx.clearRect(0, 0, cropCanvasRef.current.width, cropCanvasRef.current.height);\r\n        setcrop({\r\n            ...crop,\r\n            x: 0,\r\n            y: 0,\r\n        });\r\n\r\n        if (final) { } else {\r\n            setzoom(1);\r\n            setBox(false);\r\n        }\r\n\r\n\r\n\r\n    }, [CropImageHolder, showModalUploadTask]);\r\n\r\n\r\n    const ray: any[] = [...prevImage];\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        setBox(false);\r\n    }, []);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        setprevimage(selectedImageReducer);\r\n\r\n    }, [selectedImageReducer]);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if (prevImage.length > 1) {\r\n            setmultiPost(true)\r\n        } else { setmultiPost(false); }\r\n\r\n    }, [prevImage]);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const resizeCanvas = useCallback(() => {\r\n        var imgAspectRatio = cropCanvasRef.current.width / cropCanvasRef.current.height;\r\n\r\n        var screenW = navRef.current.clientWidth;\r\n        var screenH = navRef.current.clientHeight;\r\n        let canvasW = screenW\r\n        let canvasH = screenH\r\n\r\n        if (imgAspectRatio >= 2.2 || imgAspectRatio <= 0.464) {\r\n\r\n\r\n            ///////////////////////////////\r\n            if (Box) { } else {\r\n                setBox(true);\r\n                setzoom(2);\r\n            }\r\n\r\n\r\n            ////////////////////////////////\r\n        }\r\n\r\n        if (imgAspectRatio <= 1.63) {\r\n            canvasH = screenH;\r\n            canvasW = canvasH * imgAspectRatio;\r\n        } else {\r\n            canvasW = screenW;\r\n            canvasH = canvasW / imgAspectRatio;\r\n        }\r\n        cropCanvasRef.current.style.height = `${canvasH}px`;\r\n        cropCanvasRef.current.style.width = `${canvasW}px`;\r\n\r\n        IconRef.current.style.top = `${canvasH / 1.19}px`;\r\n        IconRef2.current.style.top = `${canvasH / 1.19}px`;\r\n    }, [cropCanvasRef, Box])\r\n\r\n\r\n\r\n\r\n\r\n    function GiveImageSpecificDimensions(Newcropimage: any) {\r\n        const imgAspectRatio = Newcropimage.naturalWidth / Newcropimage.naturalHeight;\r\n\r\n        if (final) {\r\n            setcrop({\r\n                ...crop,\r\n                x: cropx.x,\r\n                y: cropx.y,\r\n            });\r\n        }\r\n\r\n\r\n        var canvasW;\r\n        var canvasH;\r\n        if (imgAspectRatio <= 1.55) {\r\n            var screenH = 1920;\r\n            canvasH = screenH\r\n            canvasH = screenH;\r\n            canvasW = canvasH * imgAspectRatio;\r\n        } else {\r\n            var screenW = 2048;\r\n            canvasW = screenW\r\n            canvasW = screenW;\r\n            canvasH = canvasW / imgAspectRatio;\r\n        }\r\n        setimageHeight(canvasH);\r\n        setimageWidth(canvasW);\r\n    }\r\n\r\n\r\n    useLayoutEffect(() => {\r\n        const Newcropimage: any = new Image();\r\n        Newcropimage.src = cropimageReducer;\r\n        Newcropimage.onload = function () {\r\n            if (CropImageHolder === Newcropimage) {\r\n            } else {\r\n\r\n                //////////////\r\n                setCropImageHolder(Newcropimage);\r\n                GiveImageSpecificDimensions(Newcropimage);\r\n            }\r\n        }\r\n    }, [cropimageReducer]);\r\n\r\n\r\n\r\n\r\n\r\n    useLayoutEffect(() => {\r\n        if (CropImageHolder && cropCanvasRef.current) {\r\n            const ctx = cropCanvasRef.current.getContext(\"2d\");\r\n\r\n\r\n            const imgAspectRatio = imageWidth / imageHeight;\r\n\r\n\r\n\r\n\r\n            ////////////////////////\r\n            var a = 1.2; var b = 0.8;\r\n\r\n            if (zoom <= 1) {\r\n\r\n                if (Box) { setBox(false) } else { }\r\n\r\n\r\n            } else {\r\n                if (Box) { } else { setBox(true); }\r\n\r\n\r\n            }\r\n\r\n\r\n\r\n            if (zoom <= 2) {\r\n                a = 1.2; b = 0.8;\r\n            }\r\n            else if (zoom <= 3) {\r\n                a = 1; b = 1;\r\n            } else if (zoom <= 4) {\r\n                a = 1.2; b = 1.2;\r\n            } else if (zoom <= 5) {\r\n                a = 1.4; b = 1.4;\r\n            } else { }\r\n\r\n\r\n\r\n            if (Box) {\r\n                if (imgAspectRatio === 1) {\r\n                    if (zoom > 2) {\r\n                        cropCanvasRef.current.width = imageWidth / a;\r\n                        cropCanvasRef.current.height = imageWidth / a;\r\n                    } else {\r\n                        cropCanvasRef.current.width = imageWidth;\r\n                        cropCanvasRef.current.height = imageWidth;\r\n                    }\r\n                }\r\n                else if (imgAspectRatio <= 1.2) {\r\n                    if (zoom > 2) {\r\n                        cropCanvasRef.current.width = imageWidth / a;\r\n                        cropCanvasRef.current.height = imageWidth / a;\r\n                    } else {\r\n                        cropCanvasRef.current.width = imageWidth / a;\r\n                        cropCanvasRef.current.height = imageWidth * a;\r\n                    }\r\n\r\n                } else {\r\n                    if (zoom > 2) {\r\n                        cropCanvasRef.current.width = imageHeight / b;\r\n                        cropCanvasRef.current.height = imageHeight / b;\r\n                    } else {\r\n                        cropCanvasRef.current.width = imageHeight / b;\r\n                        cropCanvasRef.current.height = imageHeight;\r\n                    }\r\n\r\n                }\r\n            } else {\r\n                cropCanvasRef.current.width = imageWidth;\r\n                cropCanvasRef.current.height = imageHeight;\r\n\r\n\r\n            }\r\n            ////////////////////////////////\r\n            resizeCanvas();\r\n            const w = imageWidth;\r\n            const h = imageHeight;\r\n\r\n\r\n\r\n\r\n            requestAnimationFrame(() => {\r\n                if (Box) {\r\n                    ctx.drawImage(CropImageHolder, crop.x, crop.y, w, h);\r\n                } else {\r\n                    ctx.drawImage(CropImageHolder, 0, 0, w, h);\r\n                }\r\n\r\n                if (final) {\r\n\r\n\r\n\r\n\r\n                }\r\n            });\r\n\r\n\r\n\r\n\r\n\r\n        }\r\n    }, [CropImageHolder, imageWidth, imageHeight, Box, crop, cropx, zoom, final, cropCanvasRef])\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const handleTouchStart = (e: any, type: any) => {\r\n        if (Box) {\r\n            setoptionscropshow(false);\r\n            if (type === 0) {\r\n                setcropInitial({\r\n                    ...cropInitial,\r\n                    x: e.clientX * extendxy - cropOffset.x,\r\n                    y: e.clientY * extendxy - cropOffset.y,\r\n                });\r\n            } else {\r\n                setcropInitial({\r\n                    ...cropInitial,\r\n                    x: e.touches[0].clientX * extendxy - cropOffset.x,\r\n                    y: e.touches[0].clientY * extendxy - cropOffset.y,\r\n                });\r\n            }\r\n            if (e.target) {\r\n                setDrag(true);\r\n            }\r\n        } else {\r\n            setBox(true);\r\n        }\r\n    };\r\n\r\n\r\n\r\n\r\n    const handleTouchEnd = () => {\r\n        if (allowscrolltimer.current) {\r\n            clearTimeout(allowscrolltimer.current);\r\n        }\r\n        allowscrolltimer.current = setTimeout(function () {\r\n\r\n        }, 1200);\r\n        setoptionscropshow(true);\r\n        setcropInitial({\r\n            ...cropInitial,\r\n            x: crop.x,\r\n            y: crop.y,\r\n        });\r\n        setDrag(false);\r\n    };\r\n\r\n\r\n\r\n\r\n    const handleTouchDrag = (e: any, type: any) => {\r\n        if (Drag || type === 1000) {\r\n            var xx = cropInitial.x;\r\n            var yy = cropInitial.y;\r\n\r\n            if (e) {\r\n                if (type === 0) {\r\n                    xx = e.clientX * extendxy - cropInitial.x;\r\n                    yy = e.clientY * extendxy - cropInitial.y;\r\n                } else {\r\n                    xx = e.touches[0].clientX * extendxy - cropInitial.x;\r\n                    yy = e.touches[0].clientY * extendxy - cropInitial.y;\r\n\r\n                }\r\n            }\r\n\r\n            ///////////////////////////////////////////////\r\n            var fz = imageWidth - cropCanvasRef.current.width;\r\n            fz *= -1;\r\n            if (xx > 0) {\r\n                xx = 0;\r\n            } else if (xx < fz) {\r\n                xx = fz\r\n            }\r\n            //////////////////////////////\r\n            var ff = imageHeight - cropCanvasRef.current.height;\r\n            ff *= -1;\r\n            if (yy > 0) {\r\n                yy = 0;\r\n            } else if (yy < ff) {\r\n                yy = ff\r\n            }\r\n            //////////////////////////////////\r\n            setcrop({\r\n                ...crop,\r\n                x: xx,\r\n                y: yy,\r\n            });\r\n            setcropOffset({\r\n                ...cropOffset,\r\n                x: xx,\r\n                y: yy,\r\n            });\r\n        }\r\n    };\r\n\r\n\r\n\r\n\r\n    const Done = useCallback((p: any) => {\r\n        setcropx({\r\n            ...cropx,\r\n            x: crop.x,\r\n            y: crop.y,\r\n        });\r\n\r\n        setFinal(true);\r\n        dispatch(UpdateUploadData(prevImage, p));\r\n\r\n        setNewCanH(cropCanvasRef.height);\r\n        setNewCanW(cropCanvasRef.width);\r\n\r\n\r\n        const Newcropimage: any = new Image();\r\n        Newcropimage.src = prevImage[0];\r\n        Newcropimage.onload = function () {\r\n            if (FinalCropImageHolder === Newcropimage) {\r\n            } else {\r\n                //////////////\r\n                setFinalCropImageHolder(Newcropimage);\r\n                ////GiveImageSpecificDimensions(Newcropimage);\r\n            }\r\n        }\r\n\r\n        /// var lim = prevImage.length - 1\r\n        ///console.log(finalImage)\r\n\r\n\r\n\r\n\r\n    }, [crop, prevImage, cropCanvasRefx]);\r\n\r\n\r\n\r\n    useLayoutEffect(() => {\r\n        if (FinalCropImageHolder && cropCanvasRefx.current) {\r\n            const ctx = cropCanvasRef.current.getContext(\"2d\");\r\n\r\n\r\n            const w = imageWidth;\r\n            const h = imageHeight;\r\n\r\n\r\n\r\n\r\n            requestAnimationFrame(() => {\r\n                if (Box) {\r\n                    ctx.drawImage(CropImageHolder, crop.x, crop.y, w, h);\r\n                } else {\r\n                    ctx.drawImage(CropImageHolder, 0, 0, w, h);\r\n                }\r\n\r\n                if (final) {\r\n\r\n\r\n\r\n\r\n                }\r\n            });\r\n\r\n\r\n\r\n\r\n\r\n        }\r\n    }, [FinalCropImageHolder, imageWidth, imageHeight, cropx, zoom, cropCanvasRefx])\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n\r\n\r\n\r\n            <Grid\r\n                container\r\n                style={{\r\n                    padding: \"0px\", width: '100%', height: \"100%\",\r\n                }}>\r\n\r\n\r\n                <Grid ref={navRef}\r\n                    item\r\n                    xs={12}\r\n                    style={{\r\n                        padding: \"0px\", width: '94%', height: multiPost ? \"80%\" : '100%', position: 'fixed', top: '-20000000000px'\r\n                    }}>\r\n\r\n                </Grid>\r\n\r\n\r\n\r\n                {optionscropshow ? <Slider\r\n                    value={zoom}\r\n                    onChange={updatezoom}\r\n                    onChangeCommitted={() => { setoptionscropshow2(true); }}\r\n                    defaultValue={1}\r\n                    max={5}\r\n                    min={0}\r\n                    step={0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001}\r\n                    style={{ opacity: optionscropshow2 ? 1 : 0.85, width: '18%', left: '40%', top: '5vh', position: 'fixed', }}\r\n                />\r\n                    : null}\r\n\r\n\r\n\r\n                {allowCropAllCanvas ? (\r\n\r\n                    <canvas\r\n                        onMouseOver={() => {\r\n                            ///mouseover(0);\r\n                        }}\r\n                        onMouseUp={(e: any) => {\r\n                            handleTouchEnd();\r\n                        }}\r\n                        onTouchEnd={(e: any) => {\r\n                            handleTouchEnd();\r\n                        }}\r\n                        onMouseDown={(e: any) => {\r\n                            handleTouchStart(e, 0);\r\n                        }}\r\n                        onTouchStart={(e: any) => {\r\n                            handleTouchStart(e, 1);\r\n                        }}\r\n                        onMouseMove={(e: any) => {\r\n                            handleTouchDrag(e, 0);\r\n                        }}\r\n                        onTouchMove={(e: any) => {\r\n                            handleTouchDrag(e, 1);\r\n                        }}\r\n                        ref={cropCanvasRef}\r\n                        style={{\r\n                            padding: \"0px\",\r\n                            margin: \"auto\",\r\n                            cursor: \"pointer\",\r\n                            overflow: 'hidden'\r\n                        }} />\r\n                ) : null}\r\n\r\n\r\n\r\n\r\n                <canvas\r\n                    ref={cropCanvasRefx}\r\n                    style={{\r\n                        padding: \"0px\",\r\n                        margin: \"auto\",\r\n                        cursor: \"pointer\",\r\n                        overflow: 'hidden',\r\n                        position: 'fixed',\r\n                        top: '0vh'\r\n                    }} />\r\n\r\n\r\n                <DoneOutlineIcon\r\n                    onClick={Done}\r\n                    ref={IconRef}\r\n                    className={\r\n                        darkmodeReducer\r\n                            ? \"make-small-icons-clickable-darkab dontallowhighlighting zuperkingIcon \"\r\n                            : \"make-small-icons-clickable-lightab  dontallowhighlighting zuperkingIcon  \"\r\n                    }\r\n                    style={{\r\n                        color: \"#ffffff\",\r\n                        fontSize: \"3.8vw\",\r\n                        position: \"absolute\",\r\n                        opacity: optionscropshow2 ? 0.94 : 0,\r\n                        borderRadius: '70%',\r\n                        left: '49%',\r\n                        right: \"\",\r\n                        display: optionscropshow ? 'block' : 'none'\r\n                    }}\r\n                />\r\n\r\n\r\n\r\n                <CropIcon\r\n                    onClick={() => {\r\n                        if (Box) {\r\n                            setBox(false);\r\n                        } else {\r\n                            setBox(true);\r\n                        }\r\n                    }}\r\n\r\n                    ref={IconRef2}\r\n                    className={\r\n                        darkmodeReducer\r\n                            ? \"make-small-icons-clickable-darkab dontallowhighlighting zuperkingIcon \"\r\n                            : \"make-small-icons-clickable-lightab  dontallowhighlighting zuperkingIcon  \"\r\n                    }\r\n                    style={{\r\n                        color: \"#ffffff\",\r\n                        fontSize: \"2.9vw\",\r\n                        position: \"absolute\",\r\n                        bottom: '5vh',\r\n                        opacity: optionscropshow2 ? 0.94 : 0,\r\n                        right: '43%',\r\n                        display: optionscropshow ? 'none' : 'none'\r\n                    }}\r\n                />\r\n\r\n\r\n                <Grid\r\n                    item\r\n                    xs={12}\r\n                    style={{\r\n                        padding: \"0px\",\r\n                    }}>\r\n\r\n\r\n\r\n                    {prevImage.length > 1 ? <><Masonry\r\n                        columns={2}\r\n                        spacing={0}\r\n                        style={{\r\n                            padding: \"0px\",\r\n                            overflow: 'hidden'\r\n                        }}\r\n                    >\r\n\r\n                        {prevImage.map((picture: any, index: any) => (\r\n\r\n                            <img onClick={() => {\r\n                                dispatch(UpdateUploadData(prevImage, picture));\r\n                                navRef.current.scrollIntoView({\r\n                                    behavior: \"smooth\",\r\n                                    block: \"start\",\r\n                                });\r\n                            }}\r\n\r\n                                key={index} style={{ width: '50%', cursor: 'pointer' }} src={picture} alt={`Image ${index}`} />\r\n\r\n                        ))}\r\n\r\n                    </Masonry ></> : null}\r\n\r\n                </Grid>\r\n\r\n\r\n\r\n            </Grid>\r\n\r\n\r\n\r\n\r\n        </>\r\n    );\r\n}\r\n\r\nexport const TaskbarCrop = React.memo(TaskbarCropx);\r\n"]},"metadata":{},"sourceType":"module"}