{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\oghen\\\\OneDrive\\\\Documents\\\\ClikBate\\\\super\\\\src\\\\upload\\\\UploadProfilePic.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useCallback, useState, useLayoutEffect } from \"react\";\nimport { Grid, DialogContent } from \"@material-ui/core\";\nimport { matchTablet, matchMobile } from \"../DetectDevice\";\nimport { useSpring, animated } from \"react-spring\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Axios from \"axios\";\nimport CheckIcon from \"@mui/icons-material/Check\";\nimport { UserInfoUpdatePROFILE } from \"../log/actions/UserdataAction\";\nimport { UserInfoUpdateBILLBOARD } from \"../log/actions/UserdataAction\";\nimport { usePalette } from \"react-palette\";\nimport { UpdateColorAction } from \"../GlobalActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction UploadProfilePicx({\n  showModalUploadProfile,\n  cropimageProfile,\n  profileimageSource,\n  typex,\n  uploadClose,\n  billdefaultbill\n}) {\n  _s();\n\n  const cropCanvasRefx = useRef(null);\n  const dispatch = useDispatch();\n  const [CropImageHolder, setCropImageHolder] = useState(null);\n  const hdcanvasvalue = 1;\n  const getpreviewFixedWidthRef = useRef(null);\n  const getCropHeightRef = useRef(null);\n  const getCropWidthMobileRef = useRef(null);\n  const getCropWidthMobileReflong = useRef(null);\n  const getCropWidthMobileRefHD = useRef(null);\n  const getCropHeightRefsingle = useRef(null);\n  const getFixedCropWidthRef = useRef(null);\n  const [myCropWidth, setmyCropWidth] = useState(0);\n  const [myCropHeight, setmyCropHeight] = useState(0);\n  const [matchTabletMobile, setmatchTabletMobile] = useState(false);\n  const [getpreviewFixedWidth, setgetpreviewFixedWidth] = useState(0);\n  const [screenH, setscreenH] = useState(0);\n  const {\n    data,\n    loading,\n    error\n  } = usePalette(cropimageProfile);\n  const [waitONLOAD, setwaitONLOAD] = useState(true);\n  const [getCropHeightRealImageRatio, setgetCropHeightRealImageRatio] = useState(0);\n  const [getCropWidthMobile, setgetCropWidthMobile] = useState(0);\n  const [getCropWidthMobileHD, setgetCropWidthMobileHD] = useState(0);\n  const [widelongboxmobileimage, setwidelongboxmobileimage] = useState(false);\n  const [widelongboxmobileimagex, setwidelongboxmobileimagex] = useState(false);\n  const [OriginalImageWidth, setOriginalImageWidth] = useState(0);\n  const [OriginalImageHeight, setOriginalImageHeight] = useState(0);\n  const [cropwidth, setcropwidth] = useState(0);\n  const [cropheight, setcropheight] = useState(0);\n  const [WideImageCheck, setWideImageCheck] = useState(false);\n  const [SourceWidthForCropX, setSourceWidthForCropX] = useState(0);\n  const [SourceWidthForCropY, setSourceWidthForCropY] = useState(0);\n  const [BoxCropActivated, setBoxCropActivated] = useState(true);\n  const [zoom, setzoom] = useState(1);\n  const [crop, setcrop] = useState({\n    x: 0,\n    y: 0\n  });\n  const [optionscropshow, setoptionscropshow] = useState(true);\n  const [superLoadFadex, setsuperLoadFadex] = useState(false);\n  const [s3finaldata, sets3finaldata] = useState([0, 0]);\n  var s3finaldatax = [...s3finaldata];\n  const [quality, setquality] = useState(1);\n\n  const callQuality = () => {\n    if (typex === \"Profile\") {\n      setquality(1.1);\n    } else {\n      setquality(1.5);\n    }\n  };\n\n  useEffect(() => {\n    callQuality();\n  }, [typex]); //\n  //\n  //\n  //USE SLIDE DOWN ANIMATION FROM REACT SPRING\n\n  const animation = useSpring({\n    config: {\n      duration: 600\n    },\n    opacity: showModalUploadProfile ? 1 : 0,\n    transform: showModalUploadProfile ? `translateY(0%)` : `translateY(-100%)`,\n    padding: \"0px\"\n  }); ///\n  ///\n  ///\n  /// GET DARKMODE FROM REDUX STORE\n\n  const {\n    darkmode\n  } = useSelector(state => ({ ...state.GlobalReducer\n  }));\n  const darkmodeReducer = darkmode;\n  const {\n    REACT_APP_SUPERSTARZ_URL\n  } = process.env;\n  const cropscrollRef = useRef(null);\n  const cropTOPLEVELScrollRef = useRef(null); ///\n  ///\n  ///\n  ///GET DIMENSIONS AND  SCREEN HEIGHT\n\n  useLayoutEffect(() => {\n    if (matchTablet || matchMobile) {\n      setmatchTabletMobile(true);\n    }\n\n    if (getpreviewFixedWidthRef.current && getpreviewFixedWidthRef.current.clientWidth) {\n      setgetpreviewFixedWidth(getpreviewFixedWidthRef.current.clientWidth);\n    }\n\n    if (getCropHeightRefsingle.current && getCropHeightRefsingle.current.clientHeight) {\n      setscreenH(getCropHeightRefsingle.current.clientHeight);\n    }\n\n    if (profileimageSource.length === 1) {\n      setwaitONLOAD(false);\n\n      if (getCropHeightRefsingle.current && getCropHeightRefsingle.current.clientHeight || getCropHeightRef.current) {\n        if (matchTabletMobile) {\n          setmyCropHeight(getCropWidthMobileRef.current.clientWidth * hdcanvasvalue);\n          setmyCropWidth(getCropWidthMobileRef.current.clientWidth * hdcanvasvalue);\n        } else {\n          if (typex === \"Profile\") {\n            setmyCropWidth(getCropHeightRefsingle.current.clientHeight * hdcanvasvalue);\n            setmyCropHeight(getCropHeightRefsingle.current.clientHeight * hdcanvasvalue);\n          } else {\n            if (WideImageCheck) {\n              setmyCropWidth(getCropHeightRefsingle.current.clientHeight * hdcanvasvalue + getCropHeightRefsingle.current.clientHeight * 0);\n              setmyCropHeight(getCropHeightRefsingle.current.clientHeight * hdcanvasvalue - getCropHeightRefsingle.current.clientHeight * 0.22);\n            } else {\n              setmyCropWidth(getCropHeightRefsingle.current.clientHeight * hdcanvasvalue + getCropHeightRefsingle.current.clientHeight * 0.2);\n              setmyCropHeight(getCropHeightRefsingle.current.clientHeight * hdcanvasvalue - getCropHeightRefsingle.current.clientHeight * 0.32);\n            }\n          }\n        }\n\n        setgetCropHeightRealImageRatio(getCropHeightRefsingle.current.clientHeight * hdcanvasvalue);\n      }\n    } else {\n      if (getCropHeightRef.current && getCropHeightRef.current.clientHeight) {\n        if (matchTabletMobile) {\n          setmyCropHeight(getCropWidthMobileRef.current.clientWidth * hdcanvasvalue);\n          setmyCropWidth(getCropWidthMobileRef.current.clientWidth * hdcanvasvalue);\n        } else {\n          setmyCropHeight(getCropHeightRef.current.clientHeight * hdcanvasvalue);\n          setmyCropWidth(getCropHeightRef.current.clientHeight * hdcanvasvalue);\n        }\n\n        setgetCropHeightRealImageRatio(getCropHeightRef.current.clientHeight);\n      }\n    }\n\n    if (getCropWidthMobileRef.current && getCropWidthMobileRef.current.clientWidth) {\n      setgetCropWidthMobile(getCropWidthMobileRef.current.clientWidth);\n    }\n\n    if (getCropWidthMobileRefHD.current && getCropWidthMobileRefHD.current.clientWidth) {\n      setgetCropWidthMobileHD(getCropWidthMobileRefHD.current.clientWidth);\n    }\n  }, [profileimageSource, typex, WideImageCheck]);\n  const draw = useCallback((ctx, dimensions, type, axis, allowZoomedAxis) => {\n    var allowZoomedaxis, aa;\n\n    if (typex === \"Profile\") {\n      aa = -(dimensions * zoom) / 4;\n    } else {\n      aa = axis;\n    }\n\n    if (zoom === 1) {\n      allowZoomedaxis = 0;\n    } else {\n      allowZoomedaxis = allowZoomedAxis;\n    }\n\n    if (type === 1) {\n      ctx.drawImage(CropImageHolder, aa, allowZoomedaxis, dimensions * zoom, myCropHeight * quality * zoom);\n    } else if (type === 2) {\n      ctx.drawImage(CropImageHolder, allowZoomedaxis, axis, myCropWidth * quality * zoom, dimensions * zoom);\n    } else {\n      ctx.drawImage(CropImageHolder, 0, 0, OriginalImageWidth, OriginalImageHeight);\n    }\n  }, [OriginalImageWidth, OriginalImageHeight, CropImageHolder, myCropHeight, myCropWidth, zoom, typex]);\n  useLayoutEffect(() => {\n    const Newcropimage = new Image();\n    Newcropimage.src = cropimageProfile;\n\n    Newcropimage.onload = function () {\n      if (CropImageHolder === Newcropimage) {} else {\n        setCropImageHolder(Newcropimage);\n      }\n\n      var data1 = 0;\n      var data2 = 0;\n      var RatioNewcropimageNaturalHeight = Newcropimage.naturalHeight / myCropHeight;\n      var NewcropimageWidth = Newcropimage.naturalWidth / RatioNewcropimageNaturalHeight;\n      var RatioNewcropimageNaturalWidth = Newcropimage.naturalWidth / getCropWidthMobileHD;\n      var NewcropimageHeight = Newcropimage.naturalHeight / RatioNewcropimageNaturalWidth;\n      var RatioNewcropimageNaturalWidthxx = Newcropimage.naturalWidth / getCropWidthMobile;\n      var NewcropimageHeightxx = Newcropimage.naturalHeight / RatioNewcropimageNaturalWidthxx; ////// CANVAS  CROPPER DIMENSIONS  PC MOBILE(canvaswidth)\n\n      if (matchTabletMobile && NewcropimageHeightxx < screenH) {\n        setwidelongboxmobileimage(true);\n        setwidelongboxmobileimagex(true);\n\n        if (OriginalImageHeight === NewcropimageHeight) {} else {\n          setOriginalImageHeight(NewcropimageHeight);\n          data2 = NewcropimageHeight;\n        } //\n\n\n        if (OriginalImageWidth === getCropWidthMobileHD) {} else {\n          setOriginalImageWidth(getCropWidthMobileHD);\n          data1 = getCropWidthMobileHD;\n        }\n      } else {\n        setwidelongboxmobileimage(false);\n        setwidelongboxmobileimagex(false);\n\n        if (OriginalImageWidth === NewcropimageWidth) {} else {\n          setOriginalImageWidth(NewcropimageWidth);\n          data1 = NewcropimageWidth;\n        } ///\n\n\n        if (OriginalImageHeight === myCropHeight) {} else {\n          setOriginalImageHeight(myCropHeight);\n          data2 = myCropHeight;\n        }\n      } ////// CANVAS  CROPPER DIMENSIONS  PC MOBILE(canvaswidth)\n\n\n      if (Newcropimage.naturalWidth > Newcropimage.naturalHeight) {\n        setWideImageCheck(true);\n      } else {\n        setWideImageCheck(false);\n      }\n\n      if (cropwidth === data1) {} else {\n        setcropwidth(data1);\n      }\n\n      if (cropheight === data2) {} else {\n        setcropheight(data2);\n      }\n    };\n  }, [cropimageProfile, showModalUploadProfile]); ///\n  ///\n  ///\n  /// INTERFACE/TYPES FOR SCREENHEIGHT AND DARKMODE\n\n  ///\n  ///\n  ///\n  /// GET SCREENHEIGHT FROM REDUX STORE\n  const {\n    id,\n    username,\n    billboard1,\n    billboardstate\n  } = useSelector(state => ({ ...state.UserdataReducer\n  }));\n  const idReducer = id;\n  const usernameReducer = username;\n  const billboard1Reducer = billboard1;\n  const billboardstateReducer = billboardstate;\n\n  function blobToBase64(blob) {\n    return new Promise((resolve, _) => {\n      const reader = new FileReader();\n\n      reader.onloadend = () => resolve(reader.result);\n\n      reader.readAsDataURL(blob);\n    });\n  }\n\n  const postbillboardData = useCallback((hdBlob, thumbBlob, hdBase64) => {\n    var gg = \"\";\n    GetSecureURL(hdBlob, thumbBlob, hdBase64, true, gg);\n  }, [idReducer, blobToBase64]);\n\n  const GetSecureURL = (hdBlob, thumbBlob, hdBase64, billboard, color) => {\n    Axios.post(`${REACT_APP_SUPERSTARZ_URL}/get_signed_url_4upload`).then(response => {\n      setsuperLoadFadex(false);\n      var url = response.data.url;\n      setsuperLoadFadex(true);\n      PutImageInS3WithURL(thumbBlob, url, url.urlHD, hdBlob, hdBase64, false, billboard, color);\n    }).catch(function (error) {\n      setsuperLoadFadex(false);\n      alert(\"caption erroerrr\");\n    });\n  };\n\n  const PutImageInS3WithURL = useCallback((thumbBlob, ur, urlx, a, b, allow, billboard, color) => {\n    Axios.put(urlx, a).then(response => {\n      setsuperLoadFadex(false);\n      console.log(response);\n\n      if (response.status === 200) {\n        setsuperLoadFadex(true);\n\n        if (allow) {\n          let imagelink = urlx.split(\"?\")[0];\n          var billtype = 1;\n\n          if (billboard1Reducer !== billdefaultbill) {\n            billtype = 2;\n          }\n\n          var bi = 0;\n\n          if (billboardstateReducer === 0) {\n            bi = 1;\n          } else {\n            bi = 0;\n          }\n\n          if (billboard) {\n            var zzaatak = {\n              imagedata: s3finaldatax[0],\n              imagedataThumb: imagelink,\n              id: idReducer,\n              type: bi\n            };\n            UpdateBillboardDatabaseStatus200(zzaatak, b);\n          } else {\n            var datak = {\n              imagedata: s3finaldatax[0],\n              imagedataThumb: imagelink,\n              id: idReducer,\n              color: color.darkVibrant,\n              color2: color.darkVibrant\n            };\n            UpdateProfileDatabaseStatus200(datak, b, color);\n          }\n        } else {\n          let imagelinkx = urlx.split(\"?\")[0];\n          s3finaldatax[0] = imagelinkx;\n          PutImageInS3WithURL(thumbBlob, ur, ur.urlThumb, thumbBlob, b, true, billboard, color);\n        }\n      }\n    }).catch(function (error) {\n      setsuperLoadFadex(false);\n      alert(\"caption erroerrr\");\n    });\n  }, [idReducer, s3finaldatax, billboard1Reducer, billboardstateReducer]);\n\n  const UpdateBillboardDatabaseStatus200 = (datak, b) => {\n    Axios.put(`${REACT_APP_SUPERSTARZ_URL}/billboard_upload_data`, {\n      values: datak\n    }).then(response => {\n      setsuperLoadFadex(false);\n\n      if (response.data.message === \"billboard image uploaded\") {\n        setsuperLoadFadex(false);\n\n        if (datak.type === 0) {\n          const data = {\n            billboard2: b\n          };\n        } else {\n          const data = {\n            billboard1: b\n          };\n        }\n\n        dispatch(UserInfoUpdateBILLBOARD(data, datak.type));\n        uploadClose(3);\n      }\n    }).catch(function (error) {\n      setsuperLoadFadex(false);\n      alert(\" error\");\n    });\n  };\n\n  const UpdateProfileDatabaseStatus200 = (datak, b, color) => {\n    Axios.put(`${REACT_APP_SUPERSTARZ_URL}/profile_upload_data`, {\n      values: datak\n    }).then(response => {\n      setsuperLoadFadex(false);\n\n      if (response.data.message === \"profile image data updated\") {\n        var colorboy = {\n          color1: color.darkVibrant,\n          color2: color.darkVibrant,\n          colortype: 0\n        };\n        dispatch(UpdateColorAction(colorboy, 1));\n        const data = {\n          image: b\n        };\n        dispatch(UserInfoUpdatePROFILE(data));\n        uploadClose(4);\n      }\n    }).catch(function (error) {\n      setsuperLoadFadex(false);\n      alert(\" error\");\n    });\n  };\n\n  const postProfiledata = useCallback((hdBlob, thumbBlob, hdBase64, gg) => {\n    setsuperLoadFadex(true);\n    GetSecureURL(hdBlob, thumbBlob, hdBase64, false, gg);\n  }, [idReducer, s3finaldata]);\n\n  const drawcropper = (upl, gg) => {\n    if (CropImageHolder && cropCanvasRefx.current) {\n      const ctx = cropCanvasRefx.current.getContext(\"2d\");\n      var nn = myCropHeight * quality;\n      var RatiofromOriginalandfixedHeight = OriginalImageHeight / nn;\n      var NewBoxRatioWidth_WIDEIMAGE = OriginalImageWidth / RatiofromOriginalandfixedHeight;\n\n      if (SourceWidthForCropX === NewBoxRatioWidth_WIDEIMAGE) {} else {\n        setSourceWidthForCropX(NewBoxRatioWidth_WIDEIMAGE);\n      }\n\n      var bb = myCropWidth * quality;\n      var RatiofromOriginalandfixedHeightx = OriginalImageWidth / bb;\n      var NewBoxRatioWidth_LONGIMAGE = OriginalImageHeight / RatiofromOriginalandfixedHeightx;\n\n      if (SourceWidthForCropY === NewBoxRatioWidth_LONGIMAGE) {} else {\n        setSourceWidthForCropY(NewBoxRatioWidth_LONGIMAGE);\n      }\n\n      var ratioh = OriginalImageWidth * 3 / OriginalImageWidth;\n      var ratiow = OriginalImageHeight * 3 / OriginalImageHeight;\n\n      if (BoxCropActivated) {\n        cropCanvasRefx.current.width = myCropWidth * quality;\n        cropCanvasRefx.current.height = myCropHeight * quality;\n      } else {\n        cropCanvasRefx.current.width = OriginalImageWidth;\n        cropCanvasRefx.current.height = OriginalImageHeight;\n      }\n\n      var centerpreview = cropCanvasRefx.current.width / 1.5 - NewBoxRatioWidth_LONGIMAGE / 1.5;\n      var xtraZoom = myCropHeight / NewBoxRatioWidth_WIDEIMAGE;\n      var centerCropCanvas = cropCanvasRefx.current.width / 2 - NewBoxRatioWidth_WIDEIMAGE / 2; //////////////////////////CSS CALCULATION MOBILE PC\n\n      var RatiofromOriginalandfixedHeight = OriginalImageHeight / getCropHeightRealImageRatio;\n      var newcropCSSWidth = OriginalImageWidth / RatiofromOriginalandfixedHeight; ///\n\n      var RatiofromOriginalandfixedWidth = OriginalImageWidth / getCropWidthMobile;\n      var newcropCSSHeight = OriginalImageHeight / RatiofromOriginalandfixedWidth; //////////////////////////CSS CALCULATION MOBILE PC\n\n      if (BoxCropActivated) {\n        var xx = myCropWidth * zoom;\n        var RatiofromOriginalandfixedHeightx = OriginalImageWidth / xx;\n        var NewBoxRatioWidth_LONGIMAGEx = OriginalImageHeight / RatiofromOriginalandfixedHeightx;\n        var xxx = NewBoxRatioWidth_LONGIMAGE * zoom;\n        var RatiofromOriginalandfixedWidthx = OriginalImageHeight / xxx;\n        var NewBoxRatioWidth_WIDEIMAGEx = OriginalImageWidth / RatiofromOriginalandfixedWidthx;\n        var xx2 = NewBoxRatioWidth_WIDEIMAGE * zoom;\n        var RatiofromOriginalandfixedHeightx2 = OriginalImageWidth / xx2;\n        var NewBoxRatioWidth_LONGIMAGEx2 = OriginalImageHeight / RatiofromOriginalandfixedHeightx2;\n        var xxx2 = myCropHeight * zoom;\n        var RatiofromOriginalandfixedWidthx2 = OriginalImageHeight / xxx2;\n        var NewBoxRatioWidth_WIDEIMAGEx2 = OriginalImageWidth / RatiofromOriginalandfixedWidthx2;\n\n        if (OriginalImageWidth > OriginalImageHeight) {\n          if (OriginalImageHeight === OriginalImageWidth) {\n            requestAnimationFrame(async () => {\n              draw(ctx, NewBoxRatioWidth_WIDEIMAGE, 1, 0, crop.x);\n\n              try {\n                if (upl === 1) {\n                  var data = cropCanvasRefx.current.toDataURL(\"image/jpeg\", 1.0);\n                  var datathumb = cropCanvasRefx.current.toDataURL(\"image/jpeg\", 0.05);\n                  const res = await fetch(data);\n                  const datax = await res.blob();\n                  const resdatathumb = await fetch(datathumb);\n                  const datathumbx = await resdatathumb.blob();\n\n                  if (typex === \"Profile\") {\n                    var base64String = await blobToBase64(datax);\n                    postProfiledata(datax, datathumbx, base64String, gg);\n                  } else {\n                    var base64String = await blobToBase64(datax);\n                    postbillboardData(datax, datathumbx, base64String);\n                  }\n                }\n              } catch {\n                console.log(\"upload profile pic\");\n              }\n            });\n          } else {\n            requestAnimationFrame(async () => {\n              draw(ctx, NewBoxRatioWidth_WIDEIMAGE, 1, crop.x, crop.y);\n\n              try {\n                if (upl === 1) {\n                  var data = cropCanvasRefx.current.toDataURL(\"image/jpeg\", 1.0);\n                  var datathumb = cropCanvasRefx.current.toDataURL(\"image/jpeg\", 0.05);\n                  const res = await fetch(data);\n                  const datax = await res.blob();\n                  const resdatathumb = await fetch(datathumb);\n                  const datathumbx = await resdatathumb.blob();\n\n                  if (typex === \"Profile\") {\n                    var base64String = await blobToBase64(datax);\n                    postProfiledata(datax, datathumbx, base64String, gg);\n                  } else {\n                    var base64String = await blobToBase64(datax);\n                    postbillboardData(datax, datathumbx, base64String);\n                  }\n                }\n              } catch {\n                console.log(\"upload profile pic\");\n              }\n            });\n          }\n        } else {\n          if (OriginalImageHeight === OriginalImageWidth) {\n            requestAnimationFrame(async () => {\n              draw(ctx, NewBoxRatioWidth_LONGIMAGE, 2, 0, crop.x);\n\n              try {\n                if (upl === 1) {\n                  var data = cropCanvasRefx.current.toDataURL(\"image/jpeg\", 1.0);\n                  var datathumb = cropCanvasRefx.current.toDataURL(\"image/jpeg\", 0.05);\n                  const res = await fetch(data);\n                  const datax = await res.blob();\n                  const resdatathumb = await fetch(datathumb);\n                  const datathumbx = await resdatathumb.blob();\n\n                  if (typex === \"Profile\") {\n                    var base64String = await blobToBase64(datax);\n                    postProfiledata(datax, datathumbx, base64String, gg);\n                  } else {\n                    var base64String = await blobToBase64(datax);\n                    postbillboardData(datax, datathumbx, base64String);\n                  }\n                }\n              } catch {\n                console.log(\"upload profile pic\");\n              }\n            });\n          } else {\n            requestAnimationFrame(async () => {\n              draw(ctx, NewBoxRatioWidth_LONGIMAGE, 2, crop.y, crop.x);\n\n              try {\n                if (upl === 1) {\n                  var data = cropCanvasRefx.current.toDataURL(\"image/jpeg\", 1.0);\n                  var datathumb = cropCanvasRefx.current.toDataURL(\"image/jpeg\", 0.05);\n                  const res = await fetch(data);\n                  const datax = await res.blob();\n                  const resdatathumb = await fetch(datathumb);\n                  const datathumbx = await resdatathumb.blob();\n\n                  if (typex === \"Profile\") {\n                    var base64String = await blobToBase64(datax);\n                    postProfiledata(datax, datathumbx, base64String, gg);\n                  } else {\n                    var base64String = await blobToBase64(datax);\n                    postbillboardData(datax, datathumbx, base64String);\n                  }\n                }\n              } catch {\n                console.log(\"upload profile pic\");\n              }\n            });\n          }\n        }\n      } else {\n        requestAnimationFrame(async () => {\n          draw(ctx, 0, 3, 0, crop.x);\n\n          try {\n            if (upl === 1) {\n              var data = cropCanvasRefx.current.toDataURL(\"image/jpeg\", 1.0);\n              var datathumb = cropCanvasRefx.current.toDataURL(\"image/jpeg\", 0.05);\n              const res = await fetch(data);\n              const datax = await res.blob();\n              const resdatathumb = await fetch(datathumb);\n              const datathumbx = await resdatathumb.blob();\n\n              if (typex === \"Profile\") {\n                var base64String = await blobToBase64(datax);\n                postProfiledata(datax, datathumbx, base64String, gg);\n              } else {\n                var base64String = await blobToBase64(datax);\n                postbillboardData(datax, datathumbx, base64String);\n              }\n            }\n          } catch {\n            console.log(\"upload profile pic\");\n          }\n        });\n      }\n    }\n  };\n\n  useLayoutEffect(() => {\n    drawcropper(0, data);\n  }, [CropImageHolder, BoxCropActivated, OriginalImageWidth, OriginalImageHeight, widelongboxmobileimage, myCropHeight, crop, zoom, data]);\n\n  const done = () => {\n    drawcropper(1, data);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [showModalUploadProfile ? /*#__PURE__*/_jsxDEV(DialogContent, {\n      className: darkmodeReducer ? \"dialog-container\" : \"dialog-container\",\n      style: {\n        padding: \"0px\",\n        height: \"100vh\",\n        position: \"fixed\",\n        zIndex: 100,\n        cursor: \"default\",\n        overflow: \"hidden\"\n      },\n      children: [superLoadFadex ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          style: {\n            backgroundColor: darkmodeReducer ? \"rgba(50,50,50,0.65)\" : \"rgba(250,250,250,0.65)\",\n            position: \"fixed\",\n            top: \"0px\",\n            width: \"100%\",\n            height: \"100%\",\n            zIndex: 10\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 880,\n          columnNumber: 15\n        }, this), \" \"]\n      }, void 0, true) : null, /*#__PURE__*/_jsxDEV(animated.div, {\n        ref: cropscrollRef,\n        style: animation,\n        children: /*#__PURE__*/_jsxDEV(DialogContent, {\n          ref: cropTOPLEVELScrollRef,\n          className: matchMobile || matchTablet ? darkmodeReducer ? \" dontallowhighlighting modal-containerDarkmob\" : \" dontallowhighlighting  modal-containerLightmob \" : darkmodeReducer ? \" dontallowhighlighting modal-containerDark  postscroll-dark \" : \" dontallowhighlighting  modal-containerLight  postscroll-light \",\n          style: {\n            padding: \"0px\",\n            height: \"100vh\",\n            overflow: \"hidden\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            style: {\n              padding: \"0px\",\n              bottom: typex === \"Profile\" ? \"13.6vh\" : WideImageCheck ? \"33vh\" : \"43vh\",\n              margin: \"auto\",\n              width: `100%`,\n              height: \"0px\",\n              position: \"absolute\",\n              display: \"flex\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              alignContent: \"center\",\n              zIndex: 5,\n              alignSelf: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 4,\n              style: {\n                padding: \"0px\",\n                height: \"0px\",\n                margin: \"auto\",\n                display: \"grid\",\n                alignItems: \"center\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 936,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              style: {\n                padding: \"0px\",\n                height: \"0px\",\n                margin: \"auto\",\n                display: \"grid\",\n                alignItems: \"center\"\n              },\n              children: optionscropshow ? /*#__PURE__*/_jsxDEV(CheckIcon, {\n                onClick: done,\n                className: darkmodeReducer ? \"make-small-icons-clickable-lightCrop turdark dontallowhighlighting zuperkingIcon \" : \"make-small-icons-clickable-darkCrop  turdark dontallowhighlighting zuperkingIcon  \",\n                style: {\n                  margin: \"auto\",\n                  fontSize: matchTabletMobile ? \"4.8vh\" : \"2.9vw\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 960,\n                columnNumber: 21\n              }, this) : null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 948,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 4,\n              style: {\n                padding: \"0px\",\n                height: \"0px\",\n                margin: \"auto\",\n                display: \"grid\",\n                alignItems: \"center\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 976,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 914,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            style: {\n              width: \"100%\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n              ref: cropCanvasRefx,\n              style: {\n                padding: \"0px\",\n                margin: \"auto\",\n                zIndex: 2\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 989,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 988,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 897,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 896,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 867,\n      columnNumber: 9\n    }, this) : null, /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      style: {\n        height: \"100%\",\n        position: \"fixed\",\n        top: \"-800vh\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        style: {\n          padding: \"0px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          ref: getpreviewFixedWidthRef,\n          xs: 5,\n          style: {\n            padding: \"0px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1015,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          ref: getFixedCropWidthRef,\n          xs: 4,\n          style: {\n            padding: \"0px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1024,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          ref: getCropHeightRef,\n          xs: 12,\n          style: {\n            height: \"92%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1033,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          ref: getCropWidthMobileRef,\n          xs: 12,\n          style: {\n            padding: \"0px\",\n            width: \"100%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1040,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          ref: getCropWidthMobileReflong,\n          xs: 12,\n          style: {\n            padding: \"0px\",\n            width: \"150%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1047,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          ref: getCropWidthMobileRefHD,\n          style: {\n            padding: \"0px\",\n            width: \"150%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1054,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          ref: getCropHeightRefsingle,\n          xs: 12,\n          style: {\n            height: \"100%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1060,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1008,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1004,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(UploadProfilePicx, \"dprppNOYCzxlf9qwELJyOOtsz/4=\", false, function () {\n  return [useDispatch, usePalette, useSpring, useSelector, useSelector];\n});\n\n_c = UploadProfilePicx;\nexport const UploadProfilePic = /*#__PURE__*/React.memo(UploadProfilePicx);\n_c2 = UploadProfilePic;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UploadProfilePicx\");\n$RefreshReg$(_c2, \"UploadProfilePic\");","map":{"version":3,"sources":["C:/Users/oghen/OneDrive/Documents/ClikBate/super/src/upload/UploadProfilePic.tsx"],"names":["React","useRef","useEffect","useCallback","useState","useLayoutEffect","Grid","DialogContent","matchTablet","matchMobile","useSpring","animated","useSelector","useDispatch","Axios","CheckIcon","UserInfoUpdatePROFILE","UserInfoUpdateBILLBOARD","usePalette","UpdateColorAction","UploadProfilePicx","showModalUploadProfile","cropimageProfile","profileimageSource","typex","uploadClose","billdefaultbill","cropCanvasRefx","dispatch","CropImageHolder","setCropImageHolder","hdcanvasvalue","getpreviewFixedWidthRef","getCropHeightRef","getCropWidthMobileRef","getCropWidthMobileReflong","getCropWidthMobileRefHD","getCropHeightRefsingle","getFixedCropWidthRef","myCropWidth","setmyCropWidth","myCropHeight","setmyCropHeight","matchTabletMobile","setmatchTabletMobile","getpreviewFixedWidth","setgetpreviewFixedWidth","screenH","setscreenH","data","loading","error","waitONLOAD","setwaitONLOAD","getCropHeightRealImageRatio","setgetCropHeightRealImageRatio","getCropWidthMobile","setgetCropWidthMobile","getCropWidthMobileHD","setgetCropWidthMobileHD","widelongboxmobileimage","setwidelongboxmobileimage","widelongboxmobileimagex","setwidelongboxmobileimagex","OriginalImageWidth","setOriginalImageWidth","OriginalImageHeight","setOriginalImageHeight","cropwidth","setcropwidth","cropheight","setcropheight","WideImageCheck","setWideImageCheck","SourceWidthForCropX","setSourceWidthForCropX","SourceWidthForCropY","setSourceWidthForCropY","BoxCropActivated","setBoxCropActivated","zoom","setzoom","crop","setcrop","x","y","optionscropshow","setoptionscropshow","superLoadFadex","setsuperLoadFadex","s3finaldata","sets3finaldata","s3finaldatax","quality","setquality","callQuality","animation","config","duration","opacity","transform","padding","darkmode","state","GlobalReducer","darkmodeReducer","REACT_APP_SUPERSTARZ_URL","process","env","cropscrollRef","cropTOPLEVELScrollRef","current","clientWidth","clientHeight","length","draw","ctx","dimensions","type","axis","allowZoomedAxis","allowZoomedaxis","aa","drawImage","Newcropimage","Image","src","onload","data1","data2","RatioNewcropimageNaturalHeight","naturalHeight","NewcropimageWidth","naturalWidth","RatioNewcropimageNaturalWidth","NewcropimageHeight","RatioNewcropimageNaturalWidthxx","NewcropimageHeightxx","id","username","billboard1","billboardstate","UserdataReducer","idReducer","usernameReducer","billboard1Reducer","billboardstateReducer","blobToBase64","blob","Promise","resolve","_","reader","FileReader","onloadend","result","readAsDataURL","postbillboardData","hdBlob","thumbBlob","hdBase64","gg","GetSecureURL","billboard","color","post","then","response","url","PutImageInS3WithURL","urlHD","catch","alert","ur","urlx","a","b","allow","put","console","log","status","imagelink","split","billtype","bi","zzaatak","imagedata","imagedataThumb","UpdateBillboardDatabaseStatus200","datak","darkVibrant","color2","UpdateProfileDatabaseStatus200","imagelinkx","urlThumb","values","message","billboard2","colorboy","color1","colortype","image","postProfiledata","drawcropper","upl","getContext","nn","RatiofromOriginalandfixedHeight","NewBoxRatioWidth_WIDEIMAGE","bb","RatiofromOriginalandfixedHeightx","NewBoxRatioWidth_LONGIMAGE","ratioh","ratiow","width","height","centerpreview","xtraZoom","centerCropCanvas","newcropCSSWidth","RatiofromOriginalandfixedWidth","newcropCSSHeight","xx","NewBoxRatioWidth_LONGIMAGEx","xxx","RatiofromOriginalandfixedWidthx","NewBoxRatioWidth_WIDEIMAGEx","xx2","RatiofromOriginalandfixedHeightx2","NewBoxRatioWidth_LONGIMAGEx2","xxx2","RatiofromOriginalandfixedWidthx2","NewBoxRatioWidth_WIDEIMAGEx2","requestAnimationFrame","toDataURL","datathumb","res","fetch","datax","resdatathumb","datathumbx","base64String","done","position","zIndex","cursor","overflow","backgroundColor","top","bottom","margin","display","justifyContent","alignItems","alignContent","alignSelf","fontSize","UploadProfilePic","memo"],"mappings":"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","sourcesContent":["import React, {\r\n  useRef,\r\n  useEffect,\r\n  useCallback,\r\n  useState,\r\n  useLayoutEffect,\r\n} from \"react\";\r\nimport ControlPointDuplicateIcon from \"@mui/icons-material/ControlPointDuplicate\";\r\nimport { Grid, Switch, DialogContent } from \"@material-ui/core\";\r\nimport { matchPc, matchTablet, matchMobile } from \"../DetectDevice\";\r\nimport { useSpring, animated } from \"react-spring\";\r\nimport { OptionsSlider } from \"../profile/OptionsSlider\";\r\nimport { RootStateOrAny, useSelector, useDispatch } from \"react-redux\";\r\nimport Masonry from \"@mui/lab/Masonry\";\r\nimport Axios from \"axios\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport date from \"date-and-time\";\r\nimport { UserInfoUpdatePROFILE } from \"../log/actions/UserdataAction\";\r\nimport { UserInfoUpdateBILLBOARD } from \"../log/actions/UserdataAction\";\r\nimport { usePalette } from \"react-palette\";\r\nimport { UpdateColorAction } from \"../GlobalActions\";\r\n\r\nfunction UploadProfilePicx({\r\n  showModalUploadProfile,\r\n  cropimageProfile,\r\n  profileimageSource,\r\n  typex,\r\n  uploadClose,\r\n  billdefaultbill,\r\n}: any): JSX.Element {\r\n  const cropCanvasRefx: any = useRef(null);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const [CropImageHolder, setCropImageHolder] = useState<any>(null);\r\n\r\n  const hdcanvasvalue = 1;\r\n\r\n  const getpreviewFixedWidthRef = useRef<HTMLDivElement>(null);\r\n\r\n  const getCropHeightRef: any = useRef<HTMLDivElement>(null);\r\n\r\n  const getCropWidthMobileRef: any = useRef<HTMLDivElement>(null);\r\n\r\n  const getCropWidthMobileReflong: any = useRef<HTMLDivElement>(null);\r\n\r\n  const getCropWidthMobileRefHD: any = useRef<HTMLDivElement>(null);\r\n\r\n  const getCropHeightRefsingle: any = useRef<HTMLDivElement>(null);\r\n\r\n  const getFixedCropWidthRef: any = useRef<HTMLDivElement>(null);\r\n\r\n  const [myCropWidth, setmyCropWidth] = useState(0);\r\n\r\n  const [myCropHeight, setmyCropHeight] = useState(0);\r\n\r\n  const [matchTabletMobile, setmatchTabletMobile] = useState<boolean>(false);\r\n\r\n  const [getpreviewFixedWidth, setgetpreviewFixedWidth] = useState(0);\r\n\r\n  const [screenH, setscreenH] = useState(0);\r\n\r\n  const { data, loading, error } = usePalette(cropimageProfile);\r\n\r\n  const [waitONLOAD, setwaitONLOAD] = useState<boolean>(true);\r\n\r\n  const [getCropHeightRealImageRatio, setgetCropHeightRealImageRatio] =\r\n    useState(0);\r\n\r\n  const [getCropWidthMobile, setgetCropWidthMobile] = useState(0);\r\n\r\n  const [getCropWidthMobileHD, setgetCropWidthMobileHD] = useState(0);\r\n\r\n  const [widelongboxmobileimage, setwidelongboxmobileimage] =\r\n    useState<boolean>(false);\r\n\r\n  const [widelongboxmobileimagex, setwidelongboxmobileimagex] =\r\n    useState<boolean>(false);\r\n\r\n  const [OriginalImageWidth, setOriginalImageWidth] = useState<number>(0);\r\n  const [OriginalImageHeight, setOriginalImageHeight] = useState<number>(0);\r\n\r\n  const [cropwidth, setcropwidth] = useState(0);\r\n\r\n  const [cropheight, setcropheight] = useState(0);\r\n\r\n  const [WideImageCheck, setWideImageCheck] = useState<boolean>(false);\r\n\r\n  const [SourceWidthForCropX, setSourceWidthForCropX] = useState(0);\r\n\r\n  const [SourceWidthForCropY, setSourceWidthForCropY] = useState(0);\r\n\r\n  const [BoxCropActivated, setBoxCropActivated] = useState<boolean>(true);\r\n\r\n  const [zoom, setzoom] = useState<any>(1);\r\n\r\n  const [crop, setcrop] = useState<any>({ x: 0, y: 0 });\r\n\r\n  const [optionscropshow, setoptionscropshow] = useState<boolean>(true);\r\n\r\n  const [superLoadFadex, setsuperLoadFadex] = useState<boolean>(false);\r\n\r\n  const [s3finaldata, sets3finaldata] = useState<any>([0, 0]);\r\n\r\n  var s3finaldatax = [...s3finaldata];\r\n\r\n  const [quality, setquality] = useState(1);\r\n\r\n  const callQuality = () => {\r\n    if (typex === \"Profile\") {\r\n      setquality(1.1);\r\n    } else {\r\n      setquality(1.5);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    callQuality();\r\n  }, [typex]);\r\n\r\n  //\r\n  //\r\n  //\r\n  //USE SLIDE DOWN ANIMATION FROM REACT SPRING\r\n  const animation = useSpring({\r\n    config: {\r\n      duration: 600,\r\n    },\r\n    opacity: showModalUploadProfile ? 1 : 0,\r\n    transform: showModalUploadProfile ? `translateY(0%)` : `translateY(-100%)`,\r\n    padding: \"0px\",\r\n  });\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// GET DARKMODE FROM REDUX STORE\r\n  interface RootStateGlobalReducer {\r\n    GlobalReducer: {\r\n      darkmode: boolean;\r\n    };\r\n  }\r\n  const { darkmode } = useSelector((state: RootStateGlobalReducer) => ({\r\n    ...state.GlobalReducer,\r\n  }));\r\n\r\n  const darkmodeReducer = darkmode;\r\n\r\n  const { REACT_APP_SUPERSTARZ_URL } = process.env;\r\n  const cropscrollRef = useRef<any>(null);\r\n  const cropTOPLEVELScrollRef: any = useRef(null);\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  ///GET DIMENSIONS AND  SCREEN HEIGHT\r\n  useLayoutEffect(() => {\r\n    if (matchTablet || matchMobile) {\r\n      setmatchTabletMobile(true);\r\n    }\r\n    if (\r\n      getpreviewFixedWidthRef.current &&\r\n      getpreviewFixedWidthRef.current.clientWidth\r\n    ) {\r\n      setgetpreviewFixedWidth(getpreviewFixedWidthRef.current.clientWidth);\r\n    }\r\n\r\n    if (\r\n      getCropHeightRefsingle.current &&\r\n      getCropHeightRefsingle.current.clientHeight\r\n    ) {\r\n      setscreenH(getCropHeightRefsingle.current.clientHeight);\r\n    }\r\n\r\n    if (profileimageSource.length === 1) {\r\n      setwaitONLOAD(false);\r\n      if (\r\n        (getCropHeightRefsingle.current &&\r\n          getCropHeightRefsingle.current.clientHeight) ||\r\n        getCropHeightRef.current\r\n      ) {\r\n        if (matchTabletMobile) {\r\n          setmyCropHeight(\r\n            getCropWidthMobileRef.current.clientWidth * hdcanvasvalue\r\n          );\r\n          setmyCropWidth(\r\n            getCropWidthMobileRef.current.clientWidth * hdcanvasvalue\r\n          );\r\n        } else {\r\n          if (typex === \"Profile\") {\r\n            setmyCropWidth(\r\n              getCropHeightRefsingle.current.clientHeight * hdcanvasvalue\r\n            );\r\n\r\n            setmyCropHeight(\r\n              getCropHeightRefsingle.current.clientHeight * hdcanvasvalue\r\n            );\r\n          } else {\r\n            if (WideImageCheck) {\r\n              setmyCropWidth(\r\n                getCropHeightRefsingle.current.clientHeight * hdcanvasvalue +\r\n                getCropHeightRefsingle.current.clientHeight * 0\r\n              );\r\n\r\n              setmyCropHeight(\r\n                getCropHeightRefsingle.current.clientHeight * hdcanvasvalue -\r\n                getCropHeightRefsingle.current.clientHeight * 0.22\r\n              );\r\n            } else {\r\n              setmyCropWidth(\r\n                getCropHeightRefsingle.current.clientHeight * hdcanvasvalue +\r\n                getCropHeightRefsingle.current.clientHeight * 0.2\r\n              );\r\n\r\n              setmyCropHeight(\r\n                getCropHeightRefsingle.current.clientHeight * hdcanvasvalue -\r\n                getCropHeightRefsingle.current.clientHeight * 0.32\r\n              );\r\n            }\r\n          }\r\n        }\r\n\r\n        setgetCropHeightRealImageRatio(\r\n          getCropHeightRefsingle.current.clientHeight * hdcanvasvalue\r\n        );\r\n      }\r\n    } else {\r\n      if (getCropHeightRef.current && getCropHeightRef.current.clientHeight) {\r\n        if (matchTabletMobile) {\r\n          setmyCropHeight(\r\n            getCropWidthMobileRef.current.clientWidth * hdcanvasvalue\r\n          );\r\n          setmyCropWidth(\r\n            getCropWidthMobileRef.current.clientWidth * hdcanvasvalue\r\n          );\r\n        } else {\r\n          setmyCropHeight(\r\n            getCropHeightRef.current.clientHeight * hdcanvasvalue\r\n          );\r\n          setmyCropWidth(getCropHeightRef.current.clientHeight * hdcanvasvalue);\r\n        }\r\n\r\n        setgetCropHeightRealImageRatio(getCropHeightRef.current.clientHeight);\r\n      }\r\n    }\r\n\r\n    if (\r\n      getCropWidthMobileRef.current &&\r\n      getCropWidthMobileRef.current.clientWidth\r\n    ) {\r\n      setgetCropWidthMobile(getCropWidthMobileRef.current.clientWidth);\r\n    }\r\n\r\n    if (\r\n      getCropWidthMobileRefHD.current &&\r\n      getCropWidthMobileRefHD.current.clientWidth\r\n    ) {\r\n      setgetCropWidthMobileHD(getCropWidthMobileRefHD.current.clientWidth);\r\n    }\r\n  }, [profileimageSource, typex, WideImageCheck]);\r\n\r\n  const draw = useCallback(\r\n    (\r\n      ctx: any,\r\n      dimensions: any,\r\n      type: number,\r\n      axis: number,\r\n      allowZoomedAxis: number\r\n    ) => {\r\n      var allowZoomedaxis, aa;\r\n\r\n      if (typex === \"Profile\") {\r\n        aa = -(dimensions * zoom) / 4;\r\n      } else {\r\n        aa = axis;\r\n      }\r\n\r\n      if (zoom === 1) {\r\n        allowZoomedaxis = 0;\r\n      } else {\r\n        allowZoomedaxis = allowZoomedAxis;\r\n      }\r\n      if (type === 1) {\r\n        ctx.drawImage(\r\n          CropImageHolder,\r\n          aa,\r\n          allowZoomedaxis,\r\n          dimensions * zoom,\r\n          myCropHeight * quality * zoom\r\n        );\r\n      } else if (type === 2) {\r\n        ctx.drawImage(\r\n          CropImageHolder,\r\n          allowZoomedaxis,\r\n          axis,\r\n          myCropWidth * quality * zoom,\r\n          dimensions * zoom\r\n        );\r\n      } else {\r\n        ctx.drawImage(\r\n          CropImageHolder,\r\n          0,\r\n          0,\r\n          OriginalImageWidth,\r\n          OriginalImageHeight\r\n        );\r\n      }\r\n    },\r\n    [\r\n      OriginalImageWidth,\r\n      OriginalImageHeight,\r\n      CropImageHolder,\r\n      myCropHeight,\r\n      myCropWidth,\r\n      zoom,\r\n      typex,\r\n    ]\r\n  );\r\n\r\n  useLayoutEffect(() => {\r\n    const Newcropimage: any = new Image();\r\n\r\n    Newcropimage.src = cropimageProfile;\r\n    Newcropimage.onload = function () {\r\n      if (CropImageHolder === Newcropimage) {\r\n      } else {\r\n        setCropImageHolder(Newcropimage);\r\n      }\r\n\r\n      var data1: number = 0;\r\n      var data2: number = 0;\r\n\r\n      var RatioNewcropimageNaturalHeight =\r\n        Newcropimage.naturalHeight / myCropHeight;\r\n      var NewcropimageWidth =\r\n        Newcropimage.naturalWidth / RatioNewcropimageNaturalHeight;\r\n\r\n      var RatioNewcropimageNaturalWidth =\r\n        Newcropimage.naturalWidth / getCropWidthMobileHD;\r\n      var NewcropimageHeight =\r\n        Newcropimage.naturalHeight / RatioNewcropimageNaturalWidth;\r\n\r\n      var RatioNewcropimageNaturalWidthxx =\r\n        Newcropimage.naturalWidth / getCropWidthMobile;\r\n      var NewcropimageHeightxx =\r\n        Newcropimage.naturalHeight / RatioNewcropimageNaturalWidthxx;\r\n\r\n      ////// CANVAS  CROPPER DIMENSIONS  PC MOBILE(canvaswidth)\r\n\r\n      if (matchTabletMobile && NewcropimageHeightxx < screenH) {\r\n        setwidelongboxmobileimage(true);\r\n        setwidelongboxmobileimagex(true);\r\n\r\n        if (OriginalImageHeight === NewcropimageHeight) {\r\n        } else {\r\n          setOriginalImageHeight(NewcropimageHeight);\r\n          data2 = NewcropimageHeight;\r\n        }\r\n        //\r\n        if (OriginalImageWidth === getCropWidthMobileHD) {\r\n        } else {\r\n          setOriginalImageWidth(getCropWidthMobileHD);\r\n          data1 = getCropWidthMobileHD;\r\n        }\r\n      } else {\r\n        setwidelongboxmobileimage(false);\r\n        setwidelongboxmobileimagex(false);\r\n        if (OriginalImageWidth === NewcropimageWidth) {\r\n        } else {\r\n          setOriginalImageWidth(NewcropimageWidth);\r\n          data1 = NewcropimageWidth;\r\n        }\r\n        ///\r\n        if (OriginalImageHeight === myCropHeight) {\r\n        } else {\r\n          setOriginalImageHeight(myCropHeight);\r\n          data2 = myCropHeight;\r\n        }\r\n      }\r\n      ////// CANVAS  CROPPER DIMENSIONS  PC MOBILE(canvaswidth)\r\n\r\n      if (Newcropimage.naturalWidth > Newcropimage.naturalHeight) {\r\n        setWideImageCheck(true);\r\n      } else {\r\n        setWideImageCheck(false);\r\n      }\r\n\r\n      if (cropwidth === data1) {\r\n      } else {\r\n        setcropwidth(data1);\r\n      }\r\n\r\n      if (cropheight === data2) {\r\n      } else {\r\n        setcropheight(data2);\r\n      }\r\n    };\r\n  }, [cropimageProfile, showModalUploadProfile]);\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// INTERFACE/TYPES FOR SCREENHEIGHT AND DARKMODE\r\n  interface RootUserdataReducer {\r\n    UserdataReducer: {\r\n      id: number;\r\n      username: string;\r\n      billboard1: string;\r\n      billboardstate: number;\r\n    };\r\n  }\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// GET SCREENHEIGHT FROM REDUX STORE\r\n  const { id, username, billboard1, billboardstate } = useSelector(\r\n    (state: RootUserdataReducer) => ({\r\n      ...state.UserdataReducer,\r\n    })\r\n  );\r\n\r\n  const idReducer = id;\r\n  const usernameReducer = username;\r\n  const billboard1Reducer = billboard1;\r\n  const billboardstateReducer = billboardstate;\r\n\r\n  function blobToBase64(blob: any) {\r\n    return new Promise((resolve, _) => {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => resolve(reader.result);\r\n      reader.readAsDataURL(blob);\r\n    });\r\n  }\r\n\r\n  const postbillboardData = useCallback(\r\n    (hdBlob: any, thumbBlob: any, hdBase64: any) => {\r\n      var gg = \"\";\r\n      GetSecureURL(hdBlob, thumbBlob, hdBase64, true, gg);\r\n    },\r\n    [idReducer, blobToBase64]\r\n  );\r\n\r\n  const GetSecureURL = (\r\n    hdBlob: any,\r\n    thumbBlob: any,\r\n    hdBase64: any,\r\n    billboard: boolean,\r\n    color: any\r\n  ) => {\r\n    Axios.post(`${REACT_APP_SUPERSTARZ_URL}/get_signed_url_4upload`)\r\n      .then((response) => {\r\n        setsuperLoadFadex(false);\r\n        var url = response.data.url;\r\n        setsuperLoadFadex(true);\r\n        PutImageInS3WithURL(\r\n          thumbBlob,\r\n          url,\r\n          url.urlHD,\r\n          hdBlob,\r\n          hdBase64,\r\n          false,\r\n          billboard,\r\n          color\r\n        );\r\n      })\r\n      .catch(function (error) {\r\n        setsuperLoadFadex(false);\r\n        alert(\"caption erroerrr\");\r\n      });\r\n  };\r\n\r\n  const PutImageInS3WithURL = useCallback(\r\n    (\r\n      thumbBlob: any,\r\n      ur: any,\r\n      urlx: any,\r\n      a: any,\r\n      b: any,\r\n      allow: boolean,\r\n      billboard: boolean,\r\n      color: any\r\n    ) => {\r\n      Axios.put(urlx, a)\r\n        .then((response) => {\r\n          setsuperLoadFadex(false);\r\n          console.log(response);\r\n          if (response.status === 200) {\r\n            setsuperLoadFadex(true);\r\n            if (allow) {\r\n              let imagelink = urlx.split(\"?\")[0];\r\n\r\n              var billtype = 1;\r\n              if (billboard1Reducer !== billdefaultbill) {\r\n                billtype = 2;\r\n              }\r\n\r\n              var bi = 0;\r\n\r\n              if (billboardstateReducer === 0) {\r\n\r\n                bi = 1;\r\n              } else {\r\n\r\n                bi = 0;\r\n              }\r\n\r\n              if (billboard) {\r\n                var zzaatak = {\r\n                  imagedata: s3finaldatax[0],\r\n                  imagedataThumb: imagelink,\r\n                  id: idReducer,\r\n                  type: bi,\r\n                };\r\n\r\n                UpdateBillboardDatabaseStatus200(zzaatak, b);\r\n              } else {\r\n                var datak = {\r\n                  imagedata: s3finaldatax[0],\r\n                  imagedataThumb: imagelink,\r\n                  id: idReducer,\r\n                  color: color.darkVibrant,\r\n                  color2: color.darkVibrant,\r\n                };\r\n\r\n                UpdateProfileDatabaseStatus200(datak, b, color);\r\n              }\r\n            } else {\r\n              let imagelinkx = urlx.split(\"?\")[0];\r\n              s3finaldatax[0] = imagelinkx;\r\n\r\n              PutImageInS3WithURL(\r\n                thumbBlob,\r\n                ur,\r\n                ur.urlThumb,\r\n                thumbBlob,\r\n                b,\r\n                true,\r\n                billboard,\r\n                color\r\n              );\r\n            }\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          setsuperLoadFadex(false);\r\n          alert(\"caption erroerrr\");\r\n        });\r\n    },\r\n    [idReducer, s3finaldatax, billboard1Reducer, billboardstateReducer]\r\n  );\r\n\r\n  const UpdateBillboardDatabaseStatus200 = (datak: any, b: any) => {\r\n    Axios.put(`${REACT_APP_SUPERSTARZ_URL}/billboard_upload_data`, {\r\n      values: datak,\r\n    })\r\n      .then((response) => {\r\n        setsuperLoadFadex(false);\r\n        if (response.data.message === \"billboard image uploaded\") {\r\n          setsuperLoadFadex(false);\r\n\r\n          if (datak.type === 0) {\r\n\r\n            const data = {\r\n              billboard2: b,\r\n            };\r\n          } else {\r\n\r\n            const data = {\r\n              billboard1: b,\r\n            };\r\n          }\r\n\r\n          dispatch(UserInfoUpdateBILLBOARD(data, datak.type));\r\n          uploadClose(3);\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        setsuperLoadFadex(false);\r\n        alert(\" error\");\r\n      });\r\n  };\r\n\r\n  const UpdateProfileDatabaseStatus200 = (datak: any, b: any, color: any) => {\r\n    Axios.put(`${REACT_APP_SUPERSTARZ_URL}/profile_upload_data`, {\r\n      values: datak,\r\n    })\r\n      .then((response) => {\r\n        setsuperLoadFadex(false);\r\n        if (response.data.message === \"profile image data updated\") {\r\n          var colorboy = {\r\n            color1: color.darkVibrant,\r\n            color2: color.darkVibrant,\r\n            colortype: 0,\r\n          };\r\n          dispatch(UpdateColorAction(colorboy, 1));\r\n          const data = {\r\n            image: b,\r\n          };\r\n          dispatch(UserInfoUpdatePROFILE(data));\r\n          uploadClose(4);\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        setsuperLoadFadex(false);\r\n        alert(\" error\");\r\n      });\r\n  };\r\n\r\n  const postProfiledata = useCallback(\r\n    (hdBlob: any, thumbBlob: any, hdBase64: any, gg: any) => {\r\n      setsuperLoadFadex(true);\r\n      GetSecureURL(hdBlob, thumbBlob, hdBase64, false, gg);\r\n    },\r\n    [idReducer, s3finaldata]\r\n  );\r\n\r\n  const drawcropper = (upl: number, gg: any) => {\r\n    if (CropImageHolder && cropCanvasRefx.current) {\r\n      const ctx = cropCanvasRefx.current.getContext(\"2d\");\r\n      var nn = myCropHeight * quality;\r\n      var RatiofromOriginalandfixedHeight = OriginalImageHeight / nn;\r\n      var NewBoxRatioWidth_WIDEIMAGE =\r\n        OriginalImageWidth / RatiofromOriginalandfixedHeight;\r\n\r\n      if (SourceWidthForCropX === NewBoxRatioWidth_WIDEIMAGE) {\r\n      } else {\r\n        setSourceWidthForCropX(NewBoxRatioWidth_WIDEIMAGE);\r\n      }\r\n      var bb = myCropWidth * quality;\r\n      var RatiofromOriginalandfixedHeightx = OriginalImageWidth / bb;\r\n      var NewBoxRatioWidth_LONGIMAGE =\r\n        OriginalImageHeight / RatiofromOriginalandfixedHeightx;\r\n\r\n      if (SourceWidthForCropY === NewBoxRatioWidth_LONGIMAGE) {\r\n      } else {\r\n        setSourceWidthForCropY(NewBoxRatioWidth_LONGIMAGE);\r\n      }\r\n\r\n      var ratioh = (OriginalImageWidth * 3) / OriginalImageWidth;\r\n      var ratiow = (OriginalImageHeight * 3) / OriginalImageHeight;\r\n\r\n      if (BoxCropActivated) {\r\n        cropCanvasRefx.current.width = myCropWidth * quality;\r\n        cropCanvasRefx.current.height = myCropHeight * quality;\r\n      } else {\r\n        cropCanvasRefx.current.width = OriginalImageWidth;\r\n        cropCanvasRefx.current.height = OriginalImageHeight;\r\n      }\r\n\r\n      var centerpreview =\r\n        cropCanvasRefx.current.width / 1.5 - NewBoxRatioWidth_LONGIMAGE / 1.5;\r\n\r\n      var xtraZoom = myCropHeight / NewBoxRatioWidth_WIDEIMAGE;\r\n\r\n      var centerCropCanvas =\r\n        cropCanvasRefx.current.width / 2 - NewBoxRatioWidth_WIDEIMAGE / 2;\r\n\r\n      //////////////////////////CSS CALCULATION MOBILE PC\r\n      var RatiofromOriginalandfixedHeight =\r\n        OriginalImageHeight / getCropHeightRealImageRatio;\r\n      var newcropCSSWidth =\r\n        OriginalImageWidth / RatiofromOriginalandfixedHeight;\r\n      ///\r\n      var RatiofromOriginalandfixedWidth =\r\n        OriginalImageWidth / getCropWidthMobile;\r\n      var newcropCSSHeight =\r\n        OriginalImageHeight / RatiofromOriginalandfixedWidth;\r\n      //////////////////////////CSS CALCULATION MOBILE PC\r\n\r\n      if (BoxCropActivated) {\r\n        var xx = myCropWidth * zoom;\r\n        var RatiofromOriginalandfixedHeightx = OriginalImageWidth / xx;\r\n        var NewBoxRatioWidth_LONGIMAGEx =\r\n          OriginalImageHeight / RatiofromOriginalandfixedHeightx;\r\n\r\n        var xxx = NewBoxRatioWidth_LONGIMAGE * zoom;\r\n        var RatiofromOriginalandfixedWidthx = OriginalImageHeight / xxx;\r\n        var NewBoxRatioWidth_WIDEIMAGEx =\r\n          OriginalImageWidth / RatiofromOriginalandfixedWidthx;\r\n\r\n        var xx2 = NewBoxRatioWidth_WIDEIMAGE * zoom;\r\n        var RatiofromOriginalandfixedHeightx2 = OriginalImageWidth / xx2;\r\n        var NewBoxRatioWidth_LONGIMAGEx2 =\r\n          OriginalImageHeight / RatiofromOriginalandfixedHeightx2;\r\n\r\n        var xxx2 = myCropHeight * zoom;\r\n        var RatiofromOriginalandfixedWidthx2 = OriginalImageHeight / xxx2;\r\n        var NewBoxRatioWidth_WIDEIMAGEx2 =\r\n          OriginalImageWidth / RatiofromOriginalandfixedWidthx2;\r\n\r\n        if (OriginalImageWidth > OriginalImageHeight) {\r\n          if (OriginalImageHeight === OriginalImageWidth) {\r\n            requestAnimationFrame(async () => {\r\n              draw(ctx, NewBoxRatioWidth_WIDEIMAGE, 1, 0, crop.x);\r\n              try {\r\n                if (upl === 1) {\r\n                  var data = cropCanvasRefx.current.toDataURL(\r\n                    \"image/jpeg\",\r\n                    1.0\r\n                  );\r\n                  var datathumb = cropCanvasRefx.current.toDataURL(\r\n                    \"image/jpeg\",\r\n                    0.05\r\n                  );\r\n                  const res = await fetch(data);\r\n                  const datax = await res.blob();\r\n                  const resdatathumb = await fetch(datathumb);\r\n                  const datathumbx = await resdatathumb.blob();\r\n                  if (typex === \"Profile\") {\r\n                    var base64String = await blobToBase64(datax);\r\n                    postProfiledata(datax, datathumbx, base64String, gg);\r\n                  } else {\r\n                    var base64String = await blobToBase64(datax);\r\n                    postbillboardData(datax, datathumbx, base64String);\r\n                  }\r\n                }\r\n              } catch {\r\n                console.log(\"upload profile pic\");\r\n              }\r\n            });\r\n          } else {\r\n            requestAnimationFrame(async () => {\r\n              draw(ctx, NewBoxRatioWidth_WIDEIMAGE, 1, crop.x, crop.y);\r\n              try {\r\n                if (upl === 1) {\r\n                  var data = cropCanvasRefx.current.toDataURL(\r\n                    \"image/jpeg\",\r\n                    1.0\r\n                  );\r\n                  var datathumb = cropCanvasRefx.current.toDataURL(\r\n                    \"image/jpeg\",\r\n                    0.05\r\n                  );\r\n                  const res = await fetch(data);\r\n                  const datax = await res.blob();\r\n                  const resdatathumb = await fetch(datathumb);\r\n                  const datathumbx = await resdatathumb.blob();\r\n                  if (typex === \"Profile\") {\r\n                    var base64String = await blobToBase64(datax);\r\n                    postProfiledata(datax, datathumbx, base64String, gg);\r\n                  } else {\r\n                    var base64String = await blobToBase64(datax);\r\n                    postbillboardData(datax, datathumbx, base64String);\r\n                  }\r\n                }\r\n              } catch {\r\n                console.log(\"upload profile pic\");\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n          if (OriginalImageHeight === OriginalImageWidth) {\r\n            requestAnimationFrame(async () => {\r\n              draw(ctx, NewBoxRatioWidth_LONGIMAGE, 2, 0, crop.x);\r\n\r\n              try {\r\n                if (upl === 1) {\r\n                  var data = cropCanvasRefx.current.toDataURL(\r\n                    \"image/jpeg\",\r\n                    1.0\r\n                  );\r\n                  var datathumb = cropCanvasRefx.current.toDataURL(\r\n                    \"image/jpeg\",\r\n                    0.05\r\n                  );\r\n                  const res = await fetch(data);\r\n                  const datax = await res.blob();\r\n                  const resdatathumb = await fetch(datathumb);\r\n                  const datathumbx = await resdatathumb.blob();\r\n                  if (typex === \"Profile\") {\r\n                    var base64String = await blobToBase64(datax);\r\n                    postProfiledata(datax, datathumbx, base64String, gg);\r\n                  } else {\r\n                    var base64String = await blobToBase64(datax);\r\n                    postbillboardData(datax, datathumbx, base64String);\r\n                  }\r\n                }\r\n              } catch {\r\n                console.log(\"upload profile pic\");\r\n              }\r\n            });\r\n          } else {\r\n            requestAnimationFrame(async () => {\r\n              draw(ctx, NewBoxRatioWidth_LONGIMAGE, 2, crop.y, crop.x);\r\n\r\n              try {\r\n                if (upl === 1) {\r\n                  var data = cropCanvasRefx.current.toDataURL(\r\n                    \"image/jpeg\",\r\n                    1.0\r\n                  );\r\n                  var datathumb = cropCanvasRefx.current.toDataURL(\r\n                    \"image/jpeg\",\r\n                    0.05\r\n                  );\r\n                  const res = await fetch(data);\r\n                  const datax = await res.blob();\r\n                  const resdatathumb = await fetch(datathumb);\r\n                  const datathumbx = await resdatathumb.blob();\r\n                  if (typex === \"Profile\") {\r\n                    var base64String = await blobToBase64(datax);\r\n                    postProfiledata(datax, datathumbx, base64String, gg);\r\n                  } else {\r\n                    var base64String = await blobToBase64(datax);\r\n                    postbillboardData(datax, datathumbx, base64String);\r\n                  }\r\n                }\r\n              } catch {\r\n                console.log(\"upload profile pic\");\r\n              }\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        requestAnimationFrame(async () => {\r\n          draw(ctx, 0, 3, 0, crop.x);\r\n\r\n          try {\r\n            if (upl === 1) {\r\n              var data = cropCanvasRefx.current.toDataURL(\"image/jpeg\", 1.0);\r\n              var datathumb = cropCanvasRefx.current.toDataURL(\r\n                \"image/jpeg\",\r\n                0.05\r\n              );\r\n              const res = await fetch(data);\r\n              const datax = await res.blob();\r\n              const resdatathumb = await fetch(datathumb);\r\n              const datathumbx = await resdatathumb.blob();\r\n              if (typex === \"Profile\") {\r\n                var base64String = await blobToBase64(datax);\r\n                postProfiledata(datax, datathumbx, base64String, gg);\r\n              } else {\r\n                var base64String = await blobToBase64(datax);\r\n                postbillboardData(datax, datathumbx, base64String);\r\n              }\r\n            }\r\n          } catch {\r\n            console.log(\"upload profile pic\");\r\n          }\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  useLayoutEffect(() => {\r\n    drawcropper(0, data);\r\n  }, [\r\n    CropImageHolder,\r\n    BoxCropActivated,\r\n    OriginalImageWidth,\r\n    OriginalImageHeight,\r\n    widelongboxmobileimage,\r\n    myCropHeight,\r\n    crop,\r\n    zoom,\r\n    data,\r\n  ]);\r\n\r\n  const done = () => {\r\n    drawcropper(1, data);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {showModalUploadProfile ? (\r\n        <DialogContent\r\n          className={darkmodeReducer ? \"dialog-container\" : \"dialog-container\"}\r\n          style={{\r\n            padding: \"0px\",\r\n            height: \"100vh\",\r\n            position: \"fixed\",\r\n            zIndex: 100,\r\n            cursor: \"default\",\r\n            overflow: \"hidden\",\r\n          }}\r\n        >\r\n          {superLoadFadex ? (\r\n            <>\r\n              <Grid\r\n                container\r\n                style={{\r\n                  backgroundColor: darkmodeReducer\r\n                    ? \"rgba(50,50,50,0.65)\"\r\n                    : \"rgba(250,250,250,0.65)\",\r\n                  position: \"fixed\",\r\n                  top: \"0px\",\r\n                  width: \"100%\",\r\n                  height: \"100%\",\r\n                  zIndex: 10,\r\n                }}\r\n              ></Grid>{\" \"}\r\n            </>\r\n          ) : null}\r\n\r\n          <animated.div ref={cropscrollRef} style={animation}>\r\n            <DialogContent\r\n              ref={cropTOPLEVELScrollRef}\r\n              className={\r\n                matchMobile || matchTablet\r\n                  ? darkmodeReducer\r\n                    ? \" dontallowhighlighting modal-containerDarkmob\"\r\n                    : \" dontallowhighlighting  modal-containerLightmob \"\r\n                  : darkmodeReducer\r\n                    ? \" dontallowhighlighting modal-containerDark  postscroll-dark \"\r\n                    : \" dontallowhighlighting  modal-containerLight  postscroll-light \"\r\n              }\r\n              style={{\r\n                padding: \"0px\",\r\n                height: \"100vh\",\r\n                overflow: \"hidden\",\r\n              }}\r\n            >\r\n              <Grid\r\n                container\r\n                style={{\r\n                  padding: \"0px\",\r\n                  bottom:\r\n                    typex === \"Profile\"\r\n                      ? \"13.6vh\"\r\n                      : WideImageCheck\r\n                        ? \"33vh\"\r\n                        : \"43vh\",\r\n                  margin: \"auto\",\r\n                  width: `100%`,\r\n                  height: \"0px\",\r\n                  position: \"absolute\",\r\n                  display: \"flex\",\r\n                  justifyContent: \"center\",\r\n                  alignItems: \"center\",\r\n                  alignContent: \"center\",\r\n                  zIndex: 5,\r\n                  alignSelf: \"center\",\r\n                }}\r\n              >\r\n                <Grid\r\n                  item\r\n                  xs={4}\r\n                  style={{\r\n                    padding: \"0px\",\r\n                    height: \"0px\",\r\n                    margin: \"auto\",\r\n                    display: \"grid\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                ></Grid>\r\n\r\n                <Grid\r\n                  item\r\n                  xs={12}\r\n                  style={{\r\n                    padding: \"0px\",\r\n                    height: \"0px\",\r\n                    margin: \"auto\",\r\n                    display: \"grid\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                >\r\n                  {optionscropshow ? (\r\n                    <CheckIcon\r\n                      onClick={done}\r\n                      className={\r\n                        darkmodeReducer\r\n                          ? \"make-small-icons-clickable-lightCrop turdark dontallowhighlighting zuperkingIcon \"\r\n                          : \"make-small-icons-clickable-darkCrop  turdark dontallowhighlighting zuperkingIcon  \"\r\n                      }\r\n                      style={{\r\n                        margin: \"auto\",\r\n\r\n                        fontSize: matchTabletMobile ? \"4.8vh\" : \"2.9vw\",\r\n                      }}\r\n                    />\r\n                  ) : null}\r\n                </Grid>\r\n\r\n                <Grid\r\n                  item\r\n                  xs={4}\r\n                  style={{\r\n                    padding: \"0px\",\r\n                    height: \"0px\",\r\n                    margin: \"auto\",\r\n                    display: \"grid\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                ></Grid>\r\n              </Grid>\r\n              <Grid container style={{ width: \"100%\" }}>\r\n                <canvas\r\n                  ref={cropCanvasRefx}\r\n                  style={{\r\n                    padding: \"0px\",\r\n                    margin: \"auto\",\r\n\r\n                    zIndex: 2,\r\n                  }}\r\n                />\r\n              </Grid>\r\n            </DialogContent>\r\n          </animated.div>\r\n        </DialogContent>\r\n      ) : null}\r\n\r\n      <Grid\r\n        container\r\n        style={{ height: \"100%\", position: \"fixed\", top: \"-800vh\" }}\r\n      >\r\n        <Grid\r\n          item\r\n          xs={12}\r\n          style={{\r\n            padding: \"0px\",\r\n          }}\r\n        >\r\n          <Grid\r\n            item\r\n            ref={getpreviewFixedWidthRef}\r\n            xs={5}\r\n            style={{\r\n              padding: \"0px\",\r\n            }}\r\n          ></Grid>\r\n\r\n          <Grid\r\n            item\r\n            ref={getFixedCropWidthRef}\r\n            xs={4}\r\n            style={{\r\n              padding: \"0px\",\r\n            }}\r\n          ></Grid>\r\n\r\n          <Grid\r\n            item\r\n            ref={getCropHeightRef}\r\n            xs={12}\r\n            style={{ height: \"92%\" }}\r\n          ></Grid>\r\n\r\n          <Grid\r\n            item\r\n            ref={getCropWidthMobileRef}\r\n            xs={12}\r\n            style={{ padding: \"0px\", width: \"100%\" }}\r\n          ></Grid>\r\n\r\n          <Grid\r\n            item\r\n            ref={getCropWidthMobileReflong}\r\n            xs={12}\r\n            style={{ padding: \"0px\", width: \"150%\" }}\r\n          ></Grid>\r\n\r\n          <Grid\r\n            item\r\n            ref={getCropWidthMobileRefHD}\r\n            style={{ padding: \"0px\", width: \"150%\" }}\r\n          ></Grid>\r\n\r\n          <Grid\r\n            item\r\n            ref={getCropHeightRefsingle}\r\n            xs={12}\r\n            style={{ height: \"100%\" }}\r\n          ></Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n\r\nexport const UploadProfilePic = React.memo(UploadProfilePicx);\r\n"]},"metadata":{},"sourceType":"module"}