{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\oghen\\\\OneDrive\\\\Documents\\\\ClikBate\\\\super\\\\src\\\\profile\\\\ImageFilterinner.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { matchPc, matchTablet, matchMobile } from \"../DetectDevice\";\nimport { Grid } from \"@material-ui/core\";\nimport { useSelector } from \"react-redux\";\nimport { animated } from \"react-spring\";\nimport ChevronRightIcon from \"@mui/icons-material/ChevronRight\";\nimport CircleIcon from \"@mui/icons-material/Circle\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ImageFilterinnerx({\n  optionsShow,\n  optinstopshowingReducer,\n  typeTop,\n  selectedImage,\n  closeoptionsslide,\n  animationop,\n  optionsCollectImageRef,\n  handleTouchStartOptions,\n  handleTouchMoveOptions,\n  modalanimation,\n  nextSlidePc,\n  optionsImages,\n  ActiveSlide,\n  optionsNameData,\n  clickOptions,\n  optionsClickType,\n  getSliderWidthNew,\n  itemUploadRef,\n  imageFiltersRef,\n  getImageWidth,\n  length,\n  itemUploadRefThumb,\n  loadedimage,\n  startSuperSticker,\n  duplicateItemupload,\n  activeSticker,\n  setactiveSticker,\n  seteffectMode,\n  effectMode,\n  setcallfilter,\n  callfilter,\n  regimageholdfilter,\n  setregimageholdfilter,\n  FilterUnderStickerStopFiltering,\n  trapfilters,\n  settrapfilters,\n  sethdfilter,\n  hdfilter,\n  superstickerIndex,\n  superzeroeffect,\n  finalImageData,\n  setfinalImageData,\n  finalImageDataSD,\n  setfinalImageDataSD,\n  finalImageDataBASE64,\n  setfinalImageDataBASE64,\n  setstartTopicCap,\n  itemUploadRefSD,\n  setsupeFilterLoadFade\n}) {\n  _s();\n\n  const finalImageDataxx = [...finalImageData];\n  const finalImageDataxxSD = [...finalImageDataSD];\n  const finalImageDataxxBASE64 = [...finalImageDataBASE64];\n  const effectModexx = [...effectMode];\n  const regimageholdfilterxx = [...regimageholdfilter];\n  const trapfiltersxx = [...trapfilters];\n  const [blink, setblink] = useState(false);\n  const getFilterWidthViewable = useRef([]);\n  const getFilterWidthfull = useRef([]);\n  const Timer = useRef(null);\n  var addedwidth;\n  addedwidth = matchTablet || matchMobile ? 10.6 : 25;\n  const thumbsLength = 13; ///\n  ///\n  ///\n  ///DARKMODE FROM REDUX\n\n  const {\n    darkmode\n  } = useSelector(state => ({ ...state.GlobalReducer\n  }));\n  const darkmodeReducer = darkmode; ///\n  ///\n  ///\n  /// GET GLOBAL INNER NAVIGATION VARIABLE\n\n  const {\n    activatefilterImage\n  } = useSelector(state => ({ ...state.GlobalNavuploadReducer\n  }));\n  const activatefilterImageReducer = activatefilterImage;\n  var circleIdentify = typeTop ? 0 : 4;\n  var circleIdentify2 = typeTop ? 1 : 5; ///\n  ///\n  /// GET COLOR FROM REDUX STORE\n\n  const {\n    color,\n    colordark,\n    colortype\n  } = useSelector(state => ({ ...state.GlobalReducerColor\n  }));\n  const colorReducer = color;\n  const colorReducerdark = colordark;\n  const colortypeReducer = colortype;\n  const [showfiltersOnload, setshowfiltersOnload] = useState(false);\n  const [allow, setallow] = useState(false);\n  const [showfiltersOnloadblur, setshowfiltersOnloadblur] = useState(false);\n  const [gotoCaption, setgotoCaption] = useState(false);\n  useEffect(() => {\n    if (gotoCaption) {}\n  }, [gotoCaption]);\n\n  const addimageFiltersRef = imageRef => {\n    if (imageRef && !imageFiltersRef.current.includes(imageRef)) {\n      imageFiltersRef.current.push(imageRef);\n    } ////console.log(postItemsRef.current[1]);\n\n  };\n\n  const canvasRef = useRef(null);\n  const canvasRefdummy = useRef(null);\n\n  function blend(background, foreground, width, height, transform) {\n    var bottom = background.getImageData(0, 0, width, height);\n    var top = foreground.getImageData(0, 0, width, height);\n\n    for (var i = 0, size = top.data.length; i < size; i += 4) {\n      // red\n      top.data[i + 0] = transform(bottom.data[i + 0], top.data[i + 0]); // green\n\n      top.data[i + 1] = transform(bottom.data[i + 1], top.data[i + 1]); // blue\n\n      top.data[i + 2] = transform(bottom.data[i + 2], top.data[i + 2]); // the fourth slot is alpha. We don't need that (so skip by 4)\n    }\n\n    return top;\n  }\n\n  const convertColor = (color, filtercolorMode) => {\n    // Step 1: Convert hexadecimal color code to RGB representation\n    const hexToRgb = hex => {\n      const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n      const fullHex = hex.replace(shorthandRegex, (_, r, g, b) => r + r + g + g + b + b);\n      const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(fullHex);\n      return result ? [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)] : [0, 0, 0];\n    };\n\n    var x;\n    x = 0.5; // Step 2: Reduce intensity of each RGB component by multiplying it by 0.8\n\n    const reduceIntensity = rgb => {\n      return rgb.map(value => Math.round(value * x));\n    }; // Step 3: Convert modified RGB values back to hexadecimal\n\n\n    const rgbToHex = rgb => {\n      return '#' + rgb.map(value => {\n        const hex = value.toString(16);\n        return hex.length === 1 ? '0' + hex : hex;\n      }).join('');\n    };\n\n    const rgbColor = hexToRgb(color);\n    const reducedRgb = reduceIntensity(rgbColor);\n    const reducedHex = rgbToHex(reducedRgb);\n    return reducedHex;\n  };\n\n  function FilterGradient(width, height, type) {\n    var filtercolorMode = 9;\n    var ctx = canvasRefdummy.current.getContext(\"2d\");\n    canvasRefdummy.current.height = height;\n    canvasRefdummy.current.width = width;\n\n    if (type === \"jentle\") {\n      var gradient = ctx.createLinearGradient(width / 73.6, height / 33.4, 0, width / 2, height / 2, width * 0.6);\n    } else if (type === \"mint\" || type === \"sahara\") {\n      var gradient = ctx.createLinearGradient(width / 73.6, height / 33.4, 0, width / 2, height / 2, width * 0.6);\n    } else if (type === \"fog\") {\n      var gradient = ctx.createLinearGradient(width / 2, height / 2, 0, width / 2, height / 2, width * 0.6);\n    } else if (type === \"nebula\") {\n      var gradient = ctx.createLinearGradient(width / 2, height / 2, 0, width / 2, height / 2, width * 0.6);\n    } else if (type === \"juice\") {\n      var gradient = ctx.createRadialGradient(width / 2, height / 2, 0, width / 2, height / 2, width * 0.7);\n    } else if (type === \"moonshine\") {\n      var gradient = ctx.createRadialGradient(width / 2, height / 2, 0, width / 2, height / 2, width * 0.7);\n    } else if (type === \"vintage\") {\n      var gradient = ctx.createRadialGradient(width / 2, height / 3, 0, width / 2, height / 2, width * 0.66);\n    } else if (type === \"rainbow\" || type === \"superstar\") {\n      var gradient = ctx.createLinearGradient(width / 73.6, height / 33.4, 0, width / 2, height / 2, width * 0.6);\n    } else {}\n\n    if (type === \"jentle\") {\n      const reducedColor1 = convertColor('#2c1f1f', filtercolorMode);\n      const reducedColor2 = convertColor('#41243c', filtercolorMode);\n      const reducedColor3 = convertColor('#272122', filtercolorMode);\n      gradient.addColorStop(0.1, reducedColor1);\n      gradient.addColorStop(0.2, reducedColor2);\n      gradient.addColorStop(0.8, reducedColor3);\n    } else if (type === \"mint\") {\n      gradient.addColorStop(0.5, \"#21483e\");\n      gradient.addColorStop(0.75, \"#302831\");\n      gradient.addColorStop(0.1, \"#203131\");\n    } else if (type === \"nebula\") {\n      const reducedColor1 = convertColor('#3b1858', filtercolorMode);\n      const reducedColor2 = convertColor('#151569', filtercolorMode);\n      gradient.addColorStop(0.1, reducedColor1);\n      gradient.addColorStop(0.7, reducedColor2);\n    } else if (type === \"juice\") {\n      const reducedColor1 = convertColor('#242424', filtercolorMode);\n      const reducedColor2 = convertColor('#313131', filtercolorMode);\n      gradient.addColorStop(0, reducedColor1);\n      gradient.addColorStop(1, reducedColor2);\n    } else if (type === \"moonshine\") {\n      const reducedColor1 = convertColor('#403d6149', filtercolorMode);\n      const reducedColor2 = convertColor('#222222', filtercolorMode);\n      const reducedColor3 = convertColor('#403d6149', filtercolorMode);\n      const reducedColor4 = convertColor('#403d6149', filtercolorMode);\n      gradient.addColorStop(0.25, reducedColor1);\n      gradient.addColorStop(0.5, reducedColor2);\n      gradient.addColorStop(0.75, reducedColor3);\n      gradient.addColorStop(1, reducedColor4);\n    } else if (type === \"rainbow\") {\n      const reducedColor1 = convertColor('#5c384c', filtercolorMode);\n      const reducedColor2 = convertColor('#5c384c', filtercolorMode);\n      const reducedColor3 = convertColor('#3e452f', filtercolorMode);\n      const reducedColor4 = convertColor('#2e3c3f', filtercolorMode);\n      gradient.addColorStop(0.2, reducedColor1);\n      gradient.addColorStop(0.3, reducedColor2);\n      gradient.addColorStop(0.5, reducedColor3);\n      gradient.addColorStop(0.87, reducedColor4);\n    } else if (type === \"superstar\") {\n      const reducedColor1 = convertColor('#244a82', filtercolorMode);\n      const reducedColor2 = convertColor('#4d3017', filtercolorMode);\n      gradient.addColorStop(0.2, reducedColor1);\n      gradient.addColorStop(0.8, reducedColor2);\n    } else if (type === \"fog\") {\n      const reducedColor1 = convertColor('#293746', filtercolorMode);\n      const reducedColor2 = convertColor('#3a2922', filtercolorMode);\n      const reducedColor3 = convertColor('#3b355d', filtercolorMode);\n      gradient.addColorStop(0, reducedColor1);\n      gradient.addColorStop(0.4, reducedColor2);\n      gradient.addColorStop(0.8, reducedColor3);\n    } else if (type === \"vintage\") {\n      const reducedColor1 = convertColor('#111111', filtercolorMode);\n      const reducedColor2 = convertColor('#222222', filtercolorMode);\n      const reducedColor3 = convertColor('#333333', filtercolorMode);\n      gradient.addColorStop(0, reducedColor1);\n      gradient.addColorStop(0.6, reducedColor2);\n      gradient.addColorStop(1, reducedColor3);\n    } else if (type === \"sahara\") {\n      const reducedColor1 = convertColor('#3b5910', filtercolorMode);\n      const reducedColor2 = convertColor('#191d1b', filtercolorMode);\n      gradient.addColorStop(0.1, reducedColor1);\n      gradient.addColorStop(0.6, reducedColor2);\n    } else {}\n\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, 0, width, height);\n    return ctx;\n  }\n\n  function blobToBase64(blob) {\n    return new Promise((resolve, _) => {\n      const reader = new FileReader();\n\n      reader.onloadend = () => resolve(reader.result);\n\n      reader.readAsDataURL(blob);\n    });\n  } ///\n  ///\n  ///\n  /// UPDATE CONFIRM PASSWORD VALUE/ SHOW SPINNER REPEAT PASSWORD\n\n\n  function ApplyImageFilter(typex, index, index2, Ref, method, resolution) {\n    //////////////////INITIALIZE  CANVAS\n    var type = typex;\n\n    if (superzeroeffect[index]) {\n      type = \"normal\";\n    }\n\n    if (type === effectMode[index] && activeSticker === 100 && method !== \"imageHD\" && method !== \"imageHDall\") {\n      if (index + 1 > selectedImage.length - 1) {\n        setblink(false);\n        seteffectMode(effectModexx);\n        setregimageholdfilter(regimageholdfilterxx);\n      } else {\n        ApplyImageFilter(typex, index + 1, index2 + 1, getImageWidth, \"image\", \"sd\");\n      }\n    } else {\n      const previewFileReadimage = new Image(); //// previewFileReadimage.src = itemUploadRef.current[index].src;\n\n      if (duplicateItemupload[index]) {\n        previewFileReadimage.src = duplicateItemupload[index];\n      } else {\n        previewFileReadimage.src = itemUploadRefSD.current[index].src;\n      }\n\n      var widthx;\n      var heightx;\n      var width;\n      var height; /////////////////////////////////////////resolution//////////////////////////////////////////////\n\n      var dynamicDimensions = matchMobile ? window.innerHeight * 4.5 : window.innerHeight * 1.8;\n      var dynamicDimensionsx = matchMobile ? window.innerWidth * 4.5 : window.innerWidth * 1.8; /////////////////////////////////////////resolution//////////////////////////////////////////////\n\n      previewFileReadimage.onload = function () {\n        const ctx = canvasRef.current.getContext(\"2d\");\n\n        if (previewFileReadimage.naturalWidth > previewFileReadimage.naturalHeight) {\n          if (method === \"thumb\") {\n            widthx = matchMobile ? 155 : 250;\n            width = matchMobile ? 155 : 250;\n          } else {\n            if (resolution === \"hd\") {\n              widthx = previewFileReadimage.naturalWidth;\n              width = previewFileReadimage.naturalWidth;\n            } else {\n              widthx = matchMobile ? dynamicDimensionsx * 0.7 : dynamicDimensionsx * 0.8;\n              width = matchMobile ? dynamicDimensionsx * 0.7 : dynamicDimensionsx * 0.8;\n            }\n          }\n\n          var scalex = widthx / previewFileReadimage.naturalWidth;\n          heightx = previewFileReadimage.naturalHeight * scalex;\n          var scale = width / previewFileReadimage.naturalWidth;\n          height = previewFileReadimage.naturalHeight * scale;\n        } else {\n          if (method === \"thumb\") {\n            heightx = matchMobile ? 150 : 250;\n            height = matchMobile ? 150 : 250;\n          } else {\n            if (resolution === \"hd\") {\n              heightx = previewFileReadimage.naturalHeight;\n              height = previewFileReadimage.naturalHeight;\n            } else {\n              heightx = matchMobile ? dynamicDimensions * 0.6 : dynamicDimensions * 0.9;\n              height = matchMobile ? dynamicDimensions * 0.6 : dynamicDimensions * 0.9;\n            }\n          }\n\n          var scalex = heightx / previewFileReadimage.naturalHeight;\n          widthx = previewFileReadimage.naturalWidth * scalex;\n          var scale = height / previewFileReadimage.naturalHeight;\n          width = previewFileReadimage.naturalWidth * scale;\n        }\n\n        canvasRef.current.height = height;\n        canvasRef.current.width = width; //////////////////INITIALIZE  CANVAS\n\n        requestAnimationFrame(async () => {\n          //////////////////CSS EDIT IMAGE WITH CTX.FILTER\n          if (type === \"lift\") {\n            ctx.filter = \"contrast(0.99) brightness(0.98) blur(0px) saturate(126%)\";\n          } else if (type === \"sahara\") {\n            ctx.filter = \"contrast(1.2) brightness(0.91) saturate(104%)\";\n          } else if (type === \"jentle\") {\n            ctx.filter = \"contrast(1.25) brightness(0.76) hue-rotate(20deg) saturate(90%) \";\n          } else if (type === \"mint\") {\n            ctx.filter = \"contrast(1.25) brightness(0.77)  saturate(135%)  \";\n          } else if (type === \"nebula\") {\n            ctx.filter = \"contrast(1.1) brightness(1.03)\";\n          } else if (type === \"juice\") {\n            if (method === \"thumb\" && matchMobile) {\n              ctx.filter = \"contrast(1.16) brightness(0.99) saturate(185%) blur(0px)\";\n            } else {\n              ctx.filter = \"contrast(0.96) brightness(1) saturate(185%) blur(0.55px)\";\n            }\n          } else if (type === \"rainbow\") {\n            ctx.filter = \"contrast(1.17) brightness(0.92) saturate(145%) \";\n          } else if (type === \"superstar\") {\n            ctx.filter = \"contrast(1.07) brightness(0.93) saturate(130%)  hue-rotate(1.4deg)\";\n          } else if (type === \"fog\") {\n            ctx.filter = \"contrast(1.2) brightness(0.95) saturate(137%)\";\n          } else if (type === \"moonshine\") {\n            ctx.filter = \"contrast(0.95) brightness(1.05.2) saturate(45%) blur(0px)\";\n          } else if (type === \"vintage\") {\n            ctx.filter = \" contrast(1.2)  brightness(0.87.6)  saturate(38%)\";\n          } else {} //////////////////CSS EDIT IMAGE WITH CTX.FILTER\n\n\n          ctx.drawImage(previewFileReadimage, 0, 0, canvasRef.current.width, canvasRef.current.height); //////////////////////VIGNETTE\n\n          var w = canvasRef.current.width;\n          var h = canvasRef.current.height; //////////////////////VIGNETTE\n\n          var width = w;\n          var height = h;\n\n          if (type === \"sahara\") {\n            var gradient = ctx.createLinearGradient(w / 2.7, h / 2, 0, w / 4.8, h / 2, w * 8.65);\n            gradient.addColorStop(0, \"rgba(80, 111, 32, 0.01)\");\n            gradient.addColorStop(1, \"rgba(10,10,10,0.001)\");\n            ctx.fillStyle = gradient;\n            ctx.fillRect(0, 0, width, height);\n          } else if (type === \"mint\") {\n            var gradient = ctx.createRadialGradient(w / 2, h / 2, 0, w / 2, h / 2, w * 0.65);\n            gradient.addColorStop(0, \"rgba(255, 255, 255,0.01)\");\n            gradient.addColorStop(1, \"rgba(0,0,0,0.001)\");\n            ctx.fillStyle = gradient;\n            ctx.fillRect(0, 0, width, height);\n          } else if (type === \"lift\" || type === \"juice\") {\n            var gradient = ctx.createRadialGradient(w / 2, h / 3, 0, w / 2, h / 3, w * 0.66);\n            gradient.addColorStop(0, \"rgba(255, 255, 255,0.01)\");\n            gradient.addColorStop(1, \"rgba(255, 255, 255,0.001)\");\n            ctx.fillStyle = gradient;\n            ctx.fillRect(0, 0, width, height);\n          } else if (type === \"moonshine\") {\n            var gradient = ctx.createLinearGradient(w / 2, h / 3, 0, w / 2, h / 3, w * 0.4);\n            gradient.addColorStop(0, \" rgba(255, 255, 255,0.001)\");\n            gradient.addColorStop(1, \"#403d6149\");\n            ctx.fillStyle = gradient;\n            ctx.fillRect(0, 0, width, height);\n            var gradient = ctx.createRadialGradient(w / 2, h / 2, 0, w / 2, h / 2, w * 0.3);\n            gradient.addColorStop(0, \"rgba(0,0,0,0.02)\");\n            gradient.addColorStop(1, \" rgba(255, 255, 255,0.001)\");\n            ctx.fillStyle = gradient;\n            ctx.fillRect(0, 0, width, height);\n          } else if (type === \"vintage\") {} else if (type === \"nebula\") {\n            var gradient = ctx.createRadialGradient(w / 2, h / 2, 0, w / 2, h / 2, w * 0.65);\n            gradient.addColorStop(0, \"rgba(255, 255, 255, 0.006)\");\n            gradient.addColorStop(1, \"rgba(0, 0, 0, 0.08)\");\n            ctx.fillStyle = gradient;\n            ctx.fillRect(0, 0, width, height);\n          } else if (type === \"rainbow\") {\n            var gradient = ctx.createRadialGradient(w / 2, h / 2, 0, w / 2, h / 2, w * 0.68);\n            gradient.addColorStop(0, \"rgb(163, 218, 37,0.004)\");\n            gradient.addColorStop(1, \"rgb(27, 194, 236,0.004)\");\n            ctx.fillStyle = gradient;\n            ctx.fillRect(0, 0, width, height);\n          } else if (type === \"fog\") {\n            var gradient = ctx.createLinearGradient(w / 2, h / 71, 0, w / 19, h / 2, w * 0.4);\n            gradient.addColorStop(0, \"rgba(255, 255, 255,0)\");\n            gradient.addColorStop(1, \"#20422e5a\");\n            ctx.fillStyle = gradient;\n            ctx.fillRect(0, 0, width, height);\n          } else {} //////////////////////VIGNETTE\n          //////////////////////GRADIENT BRIGHTNESS\n\n\n          if (type === \"normal\") {} else {\n            var gradient = ctx.createRadialGradient(w / 2, h / 2, 0, w / 2, h / 2, w * 0.6);\n\n            if (type === \"lift\") {\n              gradient.addColorStop(0, \"#dcecdf16\");\n              gradient.addColorStop(1, \"#dceaec1a\");\n            } else if (type === \"fog\") {\n              gradient.addColorStop(0, \"#c9d6df11\");\n              gradient.addColorStop(1, \"#bef0ce13\");\n            } else if (type === \"jentle\") {\n              gradient.addColorStop(0, \"rgba(255, 255, 255,0.001)\");\n              gradient.addColorStop(1, \"rgba(255, 255, 255,0.001)\");\n            } else if (type === \"vintage\") {} else if (type === \"superstar\" || type === \"rainbow\" || type === \"sahara\") {\n              gradient.addColorStop(0, \"rgba(255, 255, 255,0.002)\");\n              gradient.addColorStop(1, \"rgba(255, 255, 255,0.001)\");\n            } else {\n              gradient.addColorStop(0, \"rgba(255, 255, 255,0.002)\");\n              gradient.addColorStop(1, \"rgba(255, 255, 255,0.001)\");\n            }\n\n            ctx.fillStyle = gradient;\n            ctx.fillRect(0, 0, width, height);\n          } //////////////////////GRADIENT BRIGHTNESS\n          ////////////////// /////// GLOBALCOMPOSITEOPERATION\n\n\n          if (type === \"sahara\") {\n            ////////////composition\n            ctx.globalCompositeOperation = \"overlay\";\n            ctx.fillStyle = \"#a58e89cc\";\n            ctx.fillRect(0, 0, width, height);\n            ctx.globalCompositeOperation = \"overlay\";\n            ctx.fillStyle = \"#a58e89cc\";\n            ctx.fillRect(0, 0, width, height); ////////////composition\n          } else if (type === \"jentle\") {\n            ////////////composition\n            ctx.globalCompositeOperation = \"overlay\";\n            ctx.fillStyle = \"#d3b5b5\";\n            ctx.fillRect(0, 0, width, height);\n            ctx.globalCompositeOperation = \"soft-light\";\n            ctx.fillStyle = \"#d3b5b5\";\n            ctx.fillRect(0, 0, width, height); ////////////composition\n          } else if (type === \"mint\") {} else if (type === \"nebula\") {\n            ////////////composition\n            ctx.globalCompositeOperation = \"soft-light\";\n            ctx.fillStyle = \"#6e6b72cc\";\n            ctx.fillRect(0, 0, width, height);\n            ctx.globalCompositeOperation = \"soft-light\";\n            ctx.fillStyle = \"#6c6971cc\";\n            ctx.fillRect(0, 0, width, height); ////////////composition\n          } else if (type === \"moonshine\") {\n            ////////////composition\n            ctx.globalCompositeOperation = \"soft-light\";\n            ctx.fillStyle = \"#77479f68\";\n            ctx.fillRect(0, 0, width, height);\n            ctx.globalCompositeOperation = \"overlay\";\n            ctx.fillStyle = \"#69359368\";\n            ctx.fillRect(0, 0, width, height); ////////////composition\n          } else if (type === \"juice\") {\n            ////////////composition\n            ctx.globalCompositeOperation = \"soft-light\";\n            ctx.fillStyle = \"#5b6c7014\";\n            ctx.fillRect(0, 0, width, height);\n            ctx.globalCompositeOperation = \"overlay\";\n            ctx.fillStyle = \"#5b6c7014\";\n            ctx.fillRect(0, 0, width, height);\n            ctx.globalCompositeOperation = \"overlay\";\n            ctx.fillStyle = \"#5b6c7014\";\n            ctx.fillRect(0, 0, width, height); ////////////composition\n          } else if (type === \"rainbow\") {\n            ////////////composition\n            ctx.globalCompositeOperation = \"overlay\";\n            ctx.fillStyle = \"#3950681f\";\n            ctx.fillRect(0, 0, width, height);\n            ctx.globalCompositeOperation = \"soft-light\";\n            ctx.fillStyle = \"#42806c1f\";\n            ctx.fillRect(0, 0, width, height); ////////////composition\n          } else if (type === \"superstar\") {\n            ////////////composition\n            ctx.globalCompositeOperation = \"overlay\";\n            ctx.fillStyle = \"#69758113\";\n            ctx.fillRect(0, 0, width, height);\n            ctx.globalCompositeOperation = \"overlay\";\n            ctx.fillStyle = \"#69758113\";\n            ctx.fillRect(0, 0, width, height); ////////////composition\n          } else if (type === \"fog\") {\n            ////////////composition\n            ctx.globalCompositeOperation = \"soft-light\";\n            ctx.fillStyle = \"#2c2b2937\";\n            ctx.fillRect(0, 0, width, height);\n            ctx.globalCompositeOperation = \"soft-light\";\n            ctx.fillStyle = \"#2c2b2937\";\n            ctx.fillRect(0, 0, width, height); ////////////composition\n          } else if (type === \"vintage\") {\n            ////////////composition\n            ctx.globalCompositeOperation = \"soft-light\";\n            ctx.fillStyle = \"#8888b14e\";\n            ctx.fillRect(0, 0, width, height);\n            ctx.globalCompositeOperation = \"overlay\";\n            ctx.fillStyle = \"#5c83944e\";\n            ctx.fillRect(0, 0, width, height);\n            ctx.globalCompositeOperation = \"soft-light\";\n            ctx.fillStyle = \"#8888b14e\";\n            ctx.fillRect(0, 0, width, height); ////////////composition\n            ////////////composition\n          } else {} ////////////////// /////// GLOBALCOMPOSITEOPERATION\n          ////////////////////GRADIENT BLENDING\n\n\n          if (type === \"jentle\" || type === \"mint\" || type === \"nebula\" || type === \"juice\" || type === \"rainbow\" || type === \"superstar\" || type === \"fog\" || type === \"moonshine\" || type === \"vintage\" || type === \"sahara\") {\n            var gradient = FilterGradient(width, height, type);\n            var screen = blend(ctx, gradient, width, height, function (bottomPixel, topPixel) {\n              return 255 - (255 - topPixel) * (255 - bottomPixel) / 255;\n            });\n            ctx.putImageData(screen, 0, 0);\n          } ////////////////////GRADIENT BLENDING\n\n\n          try {\n            KeepCallingThumbnail4Filters(Ref, ctx, index2, method);\n\n            if (method === \"image\" || method === \"imageHD\" || method === \"imageHDall\") {\n              var data = canvasRef.current.toDataURL();\n              Ref.current[index].src = data;\n\n              if (method === \"imageHDall\") {\n                var data = canvasRef.current.toDataURL(\"image/png\");\n                var datathumb = canvasRef.current.toDataURL(\"image/jpeg\", 0.05);\n                const res = await fetch(data);\n                const datax = await res.blob();\n                const resdatathumb = await fetch(datathumb);\n                const datathumbx = await resdatathumb.blob();\n                var base64String = await blobToBase64(datax);\n                finalImageDataxx[index] = datax;\n                finalImageDataxxSD[index] = datathumbx;\n                finalImageDataxxBASE64[index] = base64String;\n              }\n\n              regimageholdfilterxx[index] = data;\n              effectModexx[index] = type;\n              ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n\n              if (method === \"imageHD\") {\n                sethdfilter(false);\n                setblink(false);\n                seteffectMode(effectModexx);\n                setregimageholdfilter(regimageholdfilterxx);\n              } else {\n                if (index + 1 > selectedImage.length - 1) {\n                  setblink(false);\n\n                  if (method === \"imageHDall\") {\n                    setfinalImageData(finalImageDataxx);\n                    setfinalImageDataSD(finalImageDataxxSD);\n                    setfinalImageDataBASE64(finalImageDataxxBASE64);\n                    setsupeFilterLoadFade(false);\n                    setstartTopicCap(true);\n                  }\n\n                  seteffectMode(effectModexx);\n                  setregimageholdfilter(regimageholdfilterxx);\n                } else {\n                  if (method === \"imageHDall\") {\n                    ApplyImageFilter(effectMode[index + 1], index + 1, index2 + 1, getImageWidth, \"imageHDall\", \"hd\");\n                  } else {\n                    ApplyImageFilter(typex, index + 1, index2 + 1, getImageWidth, \"image\", \"sd\");\n                  }\n                }\n              }\n            }\n\n            if (method === \"supersticker\") {\n              if (FilterUnderStickerStopFiltering) {\n                trapfiltersxx[index] = true;\n                settrapfilters(trapfiltersxx);\n              } else {\n                trapfiltersxx[index] = false;\n                settrapfilters(trapfiltersxx);\n              }\n\n              var data = canvasRef.current.toDataURL();\n              Ref.current[index].src = data;\n\n              if (effectMode[index] !== \"normal\") {\n                if (duplicateItemupload[index]) {} else {\n                  regimageholdfilterxx[index] = data;\n                  setregimageholdfilter(regimageholdfilterxx);\n                }\n              }\n\n              ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n              setactiveSticker(100);\n            }\n          } catch {\n            console.log(\"filtermode  filter error\");\n          }\n        });\n        canvasRef.current.style.width = `${widthx}px`;\n        canvasRef.current.style.height = `${heightx}px`;\n      };\n    }\n  }\n\n  const KeepCallingThumbnail4Filters = (Ref, ctx, index2, method) => {\n    //// const gg = await ctx.putImageData(screen, 0, 0);\n    if (method === \"thumb\") {\n      Ref.current[index2].src = canvasRef.current.toDataURL();\n      ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n\n      if (index2 === 1) {\n        ApplyImageFilter(\"juice\", 0, index2 + 1, imageFiltersRef, \"thumb\", \"sd\");\n      } else if (index2 === 2) {\n        ApplyImageFilter(\"superstar\", 0, index2 + 1, imageFiltersRef, \"thumb\", \"sd\");\n      } else if (index2 === 3) {\n        ApplyImageFilter(\"rainbow\", 0, index2 + 1, imageFiltersRef, \"thumb\", \"sd\");\n      } else if (index2 === 4) {\n        ApplyImageFilter(\"fog\", 0, index2 + 1, imageFiltersRef, \"thumb\", \"sd\");\n      } else if (index2 === 5) {\n        ApplyImageFilter(\"sahara\", 0, index2 + 1, imageFiltersRef, \"thumb\", \"sd\");\n      } else if (index2 === 6) {\n        ApplyImageFilter(\"nebula\", 0, index2 + 1, imageFiltersRef, \"thumb\", \"sd\");\n      } else if (index2 === 7) {\n        ApplyImageFilter(\"jentle\", 0, index2 + 1, imageFiltersRef, \"thumb\", \"sd\");\n      } else if (index2 === 8) {\n        ApplyImageFilter(\"mint\", 0, index2 + 1, imageFiltersRef, \"thumb\", \"sd\");\n      } else if (index2 === 9) {\n        ApplyImageFilter(\"moonshine\", 0, index2 + 1, imageFiltersRef, \"thumb\", \"sd\");\n      } else if (index2 === 10) {\n        ApplyImageFilter(\"vintage\", 0, index2 + 1, imageFiltersRef, \"thumb\", \"sd\");\n        setshowfiltersOnloadblur(true);\n      } else {\n        ApplyImageFilter(\"normal\", 0, 0, getImageWidth, \"image\", \"sd\");\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (hdfilter) {\n      ApplyImageFilter(effectMode[superstickerIndex], superstickerIndex, 0, getImageWidth, \"imageHD\", \"hd\");\n    }\n  }, [hdfilter]);\n  useEffect(() => {\n    if (startSuperSticker) {} else {\n      if (activeSticker != 100) {\n        if (duplicateItemupload[activeSticker]) {\n          ApplyImageFilter(effectMode[activeSticker], activeSticker, 0, getImageWidth, \"supersticker\", \"sd\");\n        } else {\n          ApplyImageFilter(effectMode[activeSticker], activeSticker, 0, getImageWidth, \"supersticker\", \"sd\");\n        }\n      }\n    }\n  }, [startSuperSticker]);\n  useEffect(() => {\n    if (imageFiltersRef && activatefilterImageReducer) {\n      setTimeout(function () {\n        setallow(true);\n        setshowfiltersOnloadblur(false);\n        setshowfiltersOnload(true);\n        ApplyImageFilter(\"lift\", 0, 1, imageFiltersRef, \"thumb\", \"sd\");\n      }, 350);\n    }\n  }, [activatefilterImageReducer]);\n\n  const startImageFilter = i => {\n    if (i === 12 && ActiveSlide === i) {\n      setsupeFilterLoadFade(true);\n      ApplyImageFilter(effectMode[0], 0, 0, getImageWidth, \"imageHDall\", \"hd\");\n    } else {\n      clickOptions(i, optionsClickType, \"filter\");\n\n      if (Timer.current) {\n        clearTimeout(Timer.current);\n      }\n\n      if (ActiveSlide === i) {\n        setblink(true);\n        ApplyImageFilter(optionsNameData[i], 0, 0, getImageWidth, \"image\", \"sd\");\n      } else {\n        if (i === 12) {} else {\n          Timer.current = setTimeout(function () {\n            setblink(true);\n            ApplyImageFilter(optionsNameData[i], 0, 0, getImageWidth, \"image\", \"sd\");\n          }, 2000);\n        }\n      }\n    }\n  };\n\n  const clickOptionsOutter = (i, optionsClickType, source) => {\n    if (Timer.current) {\n      clearTimeout(Timer.current);\n    }\n\n    if (i === -1) {\n      clickOptions(optionsImages.length, optionsClickType, \"filter2\");\n    } else if (i > optionsImages.length - 1) {\n      clickOptions(0, optionsClickType, \"filter\");\n    } else {\n      clickOptions(i, optionsClickType, \"filter\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        padding: \"0px\",\n        position: \"fixed\",\n        top: \"-400%\",\n        zIndex: 0,\n        visibility: \"hidden\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1205,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRefdummy,\n      style: {\n        padding: \"0px\",\n        display: \"none\",\n        position: \"fixed\",\n        top: \"-400%\",\n        zIndex: 0,\n        visibility: \"hidden\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1215,\n      columnNumber: 7\n    }, this), optionsShow && allow ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(animated.div, {\n        ref: getFilterWidthViewable,\n        style: animationop,\n        children: [matchPc ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\" \", /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            style: {\n              zIndex: 10,\n              height: \"0px\",\n              width: \"100%\",\n              position: \"fixed\",\n              marginTop: `${(getSliderWidthNew + addedwidth) / 2}px`\n            },\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 2,\n              style: {\n                zIndex: 10,\n                height: \"0px\",\n                textAlign: \"left\"\n              },\n              children: [\" \", /*#__PURE__*/_jsxDEV(CircleIcon, {\n                onMouseDown: () => {\n                  clickOptionsOutter(ActiveSlide - 1, optionsClickType, \"filter\");\n                },\n                className: darkmodeReducer ? \"make-small-icons-clickable-dark  buttonshake dontallowhighlighting zuperkinginfo \" : \"make-small-icons-clickable-light  buttonshake  dontallowhighlighting  zuperkinginfo  \",\n                style: {\n                  filter: showfiltersOnloadblur ? \"blur(0px)\" : \"blur(4px)\",\n                  marginTop: \"4vh\",\n                  fontSize: \"1.6vw\",\n                  cursor: \"pointer\",\n                  color: darkmodeReducer ? \"rgba(200, 200, 200, 0.7)\" : \"rgba(005, 005, 005, 0.6)\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1252,\n                columnNumber: 21\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1242,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 8,\n              style: {\n                height: \"0px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1279,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 2,\n              style: {\n                zIndex: 10,\n                height: \"0px\",\n                textAlign: \"right\"\n              },\n              children: [\" \", /*#__PURE__*/_jsxDEV(CircleIcon, {\n                className: darkmodeReducer ? \"make-small-icons-clickable-dark  buttonshake dontallowhighlighting zuperkinginfo \" : \"make-small-icons-clickable-light  buttonshake  dontallowhighlighting  zuperkinginfo  \",\n                onMouseDown: () => {\n                  clickOptionsOutter(ActiveSlide + 1, optionsClickType, \"filter\");\n                },\n                style: {\n                  filter: showfiltersOnloadblur ? \"blur(0px)\" : \"blur(4px)\",\n                  marginTop: \"4vh\",\n                  fontSize: \"1.6vw\",\n                  cursor: \"pointer\",\n                  color: darkmodeReducer ? \"rgba(200, 200, 200, 0.7)\" : \"rgba(005, 005, 005, 0.6)\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1297,\n                columnNumber: 21\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1287,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1232,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : null, /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          className: typeTop ? darkmodeReducer ? `optionsTop-background-dark ` : `optionsTop-background-light ` : \"\",\n          onTouchStart: handleTouchStartOptions,\n          onTouchMove: handleTouchMoveOptions,\n          style: {\n            zIndex: 1,\n            padding: \"0px\",\n            top: matchPc ? typeTop ? \"-2vh\" : \"0vh\" : \"0vh\",\n            position: \"relative\",\n            paddingRight: \"200px\",\n            margin: \"0 auto\",\n            overflow: \"hidden\",\n            left: \"0px\",\n            height: matchPc ? \"auto\" : \"25vh\",\n            paddingBottom: \"1px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(animated.div, {\n            ref: optionsCollectImageRef,\n            style: modalanimation,\n            children: optionsImages.map((im, i) => /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              style: {},\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                style: {\n                  margin: \"auto\",\n                  textAlign: \"center\",\n                  position: \"relative\",\n                  top: matchPc ? \"1.55vh\" : \"0.54em\"\n                },\n                children: /*#__PURE__*/_jsxDEV(Grid, {\n                  className: blink ? \"blinken\" : \"\",\n                  item: true,\n                  xs: 12,\n                  style: {\n                    margin: \"auto\",\n                    marginLeft: \"2vw\",\n                    paddingBottom: \"0px\",\n                    fontFamily: \"Roboto Condensed\",\n                    fontSize: matchPc ? \"1.5vw\" : matchTablet ? \"2.08vh\" : \"2.4vh\",\n                    fontWeight: \"bolder\",\n                    visibility: ActiveSlide === i ? \"visible\" : \"hidden\",\n                    filter: darkmodeReducer ? \"drop-shadow(1.2px 0.1px 1.92px rgba(255, 255, 255, 0.6))\" : \"drop-shadow(1.2px 0.1px 1.92px rgba(41, 53, 70, 8.35))\",\n                    color: darkmodeReducer ? \"#eeeeee\" : \"#000000\"\n                  },\n                  children: [\" \", optionsNameData[i]]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1363,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1353,\n                columnNumber: 21\n              }, this), showfiltersOnload ? i === 12 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  onMouseDown: () => {\n                    startImageFilter(i);\n                  },\n                  style: {\n                    cursor: ActiveSlide === i ? \"pointer\" : \"copy\",\n                    width: `${getSliderWidthNew + addedwidth - 5}px`,\n                    height: `${getSliderWidthNew + addedwidth - 5}px`,\n                    backgroundColor: darkmodeReducer ? \"rgba(010,010,010, 0.68)\" : \"rgba(211,211,211, 0.7)\",\n                    borderRadius: \"50%\",\n                    marginLeft: \"2vw\",\n                    marginTop: \"2.15vh\",\n                    textAlign: \"center\",\n                    alignItems: \"center\",\n                    display: \"grid\",\n                    justifyContent: \"center\",\n                    boxShadow: darkmodeReducer ? ActiveSlide === i ? colortypeReducer === 0 ? `0 0 5.5px ${colorReducerdark}` : `0 0 5.5px ${colorReducer}` : \"0 0 1.5px#aaaaaa\" : ActiveSlide === i ? `0 0 5.5px ${colorReducer}` : \"0 0 1.45px#222222\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(ChevronRightIcon, {\n                    style: {\n                      fontSize: matchPc ? \"3.4vw\" : \"5vh\",\n                      color: darkmodeReducer ? \"#eeeeee\" : \"#222222\"\n                    },\n                    className: \"zuperkinginfo\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1422,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1393,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n                  ref: addimageFiltersRef,\n                  alt: ` ${optionsNameData[i]}  option`,\n                  onMouseDown: () => {\n                    startImageFilter(i);\n                  },\n                  style: {\n                    backgroundColor: \"red\",\n                    cursor: ActiveSlide === i ? \"pointer\" : \"copy\",\n                    width: `${getSliderWidthNew + addedwidth}px`,\n                    height: `${getSliderWidthNew + addedwidth}px`,\n                    borderRadius: \"50%\",\n                    padding: \"0px\",\n                    objectFit: \"cover\",\n                    marginLeft: \"2vw\",\n                    marginTop: \"13px\",\n                    filter: showfiltersOnloadblur ? \"blur(0px)\" : \"blur(4px)\",\n                    boxShadow: darkmodeReducer ? ActiveSlide === i ? colortypeReducer === 0 ? `0 0 6.8px ${colorReducerdark}` : `0 0 6.8px ${colorReducer}` : typeTop ? \"0 0 12.5px#aaaaaa\" : \"\" : ActiveSlide === i ? `0 0 5.7px ${colorReducer}` : typeTop ? `0 0 14.45px#222222` : \"\"\n                  },\n                  src: itemUploadRefThumb.current[0] ? itemUploadRefThumb.current[0].src : null\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1434,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true) : null]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1352,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1350,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1326,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1228,\n        columnNumber: 11\n      }, this)\n    }, void 0, false) : null]\n  }, void 0, true);\n}\n\n_s(ImageFilterinnerx, \"VvbscFVxdwgu3a8Xx8IVT1KL0ek=\", false, function () {\n  return [useSelector, useSelector, useSelector];\n});\n\n_c = ImageFilterinnerx;\nexport const ImageFilterinner = /*#__PURE__*/React.memo(ImageFilterinnerx);\n_c2 = ImageFilterinner;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ImageFilterinnerx\");\n$RefreshReg$(_c2, \"ImageFilterinner\");","map":{"version":3,"sources":["C:/Users/oghen/OneDrive/Documents/ClikBate/super/src/profile/ImageFilterinner.tsx"],"names":["React","useState","useEffect","useRef","matchPc","matchTablet","matchMobile","Grid","useSelector","animated","ChevronRightIcon","CircleIcon","ImageFilterinnerx","optionsShow","optinstopshowingReducer","typeTop","selectedImage","closeoptionsslide","animationop","optionsCollectImageRef","handleTouchStartOptions","handleTouchMoveOptions","modalanimation","nextSlidePc","optionsImages","ActiveSlide","optionsNameData","clickOptions","optionsClickType","getSliderWidthNew","itemUploadRef","imageFiltersRef","getImageWidth","length","itemUploadRefThumb","loadedimage","startSuperSticker","duplicateItemupload","activeSticker","setactiveSticker","seteffectMode","effectMode","setcallfilter","callfilter","regimageholdfilter","setregimageholdfilter","FilterUnderStickerStopFiltering","trapfilters","settrapfilters","sethdfilter","hdfilter","superstickerIndex","superzeroeffect","finalImageData","setfinalImageData","finalImageDataSD","setfinalImageDataSD","finalImageDataBASE64","setfinalImageDataBASE64","setstartTopicCap","itemUploadRefSD","setsupeFilterLoadFade","finalImageDataxx","finalImageDataxxSD","finalImageDataxxBASE64","effectModexx","regimageholdfilterxx","trapfiltersxx","blink","setblink","getFilterWidthViewable","getFilterWidthfull","Timer","addedwidth","thumbsLength","darkmode","state","GlobalReducer","darkmodeReducer","activatefilterImage","GlobalNavuploadReducer","activatefilterImageReducer","circleIdentify","circleIdentify2","color","colordark","colortype","GlobalReducerColor","colorReducer","colorReducerdark","colortypeReducer","showfiltersOnload","setshowfiltersOnload","allow","setallow","showfiltersOnloadblur","setshowfiltersOnloadblur","gotoCaption","setgotoCaption","addimageFiltersRef","imageRef","current","includes","push","canvasRef","canvasRefdummy","blend","background","foreground","width","height","transform","bottom","getImageData","top","i","size","data","convertColor","filtercolorMode","hexToRgb","hex","shorthandRegex","fullHex","replace","_","r","g","b","result","exec","parseInt","x","reduceIntensity","rgb","map","value","Math","round","rgbToHex","toString","join","rgbColor","reducedRgb","reducedHex","FilterGradient","type","ctx","getContext","gradient","createLinearGradient","createRadialGradient","reducedColor1","reducedColor2","reducedColor3","addColorStop","reducedColor4","fillStyle","fillRect","blobToBase64","blob","Promise","resolve","reader","FileReader","onloadend","readAsDataURL","ApplyImageFilter","typex","index","index2","Ref","method","resolution","previewFileReadimage","Image","src","widthx","heightx","dynamicDimensions","window","innerHeight","dynamicDimensionsx","innerWidth","onload","naturalWidth","naturalHeight","scalex","scale","requestAnimationFrame","filter","drawImage","w","h","globalCompositeOperation","screen","bottomPixel","topPixel","putImageData","KeepCallingThumbnail4Filters","toDataURL","datathumb","res","fetch","datax","resdatathumb","datathumbx","base64String","clearRect","console","log","style","setTimeout","startImageFilter","clearTimeout","clickOptionsOutter","source","padding","position","zIndex","visibility","display","marginTop","textAlign","fontSize","cursor","paddingRight","margin","overflow","left","paddingBottom","im","marginLeft","fontFamily","fontWeight","backgroundColor","borderRadius","alignItems","justifyContent","boxShadow","objectFit","ImageFilterinner","memo"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { matchPc, matchTablet, matchMobile } from \"../DetectDevice\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport MoreHorizIcon from \"@material-ui/icons/MoreHoriz\";\r\nimport { RootStateOrAny, useSelector, useDispatch } from \"react-redux\";\r\nimport { useSpring, animated } from \"react-spring\";\r\nimport ChevronRightIcon from \"@mui/icons-material/ChevronRight\";\r\nimport CircleIcon from \"@mui/icons-material/Circle\";\r\nimport SettingsIcon from \"@mui/icons-material/Settings\";\r\n\r\nfunction ImageFilterinnerx({\r\n  optionsShow,\r\n  optinstopshowingReducer,\r\n  typeTop,\r\n  selectedImage,\r\n  closeoptionsslide,\r\n  animationop,\r\n  optionsCollectImageRef,\r\n  handleTouchStartOptions,\r\n  handleTouchMoveOptions,\r\n  modalanimation,\r\n  nextSlidePc,\r\n  optionsImages,\r\n  ActiveSlide,\r\n  optionsNameData,\r\n  clickOptions,\r\n  optionsClickType,\r\n  getSliderWidthNew,\r\n  itemUploadRef,\r\n  imageFiltersRef,\r\n  getImageWidth,\r\n  length,\r\n  itemUploadRefThumb,\r\n  loadedimage,\r\n  startSuperSticker,\r\n  duplicateItemupload,\r\n  activeSticker,\r\n  setactiveSticker,\r\n  seteffectMode,\r\n  effectMode,\r\n  setcallfilter,\r\n  callfilter,\r\n  regimageholdfilter,\r\n  setregimageholdfilter,\r\n  FilterUnderStickerStopFiltering,\r\n  trapfilters,\r\n  settrapfilters,\r\n  sethdfilter,\r\n  hdfilter,\r\n  superstickerIndex,\r\n  superzeroeffect,\r\n  finalImageData,\r\n  setfinalImageData,\r\n  finalImageDataSD,\r\n  setfinalImageDataSD,\r\n  finalImageDataBASE64,\r\n  setfinalImageDataBASE64,\r\n  setstartTopicCap,\r\n  itemUploadRefSD,\r\n  setsupeFilterLoadFade,\r\n}: any): JSX.Element {\r\n  const finalImageDataxx = [...finalImageData];\r\n  const finalImageDataxxSD = [...finalImageDataSD];\r\n  const finalImageDataxxBASE64 = [...finalImageDataBASE64];\r\n\r\n  const effectModexx = [...effectMode];\r\n  const regimageholdfilterxx = [...regimageholdfilter];\r\n  const trapfiltersxx = [...trapfilters];\r\n\r\n  const [blink, setblink] = useState(false);\r\n\r\n  const getFilterWidthViewable = useRef<any>([]);\r\n  const getFilterWidthfull = useRef<any>([]);\r\n\r\n  const Timer = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n  var addedwidth: number;\r\n  addedwidth = matchTablet || matchMobile ? 10.6 : 25;\r\n\r\n  const thumbsLength = 13;\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  ///DARKMODE FROM REDUX\r\n  interface RootStateGlobalReducer {\r\n    GlobalReducer: {\r\n      darkmode: boolean;\r\n    };\r\n  }\r\n  const { darkmode } = useSelector((state: RootStateGlobalReducer) => ({\r\n    ...state.GlobalReducer,\r\n  }));\r\n\r\n  const darkmodeReducer = darkmode;\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// GET GLOBAL INNER NAVIGATION VARIABLE\r\n  const { activatefilterImage } = useSelector((state: RootStateOrAny) => ({\r\n    ...state.GlobalNavuploadReducer,\r\n  }));\r\n  const activatefilterImageReducer = activatefilterImage;\r\n\r\n  var circleIdentify = typeTop ? 0 : 4;\r\n  var circleIdentify2 = typeTop ? 1 : 5;\r\n\r\n  ///\r\n  ///\r\n  /// GET COLOR FROM REDUX STORE\r\n  interface RootStateReducerColor {\r\n    GlobalReducerColor: {\r\n      color: string;\r\n      colordark: string;\r\n      colortype: number;\r\n    };\r\n  }\r\n  const { color, colordark, colortype } = useSelector(\r\n    (state: RootStateReducerColor) => ({\r\n      ...state.GlobalReducerColor,\r\n    })\r\n  );\r\n  const colorReducer = color;\r\n  const colorReducerdark = colordark;\r\n  const colortypeReducer = colortype;\r\n\r\n  const [showfiltersOnload, setshowfiltersOnload] = useState(false);\r\n\r\n  const [allow, setallow] = useState(false);\r\n\r\n  const [showfiltersOnloadblur, setshowfiltersOnloadblur] = useState(false);\r\n\r\n  const [gotoCaption, setgotoCaption] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    if (gotoCaption) {\r\n    }\r\n  }, [gotoCaption]);\r\n\r\n  const addimageFiltersRef = (imageRef: any) => {\r\n    if (imageRef && !imageFiltersRef.current.includes(imageRef)) {\r\n      imageFiltersRef.current.push(imageRef);\r\n    }\r\n    ////console.log(postItemsRef.current[1]);\r\n  };\r\n\r\n  const canvasRef: any = useRef(null);\r\n\r\n  const canvasRefdummy: any = useRef(null);\r\n\r\n  function blend(\r\n    background: any,\r\n    foreground: any,\r\n    width: any,\r\n    height: any,\r\n    transform: any\r\n  ) {\r\n    var bottom = background.getImageData(0, 0, width, height);\r\n    var top = foreground.getImageData(0, 0, width, height);\r\n\r\n    for (var i = 0, size = top.data.length; i < size; i += 4) {\r\n      // red\r\n      top.data[i + 0] = transform(bottom.data[i + 0], top.data[i + 0]);\r\n      // green\r\n      top.data[i + 1] = transform(bottom.data[i + 1], top.data[i + 1]);\r\n      // blue\r\n      top.data[i + 2] = transform(bottom.data[i + 2], top.data[i + 2]);\r\n      // the fourth slot is alpha. We don't need that (so skip by 4)\r\n    }\r\n\r\n    return top;\r\n  }\r\n\r\n\r\n\r\n  const convertColor = (color: string, filtercolorMode: any): string => {\r\n    // Step 1: Convert hexadecimal color code to RGB representation\r\n    const hexToRgb = (hex: string): number[] => {\r\n      const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n      const fullHex = hex.replace(shorthandRegex, (_, r, g, b) => r + r + g + g + b + b);\r\n      const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(fullHex);\r\n      return result ? [\r\n        parseInt(result[1], 16),\r\n        parseInt(result[2], 16),\r\n        parseInt(result[3], 16)\r\n      ] : [0, 0, 0];\r\n    };\r\n\r\n\r\n    var x: number;\r\n\r\n    x = 0.5;\r\n\r\n    // Step 2: Reduce intensity of each RGB component by multiplying it by 0.8\r\n    const reduceIntensity = (rgb: number[]): number[] => {\r\n      return rgb.map((value) => Math.round(value * x));\r\n    };\r\n\r\n    // Step 3: Convert modified RGB values back to hexadecimal\r\n    const rgbToHex = (rgb: number[]): string => {\r\n      return '#' + rgb.map((value) => {\r\n        const hex = value.toString(16);\r\n        return hex.length === 1 ? '0' + hex : hex;\r\n      }).join('');\r\n    };\r\n\r\n    const rgbColor = hexToRgb(color);\r\n    const reducedRgb = reduceIntensity(rgbColor);\r\n    const reducedHex = rgbToHex(reducedRgb);\r\n\r\n    return reducedHex;\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n\r\n  function FilterGradient(width: any, height: any, type: string) {\r\n    var filtercolorMode = 9;\r\n    var ctx = canvasRefdummy.current.getContext(\"2d\");\r\n    canvasRefdummy.current.height = height;\r\n    canvasRefdummy.current.width = width;\r\n\r\n    if (type === \"jentle\") {\r\n      var gradient = ctx.createLinearGradient(\r\n        width / 73.6,\r\n        height / 33.4,\r\n        0,\r\n        width / 2,\r\n        height / 2,\r\n        width * 0.6\r\n      );\r\n    } else if (type === \"mint\" || type === \"sahara\") {\r\n      var gradient = ctx.createLinearGradient(\r\n        width / 73.6,\r\n        height / 33.4,\r\n        0,\r\n        width / 2,\r\n        height / 2,\r\n        width * 0.6\r\n      );\r\n    } else if (type === \"fog\") {\r\n      var gradient = ctx.createLinearGradient(\r\n        width / 2,\r\n        height / 2,\r\n        0,\r\n        width / 2,\r\n        height / 2,\r\n        width * 0.6\r\n      );\r\n    } else if (type === \"nebula\") {\r\n      var gradient = ctx.createLinearGradient(\r\n        width / 2,\r\n        height / 2,\r\n        0,\r\n        width / 2,\r\n        height / 2,\r\n        width * 0.6\r\n      );\r\n    } else if (type === \"juice\") {\r\n      var gradient = ctx.createRadialGradient(\r\n        width / 2,\r\n        height / 2,\r\n        0,\r\n        width / 2,\r\n        height / 2,\r\n        width * 0.7\r\n      );\r\n    } else if (type === \"moonshine\") {\r\n      var gradient = ctx.createRadialGradient(\r\n        width / 2,\r\n        height / 2,\r\n        0,\r\n        width / 2,\r\n        height / 2,\r\n        width * 0.7\r\n      );\r\n    } else if (type === \"vintage\") {\r\n      var gradient = ctx.createRadialGradient(\r\n        width / 2,\r\n        height / 3,\r\n        0,\r\n        width / 2,\r\n        height / 2,\r\n        width * 0.66\r\n      );\r\n    } else if (type === \"rainbow\" || type === \"superstar\") {\r\n      var gradient = ctx.createLinearGradient(\r\n        width / 73.6,\r\n        height / 33.4,\r\n        0,\r\n        width / 2,\r\n        height / 2,\r\n        width * 0.6\r\n      );\r\n    } else {\r\n    }\r\n\r\n\r\n    if (type === \"jentle\") {\r\n      const reducedColor1 = convertColor('#2c1f1f', filtercolorMode);\r\n      const reducedColor2 = convertColor('#41243c', filtercolorMode);\r\n      const reducedColor3 = convertColor('#272122', filtercolorMode);\r\n      gradient.addColorStop(0.1, reducedColor1);\r\n      gradient.addColorStop(0.2, reducedColor2);\r\n      gradient.addColorStop(0.8, reducedColor3);\r\n    } else if (type === \"mint\") {\r\n\r\n      gradient.addColorStop(0.5, \"#21483e\");\r\n      gradient.addColorStop(0.75, \"#302831\");\r\n      gradient.addColorStop(0.1, \"#203131\");\r\n    } else if (type === \"nebula\") {\r\n      const reducedColor1 = convertColor('#3b1858', filtercolorMode);\r\n      const reducedColor2 = convertColor('#151569', filtercolorMode);\r\n      gradient.addColorStop(0.1, reducedColor1);\r\n      gradient.addColorStop(0.7, reducedColor2);\r\n    } else if (type === \"juice\") {\r\n      const reducedColor1 = convertColor('#242424', filtercolorMode);\r\n      const reducedColor2 = convertColor('#313131', filtercolorMode);\r\n      gradient.addColorStop(0, reducedColor1);\r\n      gradient.addColorStop(1, reducedColor2);\r\n    } else if (type === \"moonshine\") {\r\n      const reducedColor1 = convertColor('#403d6149', filtercolorMode);\r\n      const reducedColor2 = convertColor('#222222', filtercolorMode);\r\n      const reducedColor3 = convertColor('#403d6149', filtercolorMode);\r\n      const reducedColor4 = convertColor('#403d6149', filtercolorMode);\r\n\r\n      gradient.addColorStop(0.25, reducedColor1);\r\n      gradient.addColorStop(0.5, reducedColor2);\r\n      gradient.addColorStop(0.75, reducedColor3);\r\n      gradient.addColorStop(1, reducedColor4);\r\n    } else if (type === \"rainbow\") {\r\n      const reducedColor1 = convertColor('#5c384c', filtercolorMode);\r\n      const reducedColor2 = convertColor('#5c384c', filtercolorMode);\r\n      const reducedColor3 = convertColor('#3e452f', filtercolorMode);\r\n      const reducedColor4 = convertColor('#2e3c3f', filtercolorMode);\r\n      gradient.addColorStop(0.2, reducedColor1);\r\n      gradient.addColorStop(0.3, reducedColor2);\r\n      gradient.addColorStop(0.5, reducedColor3);\r\n      gradient.addColorStop(0.87, reducedColor4);\r\n    } else if (type === \"superstar\") {\r\n      const reducedColor1 = convertColor('#244a82', filtercolorMode);\r\n      const reducedColor2 = convertColor('#4d3017', filtercolorMode);\r\n      gradient.addColorStop(0.2, reducedColor1);\r\n      gradient.addColorStop(0.8, reducedColor2);\r\n    } else if (type === \"fog\") {\r\n      const reducedColor1 = convertColor('#293746', filtercolorMode);\r\n      const reducedColor2 = convertColor('#3a2922', filtercolorMode);\r\n      const reducedColor3 = convertColor('#3b355d', filtercolorMode);\r\n      gradient.addColorStop(0, reducedColor1);\r\n      gradient.addColorStop(0.4, reducedColor2);\r\n      gradient.addColorStop(0.8, reducedColor3);\r\n    } else if (type === \"vintage\") {\r\n      const reducedColor1 = convertColor('#111111', filtercolorMode);\r\n      const reducedColor2 = convertColor('#222222', filtercolorMode);\r\n      const reducedColor3 = convertColor('#333333', filtercolorMode);\r\n      gradient.addColorStop(0, reducedColor1);\r\n      gradient.addColorStop(0.6, reducedColor2);\r\n      gradient.addColorStop(1, reducedColor3);\r\n    } else if (type === \"sahara\") {\r\n      const reducedColor1 = convertColor('#3b5910', filtercolorMode);\r\n      const reducedColor2 = convertColor('#191d1b', filtercolorMode);\r\n      gradient.addColorStop(0.1, reducedColor1);\r\n      gradient.addColorStop(0.6, reducedColor2);\r\n    } else {\r\n    }\r\n\r\n    ctx.fillStyle = gradient;\r\n\r\n    ctx.fillRect(0, 0, width, height);\r\n\r\n    return ctx;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  function blobToBase64(blob: any) {\r\n    return new Promise((resolve, _) => {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => resolve(reader.result);\r\n      reader.readAsDataURL(blob);\r\n    });\r\n  }\r\n\r\n  ///\r\n  ///\r\n  ///\r\n  /// UPDATE CONFIRM PASSWORD VALUE/ SHOW SPINNER REPEAT PASSWORD\r\n  function ApplyImageFilter(\r\n    typex: string,\r\n    index: number,\r\n    index2: number,\r\n    Ref: any,\r\n    method: string,\r\n    resolution: string\r\n  ) {\r\n    //////////////////INITIALIZE  CANVAS\r\n\r\n    var type = typex;\r\n\r\n    if (superzeroeffect[index]) {\r\n      type = \"normal\";\r\n\r\n    }\r\n\r\n    if (\r\n      type === effectMode[index] &&\r\n      activeSticker === 100 &&\r\n      method !== \"imageHD\" &&\r\n      method !== \"imageHDall\"\r\n    ) {\r\n      if (index + 1 > selectedImage.length - 1) {\r\n        setblink(false);\r\n        seteffectMode(effectModexx);\r\n        setregimageholdfilter(regimageholdfilterxx);\r\n      } else {\r\n        ApplyImageFilter(\r\n          typex,\r\n          index + 1,\r\n          index2 + 1,\r\n          getImageWidth,\r\n          \"image\",\r\n          \"sd\"\r\n        );\r\n      }\r\n    } else {\r\n      const previewFileReadimage = new Image();\r\n      //// previewFileReadimage.src = itemUploadRef.current[index].src;\r\n      if (duplicateItemupload[index]) {\r\n        previewFileReadimage.src = duplicateItemupload[index];\r\n      } else {\r\n        previewFileReadimage.src = itemUploadRefSD.current[index].src;\r\n      }\r\n\r\n      var widthx: number;\r\n      var heightx: number;\r\n      var width: number9\r\n      var height: number;\r\n      /////////////////////////////////////////resolution//////////////////////////////////////////////\r\n      var dynamicDimensions = matchMobile\r\n        ? window.innerHeight * 4.5\r\n        : window.innerHeight * 1.8;\r\n      var dynamicDimensionsx = matchMobile\r\n        ? window.innerWidth * 4.5\r\n        : window.innerWidth * 1.8;\r\n      /////////////////////////////////////////resolution//////////////////////////////////////////////\r\n\r\n\r\n      previewFileReadimage.onload = function () {\r\n        const ctx = canvasRef.current.getContext(\"2d\");\r\n        if (\r\n          previewFileReadimage.naturalWidth > previewFileReadimage.naturalHeight\r\n        ) {\r\n          if (method === \"thumb\") {\r\n            widthx = matchMobile ? 155 : 250;\r\n            width = matchMobile ? 155 : 250;\r\n          } else {\r\n\r\n\r\n\r\n            if (resolution === \"hd\") {\r\n              widthx = previewFileReadimage.naturalWidth;\r\n              width = previewFileReadimage.naturalWidth;\r\n            } else {\r\n              widthx = matchMobile\r\n                ? dynamicDimensionsx * 0.7\r\n                : dynamicDimensionsx * 0.8;\r\n              width = matchMobile\r\n                ? dynamicDimensionsx * 0.7\r\n                : dynamicDimensionsx * 0.8;\r\n            }\r\n          }\r\n\r\n          var scalex = widthx / previewFileReadimage.naturalWidth;\r\n          heightx = previewFileReadimage.naturalHeight * scalex;\r\n          var scale = width / previewFileReadimage.naturalWidth;\r\n          height = previewFileReadimage.naturalHeight * scale;\r\n        } else {\r\n          if (method === \"thumb\") {\r\n            heightx = matchMobile ? 150 : 250;\r\n            height = matchMobile ? 150 : 250;\r\n          } else {\r\n            if (resolution === \"hd\") {\r\n              heightx = previewFileReadimage.naturalHeight;\r\n              height = previewFileReadimage.naturalHeight;\r\n            } else {\r\n              heightx = matchMobile\r\n                ? dynamicDimensions * 0.6\r\n                : dynamicDimensions * 0.9;\r\n              height = matchMobile\r\n                ? dynamicDimensions * 0.6\r\n                : dynamicDimensions * 0.9;\r\n            }\r\n          }\r\n\r\n          var scalex = heightx / previewFileReadimage.naturalHeight;\r\n          widthx = previewFileReadimage.naturalWidth * scalex;\r\n\r\n          var scale = height / previewFileReadimage.naturalHeight;\r\n          width = previewFileReadimage.naturalWidth * scale;\r\n        }\r\n\r\n        canvasRef.current.height = height;\r\n        canvasRef.current.width = width;\r\n        //////////////////INITIALIZE  CANVAS\r\n\r\n        requestAnimationFrame(async () => {\r\n          //////////////////CSS EDIT IMAGE WITH CTX.FILTER\r\n\r\n\r\n\r\n          if (type === \"lift\") {\r\n            ctx.filter =\r\n              \"contrast(0.99) brightness(0.98) blur(0px) saturate(126%)\";\r\n          } else if (type === \"sahara\") {\r\n            ctx.filter = \"contrast(1.2) brightness(0.91) saturate(104%)\";\r\n          } else if (type === \"jentle\") {\r\n            ctx.filter =\r\n              \"contrast(1.25) brightness(0.76) hue-rotate(20deg) saturate(90%) \";\r\n          } else if (type === \"mint\") {\r\n            ctx.filter = \"contrast(1.25) brightness(0.77)  saturate(135%)  \";\r\n          } else if (type === \"nebula\") {\r\n            ctx.filter = \"contrast(1.1) brightness(1.03)\";\r\n          } else if (type === \"juice\") {\r\n            if (method === \"thumb\" && matchMobile) {\r\n              ctx.filter =\r\n                \"contrast(1.16) brightness(0.99) saturate(185%) blur(0px)\";\r\n            } else {\r\n              ctx.filter =\r\n                \"contrast(0.96) brightness(1) saturate(185%) blur(0.55px)\";\r\n            }\r\n          } else if (type === \"rainbow\") {\r\n            ctx.filter = \"contrast(1.17) brightness(0.92) saturate(145%) \";\r\n          } else if (type === \"superstar\") {\r\n            ctx.filter =\r\n              \"contrast(1.07) brightness(0.93) saturate(130%)  hue-rotate(1.4deg)\";\r\n          } else if (type === \"fog\") {\r\n            ctx.filter = \"contrast(1.2) brightness(0.95) saturate(137%)\";\r\n          } else if (type === \"moonshine\") {\r\n            ctx.filter =\r\n              \"contrast(0.95) brightness(1.05.2) saturate(45%) blur(0px)\";\r\n          } else if (type === \"vintage\") {\r\n            ctx.filter = \" contrast(1.2)  brightness(0.87.6)  saturate(38%)\";\r\n          } else {\r\n          }\r\n\r\n\r\n          //////////////////CSS EDIT IMAGE WITH CTX.FILTER\r\n\r\n          ctx.drawImage(\r\n            previewFileReadimage,\r\n            0,\r\n            0,\r\n            canvasRef.current.width,\r\n            canvasRef.current.height\r\n          );\r\n\r\n          //////////////////////VIGNETTE\r\n          var w = canvasRef.current.width;\r\n          var h = canvasRef.current.height;\r\n\r\n\r\n          //////////////////////VIGNETTE\r\n          var width = w;\r\n          var height = h;\r\n          if (type === \"sahara\") {\r\n            var gradient = ctx.createLinearGradient(\r\n              w / 2.7,\r\n              h / 2,\r\n              0,\r\n              w / 4.8,\r\n              h / 2,\r\n              w * 8.65\r\n            );\r\n\r\n            gradient.addColorStop(0, \"rgba(80, 111, 32, 0.01)\");\r\n            gradient.addColorStop(1, \"rgba(10,10,10,0.001)\");\r\n\r\n            ctx.fillStyle = gradient;\r\n            ctx.fillRect(0, 0, width, height);\r\n          } else if (type === \"mint\") {\r\n            var gradient = ctx.createRadialGradient(\r\n              w / 2,\r\n              h / 2,\r\n              0,\r\n              w / 2,\r\n              h / 2,\r\n              w * 0.65\r\n            );\r\n\r\n            gradient.addColorStop(0, \"rgba(255, 255, 255,0.01)\");\r\n            gradient.addColorStop(1, \"rgba(0,0,0,0.001)\");\r\n\r\n            ctx.fillStyle = gradient;\r\n            ctx.fillRect(0, 0, width, height);\r\n          } else if (type === \"lift\" || type === \"juice\") {\r\n            var gradient = ctx.createRadialGradient(\r\n              w / 2,\r\n              h / 3,\r\n              0,\r\n              w / 2,\r\n              h / 3,\r\n              w * 0.66\r\n            );\r\n\r\n            gradient.addColorStop(0, \"rgba(255, 255, 255,0.01)\");\r\n            gradient.addColorStop(1, \"rgba(255, 255, 255,0.001)\");\r\n\r\n            ctx.fillStyle = gradient;\r\n            ctx.fillRect(0, 0, width, height);\r\n          } else if (type === \"moonshine\") {\r\n            var gradient = ctx.createLinearGradient(\r\n              w / 2,\r\n              h / 3,\r\n              0,\r\n              w / 2,\r\n              h / 3,\r\n              w * 0.4\r\n            );\r\n\r\n            gradient.addColorStop(0, \" rgba(255, 255, 255,0.001)\");\r\n            gradient.addColorStop(1, \"#403d6149\");\r\n\r\n            ctx.fillStyle = gradient;\r\n            ctx.fillRect(0, 0, width, height);\r\n\r\n            var gradient = ctx.createRadialGradient(\r\n              w / 2,\r\n              h / 2,\r\n              0,\r\n              w / 2,\r\n              h / 2,\r\n              w * 0.3\r\n            );\r\n\r\n            gradient.addColorStop(0, \"rgba(0,0,0,0.02)\");\r\n            gradient.addColorStop(1, \" rgba(255, 255, 255,0.001)\");\r\n\r\n            ctx.fillStyle = gradient;\r\n            ctx.fillRect(0, 0, width, height);\r\n          } else if (type === \"vintage\") {\r\n\r\n          } else if (type === \"nebula\") {\r\n            var gradient = ctx.createRadialGradient(\r\n              w / 2,\r\n              h / 2,\r\n              0,\r\n              w / 2,\r\n              h / 2,\r\n              w * 0.65\r\n            );\r\n\r\n            gradient.addColorStop(0, \"rgba(255, 255, 255, 0.006)\");\r\n            gradient.addColorStop(1, \"rgba(0, 0, 0, 0.08)\");\r\n\r\n            ctx.fillStyle = gradient;\r\n            ctx.fillRect(0, 0, width, height);\r\n          } else if (type === \"rainbow\") {\r\n            var gradient = ctx.createRadialGradient(\r\n              w / 2,\r\n              h / 2,\r\n              0,\r\n              w / 2,\r\n              h / 2,\r\n              w * 0.68\r\n            );\r\n\r\n            gradient.addColorStop(0, \"rgb(163, 218, 37,0.004)\");\r\n            gradient.addColorStop(1, \"rgb(27, 194, 236,0.004)\");\r\n\r\n            ctx.fillStyle = gradient;\r\n            ctx.fillRect(0, 0, width, height);\r\n          } else if (type === \"fog\") {\r\n            var gradient = ctx.createLinearGradient(\r\n              w / 2,\r\n              h / 71,\r\n              0,\r\n              w / 19,\r\n              h / 2,\r\n              w * 0.4\r\n            );\r\n\r\n            gradient.addColorStop(0, \"rgba(255, 255, 255,0)\");\r\n            gradient.addColorStop(1, \"#20422e5a\");\r\n\r\n            ctx.fillStyle = gradient;\r\n            ctx.fillRect(0, 0, width, height);\r\n          } else {\r\n          }\r\n          //////////////////////VIGNETTE\r\n\r\n          //////////////////////GRADIENT BRIGHTNESS\r\n\r\n          if (type === \"normal\") {\r\n          } else {\r\n            var gradient = ctx.createRadialGradient(\r\n              w / 2,\r\n              h / 2,\r\n              0,\r\n              w / 2,\r\n              h / 2,\r\n              w * 0.6\r\n            );\r\n            if (type === \"lift\") {\r\n              gradient.addColorStop(0, \"#dcecdf16\");\r\n              gradient.addColorStop(1, \"#dceaec1a\");\r\n            } else if (type === \"fog\") {\r\n              gradient.addColorStop(0, \"#c9d6df11\");\r\n              gradient.addColorStop(1, \"#bef0ce13\");\r\n            } else if (type === \"jentle\") {\r\n              gradient.addColorStop(0, \"rgba(255, 255, 255,0.001)\");\r\n              gradient.addColorStop(1, \"rgba(255, 255, 255,0.001)\");\r\n            } else if (type === \"vintage\") {\r\n\r\n            } else if (\r\n              type === \"superstar\" ||\r\n              type === \"rainbow\" ||\r\n              type === \"sahara\"\r\n            ) {\r\n              gradient.addColorStop(0, \"rgba(255, 255, 255,0.002)\");\r\n              gradient.addColorStop(1, \"rgba(255, 255, 255,0.001)\");\r\n            } else {\r\n              gradient.addColorStop(0, \"rgba(255, 255, 255,0.002)\");\r\n              gradient.addColorStop(1, \"rgba(255, 255, 255,0.001)\");\r\n            }\r\n\r\n            ctx.fillStyle = gradient;\r\n            ctx.fillRect(0, 0, width, height);\r\n          }\r\n\r\n          //////////////////////GRADIENT BRIGHTNESS\r\n\r\n          ////////////////// /////// GLOBALCOMPOSITEOPERATION\r\n          if (type === \"sahara\") {\r\n            ////////////composition\r\n            ctx.globalCompositeOperation = \"overlay\";\r\n            ctx.fillStyle = \"#a58e89cc\";\r\n            ctx.fillRect(0, 0, width, height);\r\n            ctx.globalCompositeOperation = \"overlay\";\r\n            ctx.fillStyle = \"#a58e89cc\";\r\n            ctx.fillRect(0, 0, width, height);\r\n\r\n            ////////////composition\r\n          } else if (type === \"jentle\") {\r\n            ////////////composition\r\n            ctx.globalCompositeOperation = \"overlay\";\r\n            ctx.fillStyle = \"#d3b5b5\";\r\n            ctx.fillRect(0, 0, width, height);\r\n            ctx.globalCompositeOperation = \"soft-light\";\r\n            ctx.fillStyle = \"#d3b5b5\";\r\n            ctx.fillRect(0, 0, width, height);\r\n\r\n            ////////////composition\r\n          } else if (type === \"mint\") {\r\n\r\n          } else if (type === \"nebula\") {\r\n            ////////////composition\r\n            ctx.globalCompositeOperation = \"soft-light\";\r\n            ctx.fillStyle = \"#6e6b72cc\";\r\n            ctx.fillRect(0, 0, width, height);\r\n            ctx.globalCompositeOperation = \"soft-light\";\r\n            ctx.fillStyle = \"#6c6971cc\";\r\n            ctx.fillRect(0, 0, width, height);\r\n\r\n            ////////////composition\r\n          } else if (type === \"moonshine\") {\r\n            ////////////composition\r\n            ctx.globalCompositeOperation = \"soft-light\";\r\n            ctx.fillStyle = \"#77479f68\";\r\n            ctx.fillRect(0, 0, width, height);\r\n            ctx.globalCompositeOperation = \"overlay\";\r\n            ctx.fillStyle = \"#69359368\";\r\n            ctx.fillRect(0, 0, width, height);\r\n\r\n            ////////////composition\r\n          } else if (type === \"juice\") {\r\n            ////////////composition\r\n            ctx.globalCompositeOperation = \"soft-light\";\r\n            ctx.fillStyle = \"#5b6c7014\";\r\n            ctx.fillRect(0, 0, width, height);\r\n            ctx.globalCompositeOperation = \"overlay\";\r\n            ctx.fillStyle = \"#5b6c7014\";\r\n            ctx.fillRect(0, 0, width, height);\r\n            ctx.globalCompositeOperation = \"overlay\";\r\n            ctx.fillStyle = \"#5b6c7014\";\r\n            ctx.fillRect(0, 0, width, height);\r\n            ////////////composition\r\n          } else if (type === \"rainbow\") {\r\n            ////////////composition\r\n            ctx.globalCompositeOperation = \"overlay\";\r\n            ctx.fillStyle = \"#3950681f\";\r\n            ctx.fillRect(0, 0, width, height);\r\n            ctx.globalCompositeOperation = \"soft-light\";\r\n            ctx.fillStyle = \"#42806c1f\";\r\n            ctx.fillRect(0, 0, width, height);\r\n\r\n            ////////////composition\r\n          } else if (type === \"superstar\") {\r\n            ////////////composition\r\n            ctx.globalCompositeOperation = \"overlay\";\r\n            ctx.fillStyle = \"#69758113\";\r\n            ctx.fillRect(0, 0, width, height);\r\n            ctx.globalCompositeOperation = \"overlay\";\r\n            ctx.fillStyle = \"#69758113\";\r\n            ctx.fillRect(0, 0, width, height);\r\n\r\n            ////////////composition\r\n          } else if (type === \"fog\") {\r\n            ////////////composition\r\n            ctx.globalCompositeOperation = \"soft-light\";\r\n            ctx.fillStyle = \"#2c2b2937\";\r\n            ctx.fillRect(0, 0, width, height);\r\n            ctx.globalCompositeOperation = \"soft-light\";\r\n            ctx.fillStyle = \"#2c2b2937\";\r\n            ctx.fillRect(0, 0, width, height);\r\n\r\n            ////////////composition\r\n          } else if (type === \"vintage\") {\r\n            ////////////composition\r\n\r\n            ctx.globalCompositeOperation = \"soft-light\";\r\n            ctx.fillStyle = \"#8888b14e\";\r\n            ctx.fillRect(0, 0, width, height);\r\n            ctx.globalCompositeOperation = \"overlay\";\r\n            ctx.fillStyle = \"#5c83944e\";\r\n            ctx.fillRect(0, 0, width, height);\r\n            ctx.globalCompositeOperation = \"soft-light\";\r\n            ctx.fillStyle = \"#8888b14e\";\r\n            ctx.fillRect(0, 0, width, height);\r\n            ////////////composition\r\n            ////////////composition\r\n          } else {\r\n          }\r\n          ////////////////// /////// GLOBALCOMPOSITEOPERATION\r\n\r\n          ////////////////////GRADIENT BLENDING\r\n          if (\r\n            type === \"jentle\" ||\r\n            type === \"mint\" ||\r\n            type === \"nebula\" ||\r\n            type === \"juice\" ||\r\n            type === \"rainbow\" ||\r\n            type === \"superstar\" ||\r\n            type === \"fog\" ||\r\n            type === \"moonshine\" ||\r\n            type === \"vintage\" ||\r\n            type === \"sahara\"\r\n          ) {\r\n            var gradient = FilterGradient(width, height, type);\r\n            var screen = blend(\r\n              ctx,\r\n              gradient,\r\n              width,\r\n              height,\r\n              function (bottomPixel: any, topPixel: any) {\r\n                return 255 - ((255 - topPixel) * (255 - bottomPixel)) / 255;\r\n              }\r\n            );\r\n            ctx.putImageData(screen, 0, 0);\r\n          }\r\n\r\n          ////////////////////GRADIENT BLENDING\r\n\r\n          try {\r\n            KeepCallingThumbnail4Filters(Ref, ctx, index2, method);\r\n\r\n            if (\r\n              method === \"image\" ||\r\n              method === \"imageHD\" ||\r\n              method === \"imageHDall\"\r\n            ) {\r\n              var data = canvasRef.current.toDataURL();\r\n\r\n              Ref.current[index].src = data;\r\n\r\n              if (method === \"imageHDall\") {\r\n\r\n                var data = canvasRef.current.toDataURL(\"image/png\");\r\n                var datathumb = canvasRef.current.toDataURL(\"image/jpeg\", 0.05);\r\n\r\n                const res = await fetch(data);\r\n                const datax = await res.blob();\r\n\r\n                const resdatathumb = await fetch(datathumb);\r\n                const datathumbx = await resdatathumb.blob();\r\n\r\n                var base64String = await blobToBase64(datax);\r\n\r\n                finalImageDataxx[index] = datax;\r\n                finalImageDataxxSD[index] = datathumbx;\r\n                finalImageDataxxBASE64[index] = base64String;\r\n              }\r\n\r\n              regimageholdfilterxx[index] = data;\r\n              effectModexx[index] = type;\r\n\r\n              ctx.clearRect(\r\n                0,\r\n                0,\r\n                canvasRef.current.width,\r\n                canvasRef.current.height\r\n              );\r\n\r\n              if (method === \"imageHD\") {\r\n                sethdfilter(false);\r\n                setblink(false);\r\n                seteffectMode(effectModexx);\r\n                setregimageholdfilter(regimageholdfilterxx);\r\n              } else {\r\n\r\n                if (index + 1 > selectedImage.length - 1) {\r\n                  setblink(false);\r\n                  if (method === \"imageHDall\") {\r\n                    setfinalImageData(finalImageDataxx);\r\n                    setfinalImageDataSD(finalImageDataxxSD);\r\n                    setfinalImageDataBASE64(finalImageDataxxBASE64);\r\n\r\n                    setsupeFilterLoadFade(false);\r\n                    setstartTopicCap(true);\r\n                  }\r\n                  seteffectMode(effectModexx);\r\n                  setregimageholdfilter(regimageholdfilterxx);\r\n                } else {\r\n                  if (method === \"imageHDall\") {\r\n                    ApplyImageFilter(\r\n                      effectMode[index + 1],\r\n                      index + 1,\r\n                      index2 + 1,\r\n                      getImageWidth,\r\n                      \"imageHDall\",\r\n                      \"hd\"\r\n                    );\r\n                  } else {\r\n                    ApplyImageFilter(\r\n                      typex,\r\n                      index + 1,\r\n                      index2 + 1,\r\n                      getImageWidth,\r\n                      \"image\",\r\n                      \"sd\"\r\n                    );\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            if (method === \"supersticker\") {\r\n              if (FilterUnderStickerStopFiltering) {\r\n                trapfiltersxx[index] = true;\r\n                settrapfilters(trapfiltersxx);\r\n              } else {\r\n                trapfiltersxx[index] = false;\r\n                settrapfilters(trapfiltersxx);\r\n              }\r\n\r\n              var data = canvasRef.current.toDataURL();\r\n              Ref.current[index].src = data;\r\n\r\n              if (effectMode[index] !== \"normal\") {\r\n                if (duplicateItemupload[index]) {\r\n                } else {\r\n                  regimageholdfilterxx[index] = data;\r\n                  setregimageholdfilter(regimageholdfilterxx);\r\n                }\r\n              }\r\n              ctx.clearRect(\r\n                0,\r\n                0,\r\n                canvasRef.current.width,\r\n                canvasRef.current.height\r\n              );\r\n              setactiveSticker(100);\r\n            }\r\n          } catch {\r\n            console.log(\"filtermode  filter error\");\r\n          }\r\n        });\r\n\r\n        canvasRef.current.style.width = `${widthx}px`;\r\n        canvasRef.current.style.height = `${heightx}px`;\r\n      };\r\n    }\r\n  }\r\n\r\n  const KeepCallingThumbnail4Filters = (\r\n    Ref: any,\r\n    ctx: any,\r\n    index2: number,\r\n    method: any\r\n  ) => {\r\n    //// const gg = await ctx.putImageData(screen, 0, 0);\r\n\r\n    if (method === \"thumb\") {\r\n      Ref.current[index2].src = canvasRef.current.toDataURL();\r\n      ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n      if (index2 === 1) {\r\n        ApplyImageFilter(\r\n          \"juice\",\r\n          0,\r\n          index2 + 1,\r\n          imageFiltersRef,\r\n          \"thumb\",\r\n          \"sd\"\r\n        );\r\n      } else if (index2 === 2) {\r\n        ApplyImageFilter(\r\n          \"superstar\",\r\n          0,\r\n          index2 + 1,\r\n          imageFiltersRef,\r\n          \"thumb\",\r\n          \"sd\"\r\n        );\r\n      } else if (index2 === 3) {\r\n        ApplyImageFilter(\r\n          \"rainbow\",\r\n          0,\r\n          index2 + 1,\r\n          imageFiltersRef,\r\n          \"thumb\",\r\n          \"sd\"\r\n        );\r\n      } else if (index2 === 4) {\r\n        ApplyImageFilter(\r\n          \"fog\",\r\n          0,\r\n          index2 + 1,\r\n          imageFiltersRef,\r\n          \"thumb\",\r\n          \"sd\"\r\n        );\r\n      } else if (index2 === 5) {\r\n        ApplyImageFilter(\r\n          \"sahara\",\r\n          0,\r\n          index2 + 1,\r\n          imageFiltersRef,\r\n          \"thumb\",\r\n          \"sd\"\r\n        );\r\n      } else if (index2 === 6) {\r\n        ApplyImageFilter(\r\n          \"nebula\",\r\n          0,\r\n          index2 + 1,\r\n          imageFiltersRef,\r\n          \"thumb\",\r\n          \"sd\"\r\n        );\r\n      } else if (index2 === 7) {\r\n        ApplyImageFilter(\r\n          \"jentle\",\r\n          0,\r\n          index2 + 1,\r\n          imageFiltersRef,\r\n          \"thumb\",\r\n          \"sd\"\r\n        );\r\n      } else if (index2 === 8) {\r\n        ApplyImageFilter(\"mint\", 0, index2 + 1, imageFiltersRef, \"thumb\", \"sd\");\r\n      } else if (index2 === 9) {\r\n        ApplyImageFilter(\r\n          \"moonshine\",\r\n          0,\r\n          index2 + 1,\r\n          imageFiltersRef,\r\n          \"thumb\",\r\n          \"sd\"\r\n        );\r\n      } else if (index2 === 10) {\r\n        ApplyImageFilter(\r\n          \"vintage\",\r\n          0,\r\n          index2 + 1,\r\n          imageFiltersRef,\r\n          \"thumb\",\r\n          \"sd\"\r\n        );\r\n        setshowfiltersOnloadblur(true);\r\n      } else {\r\n        ApplyImageFilter(\"normal\", 0, 0, getImageWidth, \"image\", \"sd\");\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (hdfilter) {\r\n      ApplyImageFilter(\r\n        effectMode[superstickerIndex],\r\n        superstickerIndex,\r\n        0,\r\n        getImageWidth,\r\n        \"imageHD\",\r\n        \"hd\"\r\n      );\r\n    }\r\n  }, [hdfilter]);\r\n\r\n  useEffect(() => {\r\n    if (startSuperSticker) {\r\n    } else {\r\n      if (activeSticker != 100) {\r\n        if (duplicateItemupload[activeSticker]) {\r\n          ApplyImageFilter(\r\n            effectMode[activeSticker],\r\n            activeSticker,\r\n            0,\r\n            getImageWidth,\r\n            \"supersticker\",\r\n            \"sd\"\r\n          );\r\n        } else {\r\n          ApplyImageFilter(\r\n            effectMode[activeSticker],\r\n            activeSticker,\r\n            0,\r\n            getImageWidth,\r\n            \"supersticker\",\r\n            \"sd\"\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }, [startSuperSticker]);\r\n\r\n  useEffect(() => {\r\n    if (imageFiltersRef && activatefilterImageReducer) {\r\n      setTimeout(function () {\r\n        setallow(true);\r\n        setshowfiltersOnloadblur(false);\r\n        setshowfiltersOnload(true);\r\n        ApplyImageFilter(\"lift\", 0, 1, imageFiltersRef, \"thumb\", \"sd\");\r\n      }, 350);\r\n    }\r\n  }, [activatefilterImageReducer]);\r\n\r\n  const startImageFilter = (i: number) => {\r\n    if (i === 12 && ActiveSlide === i) {\r\n      setsupeFilterLoadFade(true);\r\n      ApplyImageFilter(effectMode[0], 0, 0, getImageWidth, \"imageHDall\", \"hd\");\r\n    } else {\r\n      clickOptions(i, optionsClickType, \"filter\");\r\n\r\n      if (Timer.current) {\r\n        clearTimeout(Timer.current);\r\n      }\r\n      if (ActiveSlide === i) {\r\n        setblink(true);\r\n        ApplyImageFilter(\r\n          optionsNameData[i],\r\n          0,\r\n          0,\r\n          getImageWidth,\r\n          \"image\",\r\n          \"sd\"\r\n        );\r\n      } else {\r\n        if (i === 12) {\r\n        } else {\r\n          Timer.current = setTimeout(function () {\r\n            setblink(true);\r\n            ApplyImageFilter(\r\n              optionsNameData[i],\r\n              0,\r\n              0,\r\n              getImageWidth,\r\n              \"image\",\r\n              \"sd\"\r\n            );\r\n          }, 2000);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const clickOptionsOutter = (i: any, optionsClickType: any, source: any) => {\r\n    if (Timer.current) {\r\n      clearTimeout(Timer.current);\r\n    }\r\n\r\n    if (i === -1) {\r\n      clickOptions(optionsImages.length, optionsClickType, \"filter2\");\r\n    } else if (i > optionsImages.length - 1) {\r\n      clickOptions(0, optionsClickType, \"filter\");\r\n    } else {\r\n      clickOptions(i, optionsClickType, \"filter\");\r\n    }\r\n  };\r\n\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n      <canvas\r\n        ref={canvasRef}\r\n        style={{\r\n          padding: \"0px\",\r\n          position: \"fixed\",\r\n          top: \"-400%\",\r\n          zIndex: 0,\r\n          visibility: \"hidden\",\r\n        }}\r\n      />\r\n      <canvas\r\n        ref={canvasRefdummy}\r\n        style={{\r\n          padding: \"0px\",\r\n          display: \"none\",\r\n          position: \"fixed\",\r\n          top: \"-400%\",\r\n          zIndex: 0,\r\n          visibility: \"hidden\",\r\n        }}\r\n      />\r\n      {optionsShow && allow ? (\r\n        <>\r\n          <animated.div ref={getFilterWidthViewable} style={animationop}>\r\n            {matchPc ? (\r\n              <>\r\n                {\" \"}\r\n                <Grid\r\n                  container\r\n                  style={{\r\n                    zIndex: 10,\r\n                    height: \"0px\",\r\n                    width: \"100%\",\r\n                    position: \"fixed\",\r\n                    marginTop: `${(getSliderWidthNew + addedwidth) / 2}px`,\r\n                  }}\r\n                >\r\n                  <Grid\r\n                    item\r\n                    xs={2}\r\n                    style={{\r\n                      zIndex: 10,\r\n                      height: \"0px\",\r\n                      textAlign: \"left\",\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    <CircleIcon\r\n                      onMouseDown={() => {\r\n                        clickOptionsOutter(\r\n                          ActiveSlide - 1,\r\n                          optionsClickType,\r\n                          \"filter\"\r\n                        );\r\n                      }}\r\n                      className={\r\n                        darkmodeReducer\r\n                          ? \"make-small-icons-clickable-dark  buttonshake dontallowhighlighting zuperkinginfo \"\r\n                          : \"make-small-icons-clickable-light  buttonshake  dontallowhighlighting  zuperkinginfo  \"\r\n                      }\r\n                      style={{\r\n                        filter: showfiltersOnloadblur\r\n                          ? \"blur(0px)\"\r\n                          : \"blur(4px)\",\r\n                        marginTop: \"4vh\",\r\n                        fontSize: \"1.6vw\",\r\n                        cursor: \"pointer\",\r\n                        color: darkmodeReducer\r\n                          ? \"rgba(200, 200, 200, 0.7)\"\r\n                          : \"rgba(005, 005, 005, 0.6)\",\r\n                      }}\r\n                    />{\" \"}\r\n                  </Grid>\r\n\r\n                  <Grid\r\n                    item\r\n                    xs={8}\r\n                    style={{\r\n                      height: \"0px\",\r\n                    }}\r\n                  ></Grid>\r\n\r\n                  <Grid\r\n                    item\r\n                    xs={2}\r\n                    style={{\r\n                      zIndex: 10,\r\n                      height: \"0px\",\r\n                      textAlign: \"right\",\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    <CircleIcon\r\n                      className={\r\n                        darkmodeReducer\r\n                          ? \"make-small-icons-clickable-dark  buttonshake dontallowhighlighting zuperkinginfo \"\r\n                          : \"make-small-icons-clickable-light  buttonshake  dontallowhighlighting  zuperkinginfo  \"\r\n                      }\r\n                      onMouseDown={() => {\r\n                        clickOptionsOutter(\r\n                          ActiveSlide + 1,\r\n                          optionsClickType,\r\n                          \"filter\"\r\n                        );\r\n                      }}\r\n                      style={{\r\n                        filter: showfiltersOnloadblur\r\n                          ? \"blur(0px)\"\r\n                          : \"blur(4px)\",\r\n                        marginTop: \"4vh\",\r\n                        fontSize: \"1.6vw\",\r\n                        cursor: \"pointer\",\r\n                        color: darkmodeReducer\r\n                          ? \"rgba(200, 200, 200, 0.7)\"\r\n                          : \"rgba(005, 005, 005, 0.6)\",\r\n                      }}\r\n                    />{\" \"}\r\n                  </Grid>\r\n                </Grid>\r\n              </>\r\n            ) : null}\r\n            <Grid\r\n              container\r\n              className={\r\n                typeTop\r\n                  ? darkmodeReducer\r\n                    ? `optionsTop-background-dark `\r\n                    : `optionsTop-background-light `\r\n                  : \"\"\r\n              }\r\n              onTouchStart={handleTouchStartOptions}\r\n              onTouchMove={handleTouchMoveOptions}\r\n              style={{\r\n                zIndex: 1,\r\n                padding: \"0px\",\r\n                top: matchPc ? (typeTop ? \"-2vh\" : \"0vh\") : \"0vh\",\r\n                position: \"relative\",\r\n                paddingRight: \"200px\",\r\n                margin: \"0 auto\",\r\n                overflow: \"hidden\",\r\n                left: \"0px\",\r\n                height: matchPc ? \"auto\" : \"25vh\",\r\n                paddingBottom: \"1px\",\r\n              }}\r\n            >\r\n              <animated.div ref={optionsCollectImageRef} style={modalanimation}>\r\n                {optionsImages.map((im: any, i: any) => (\r\n                  <Grid key={i} item xs={12} style={{}}>\r\n                    <Grid\r\n                      item\r\n                      xs={12}\r\n                      style={{\r\n                        margin: \"auto\",\r\n                        textAlign: \"center\",\r\n                        position: \"relative\",\r\n                        top: matchPc ? \"1.55vh\" : \"0.54em\",\r\n                      }}\r\n                    >\r\n                      <Grid\r\n                        className={blink ? \"blinken\" : \"\"}\r\n                        item\r\n                        xs={12}\r\n                        style={{\r\n                          margin: \"auto\",\r\n                          marginLeft: \"2vw\",\r\n                          paddingBottom: \"0px\",\r\n                          fontFamily: \"Roboto Condensed\",\r\n                          fontSize: matchPc\r\n                            ? \"1.5vw\"\r\n                            : matchTablet\r\n                              ? \"2.08vh\"\r\n                              : \"2.4vh\",\r\n                          fontWeight: \"bolder\",\r\n                          visibility: ActiveSlide === i ? \"visible\" : \"hidden\",\r\n                          filter: darkmodeReducer\r\n                            ? \"drop-shadow(1.2px 0.1px 1.92px rgba(255, 255, 255, 0.6))\"\r\n                            : \"drop-shadow(1.2px 0.1px 1.92px rgba(41, 53, 70, 8.35))\",\r\n                          color: darkmodeReducer ? \"#eeeeee\" : \"#000000\",\r\n                        }}\r\n                      >\r\n                        {\" \"}\r\n                        {optionsNameData[i]}\r\n                      </Grid>\r\n                    </Grid>\r\n\r\n                    {showfiltersOnload ? (\r\n                      i === 12 ? (\r\n                        <>\r\n                          <div\r\n                            onMouseDown={() => {\r\n                              startImageFilter(i);\r\n                            }}\r\n                            style={{\r\n                              cursor: ActiveSlide === i ? \"pointer\" : \"copy\",\r\n                              width: `${getSliderWidthNew + addedwidth - 5}px`,\r\n                              height: `${getSliderWidthNew + addedwidth - 5}px`,\r\n                              backgroundColor: darkmodeReducer\r\n                                ? \"rgba(010,010,010, 0.68)\"\r\n                                : \"rgba(211,211,211, 0.7)\",\r\n                              borderRadius: \"50%\",\r\n                              marginLeft: \"2vw\",\r\n                              marginTop: \"2.15vh\",\r\n                              textAlign: \"center\",\r\n                              alignItems: \"center\",\r\n                              display: \"grid\",\r\n                              justifyContent: \"center\",\r\n                              boxShadow: darkmodeReducer\r\n                                ? ActiveSlide === i\r\n                                  ? colortypeReducer === 0\r\n                                    ? `0 0 5.5px ${colorReducerdark}`\r\n                                    : `0 0 5.5px ${colorReducer}`\r\n                                  : \"0 0 1.5px#aaaaaa\"\r\n                                : ActiveSlide === i\r\n                                  ? `0 0 5.5px ${colorReducer}`\r\n                                  : \"0 0 1.45px#222222\",\r\n                            }}\r\n                          >\r\n                            <ChevronRightIcon\r\n                              style={{\r\n                                fontSize: matchPc ? \"3.4vw\" : \"5vh\",\r\n                                color: darkmodeReducer ? \"#eeeeee\" : \"#222222\",\r\n                              }}\r\n                              className=\"zuperkinginfo\"\r\n                            />\r\n                          </div>\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          {\" \"}\r\n                          <img\r\n                            ref={addimageFiltersRef}\r\n                            alt={` ${optionsNameData[i]}  option`}\r\n                            onMouseDown={() => {\r\n                              startImageFilter(i);\r\n                            }}\r\n                            style={{\r\n                              backgroundColor: \"red\",\r\n                              cursor: ActiveSlide === i ? \"pointer\" : \"copy\",\r\n                              width: `${getSliderWidthNew + addedwidth}px`,\r\n                              height: `${getSliderWidthNew + addedwidth}px`,\r\n                              borderRadius: \"50%\",\r\n                              padding: \"0px\",\r\n                              objectFit: \"cover\",\r\n                              marginLeft: \"2vw\",\r\n                              marginTop: \"13px\",\r\n                              filter: showfiltersOnloadblur\r\n                                ? \"blur(0px)\"\r\n                                : \"blur(4px)\",\r\n                              boxShadow: darkmodeReducer\r\n                                ? ActiveSlide === i\r\n                                  ? colortypeReducer === 0\r\n                                    ? `0 0 6.8px ${colorReducerdark}`\r\n                                    : `0 0 6.8px ${colorReducer}`\r\n                                  : typeTop\r\n                                    ? \"0 0 12.5px#aaaaaa\"\r\n                                    : \"\"\r\n                                : ActiveSlide === i\r\n                                  ? `0 0 5.7px ${colorReducer}`\r\n                                  : typeTop\r\n                                    ? `0 0 14.45px#222222`\r\n                                    : \"\",\r\n                            }}\r\n                            src={\r\n                              itemUploadRefThumb.current[0]\r\n                                ? itemUploadRefThumb.current[0].src\r\n                                : null\r\n                            }\r\n                          />\r\n                        </>\r\n                      )\r\n                    ) : null}\r\n                  </Grid>\r\n                ))}\r\n              </animated.div>\r\n            </Grid>\r\n          </animated.div>\r\n        </>\r\n      ) : null}\r\n    </>\r\n  );\r\n}\r\n\r\nexport const ImageFilterinner = React.memo(ImageFilterinnerx);\r\n"]},"metadata":{},"sourceType":"module"}