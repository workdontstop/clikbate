{"ast":null,"code":"!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? t(exports, require(\"node-vibrant\"), require(\"lodash.camelcase\"), require(\"lodash.invoke\"), require(\"react\")) : \"function\" == typeof define && define.amd ? define([\"exports\", \"node-vibrant\", \"lodash.camelcase\", \"lodash.invoke\", \"react\"], t) : t(e.reactPalette = {}, e.Vibrant, e.camelCase, e.invoke, e.react);\n}(this, function (e, t, a, r, n) {\n  t = t && t.hasOwnProperty(\"default\") ? t.default : t, a = a && a.hasOwnProperty(\"default\") ? a.default : a, r = r && r.hasOwnProperty(\"default\") ? r.default : r, n = n && n.hasOwnProperty(\"default\") ? n.default : n;\n\n  var o = function (e) {\n    try {\n      return Promise.resolve(t.from(e).getPalette()).then(function (e) {\n        return Object.keys(e).reduce(function (t, n) {\n          var o;\n          return Object.assign({}, t, ((o = {})[a(n)] = r(e, [n, \"getHex\"]), o));\n        }, {});\n      });\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  },\n      c = {\n    loading: !0,\n    data: {},\n    error: void 0\n  };\n\n  function l(e, t) {\n    switch (t.type) {\n      case \"getPalette\":\n        return c;\n\n      case \"resolvePalette\":\n        return Object.assign({}, e, {\n          data: t.payload,\n          loading: !1\n        });\n\n      case \"rejectPalette\":\n        return Object.assign({}, e, {\n          error: t.payload,\n          loading: !1\n        });\n    }\n  }\n\n  function u(e) {\n    var t = n.useReducer(l, c),\n        a = t[0],\n        r = t[1];\n    return n.useEffect(function () {\n      r({\n        type: \"getPalette\"\n      }), o(e).then(function (e) {\n        r({\n          type: \"resolvePalette\",\n          payload: e\n        });\n      }).catch(function (e) {\n        r({\n          type: \"rejectPalette\",\n          payload: e\n        });\n      });\n    }, [e]), a;\n  }\n\n  var i = function (e) {\n    var t = e.children,\n        a = u(e.src);\n    return n.createElement(n.Fragment, null, t(a));\n  };\n\n  e.default = i, e.getPalette = o, e.Palette = i, e.usePalette = u;\n});","map":{"version":3,"sources":["../src/getPalette.ts","../src/usePalette.tsx","../src/Palette.tsx"],"names":["getPalette","src","palette","Vibrant","from","acc","paletteName","Object","camelCase","invoke","keys","reduce","initialState","loading","data","error","undefined","reducer","state","action","type","payload","usePalette","React","useReducer","useEffect","dispatch","then","catch","ex","Palette","ref","children"],"mappings":"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","sourcesContent":["import Vibrant from \"node-vibrant\";\r\nimport camelCase from \"lodash.camelcase\";\r\nimport invoke from 'lodash.invoke';\r\n\r\nexport type PaletteColors = {\r\n  vibrant?: string;\r\n  muted?: string;\r\n  darkVibrant?: string;\r\n  darkMuted?: string;\r\n  lightVibrant?: string;\r\n  lightMuted?: string;\r\n  [name: string]: string | undefined;\r\n};\r\n\r\nexport async function getPalette(src: string) {\r\n  const palette = await Vibrant.from(src).getPalette();\r\n  const setPaletteColor = (acc, paletteName) => ({\r\n    ...acc,\r\n    [camelCase(paletteName)]: invoke(palette, [paletteName, 'getHex'])\r\n  });\r\n\r\n  return Object.keys(palette).reduce<PaletteColors>(setPaletteColor, {});\r\n}\r\n","import React from \"react\";\r\nimport { getPalette, PaletteColors } from \"./getPalette\";\r\n\r\nexport type PaletteState = {\r\n  loading: boolean;\r\n  error?: Error;\r\n  data: PaletteColors;\r\n};\r\n\r\nconst initialState: PaletteState = {\r\n  loading: true,\r\n  data: {},\r\n  error: undefined,\r\n};\r\n\r\nfunction reducer(state: PaletteState, action): PaletteState {\r\n  switch (action.type) {\r\n    case \"getPalette\":\r\n      return initialState;\r\n    case \"resolvePalette\":\r\n      return { ...state, data: action.payload, loading: false };\r\n    case \"rejectPalette\":\r\n      return { ...state, error: action.payload, loading: false };\r\n  }\r\n}\r\n\r\nexport function usePalette(src: string) {\r\n  const [state, dispatch] = React.useReducer(reducer, initialState);\r\n\r\n  React.useEffect(() => {\r\n    dispatch({ type: \"getPalette\" });\r\n\r\n    getPalette(src)\r\n      .then((palette) => {\r\n        dispatch({ type: \"resolvePalette\", payload: palette });\r\n      })\r\n      .catch((ex) => {\r\n        dispatch({ type: \"rejectPalette\", payload: ex });\r\n      });\r\n  }, [src]);\r\n\r\n  return state;\r\n}\r\n","import React, { ReactNode } from \"react\";\r\nimport { PaletteState, usePalette } from \"./usePalette\";\r\n\r\nexport type PaletteProps = {\r\n  src: string;\r\n  children(palette: PaletteState): ReactNode;\r\n};\r\n\r\nexport const Palette: React.FC<PaletteProps> = ({\r\n  src,\r\n  children\r\n}: PaletteProps) => {\r\n  const palette = usePalette(src);\r\n\r\n  return <>{children(palette)}</>;\r\n};\r\n"]},"metadata":{},"sourceType":"script"}